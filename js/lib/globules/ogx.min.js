/* globules.io OGX.JS 1.0.0.3274 */ 
if(void 0===OGX)var OGX={};OGX.List=function(){var filteringMode="and",filterCount=0,indexes=!1;1===arguments.length&&arguments[0]instanceof Array&&(arguments=arguments[0]);var array=Object.create(Array.prototype);for(var method in array=Array.apply(array,arguments)||array,OGX.List.prototype)OGX.List.prototype.hasOwnProperty(method)&&(array[method]=OGX.List.prototype[method]);function addToCache(t){for(var r in indexes)indexes[r][t[r]]=t}function removeFromCache(t){for(var r in indexes)delete indexes[r][t[r]]}function dynamicSort(e,i){return function(t,r){return t[e]<r[e]?-1*i:t[e]>r[e]?i:0}}function extract(t,r,e,i){if(t.hasOwnProperty(r)){var s=t[r];switch(e){case"substr":return s=s.substr(i[0],i[1]);case"numrange":return s=Number(s),s=Array.isArray(i)?(s=Math.floor(s/i[0]),"pre"===i[2]?i[1]+s*i[0]+" - "+i[1]+(s+1)*i[0]:s*i[0]+i[1]+" - "+(s+1)*i[0]+i[1]):(s=Math.floor(s/i))*i+" - "+(s+1)*i;case"date":if(!Array.isArray(i)){if("year"===i)return s=s.substr(0,4);if("month"===i)return s=s.substr(0,7);if("week"===i)return s=s.substr(0,4)+" week "+moment(s).week()}return s=moment(s).unix(),s=Math.floor(s/(60*i[0]*60*24)),s*=60*i[0]*60*24,s=moment(1e3*s).format(i[1])+" - "+moment(1e3*s+1e3*i[0]*60*60*24).format(i[1]);default:return s}}return!1}return array.insert=function(t,r){return void 0===r?array.push(t):array.splice(r,0,t),indexes&&addToCache(t),!0},array.delete=function(t){var r=array.splice(t,1);return!!r.length&&(indexes&&removeFromCache(r[0]),r[0])},array.last=function(){if(this.length)return this[this.length-1]},array.findDelete=function(t,r,e){var i=0;void 0===e&&(e=0);for(var s=new OGX.List,a=0;a<this.length;a++)if(this[a][t]===r){if(s.push(this.splice(a,1)[0]),indexes&&removeFromCache(s.last()),i++,0<e&&e===i)return 1===e?s[0]:s;a--}return s},array.findReplace=function(t,r,e,i){var s=0;void 0===i&&(i=0);for(var a=new OGX.List,n=0;n<this.length;n++)if(this[n][t]===r&&(a.push(this[n]),s++,this[n]=e,0<i&&i===s))return 1===i?a[0]:a;return!!a.length&&a},array.findUpdate=function(t,r,e,i,s){var a=0;void 0===i&&(i=!1),void 0===s&&(s=0);for(var n,o=new OGX.List,h=0;h<this.length;h++)if(this[h][t]===r){for(var f in n=!1,e)i?this[h].hasOwnProperty(f)&&(this[h][f]=e[f],n=!0,a++):(this[h][f]=e[f],n=!0,a++);if(n&&(o.push(this[h]),0<s&&s===a))return 1===s?o[0]:o}return!!o.length&&o},array.findIndex=function(t,r){var e=!1;r instanceof RegExp&&(e=!0);for(var i=0;i<this.length;i++)if(e){if(this[i][t].match(r))return{index:i}}else if(this[i][t]===r)return{index:i};return!1},array.find=function(t,r,e){var i=0,s=new OGX.List,a=!1;r instanceof RegExp&&(a=!0),void 0===e&&(e=0);for(var n=0;n<this.length;n++)if(a?this[n][t].match(r)&&(s.push(this[n]),i++):this[n][t]===r&&(s.push(this[n]),i++),0<e&&i===e)return 1===e?s[0]:s;return!!s.length&&s},array.swap=function(t,r){var e=this[t];this[t]=this[r],this[r]=e},array.cache=function(t){(indexes=indexes||{})[t]={};for(var r=0;r<this.length;r++)indexes[t][this[r][t]]=this[r]},array.uncache=function(t){if(!indexes)return!1;delete indexes[t]},array.read=function(t,r){return!!indexes&&(arguments.length?indexes[t][r]:indexes)},array.clear=function(){indexes=!1,filterCount=0,this.length=0},array.unique=function(t,r,e){void 0===r&&(r=!0),void 0===e?e=[t]:Array.isArray(e)||(e=[e]);for(var i,s=this.get(),a=[],n=new OGX.List,o=0;o<s.length;o++)if(-1===a.indexOf(s[o][t])&&(a.push(s[o][t]),r)){i={};for(var h=0;h<e.length;h++)i[e[h]]=s[o][t];n.push(i)}return r?n:a},array.order=function(t,r){array.sort(dynamicSort(t,r))},array.group=function(t,r,e){if(Array.isArray(t))return array.groupm(t,r,e);for(var i,s={},a=0;a<this.length;a++)(i=extract(this[a],t,r,e))&&(s.hasOwnProperty(i)||(s[i]=new OGX.List),s[i].push(this[a]));return s},array.groupm=function(h,f,c){return function t(r,e){var i=new OGX.List(r),s=f,a=c;void 0!==f&&Array.isArray(f)&&(s=f[e]),void 0!==c&&Array.isArray(c)&&(a=c[e]);var n=i.group(h[e],s,a);if(e+1<=h.length-1)for(var o in n)n[o]=t(n[o],e+1);return n}(this,0)},array.filters={},array.addFilter=function(t,r,e){this.filters.hasOwnProperty(t)||(this.filters[t]=[]);var i={};return i[r]=e,this.filters[t].push(i),filterCount++,!0},array.removeFilter=function(t){return!!this.filters.hasOwnProperty(t)&&(filterCount-=this.filters[t].length,delete this.filters[t],!0)},array.getFilters=function(){return this.filters},array.resetFilters=function(){this.filters={},filterCount=0},array.setFilters=function(t){for(var r in this.resetFilters(),t)for(var e=0;e<t[r].length;e++)for(var i in t[r][e])array.addFilter(r,i,t[r][e][i])},array.setFilteringMode=function(t){filterMode=t},array.get=function(t,r,e,i){void 0===r&&(r=!1),void 0===e&&(e=!1),"number"==typeof e&&(i=e,e=!1),void 0===i&&(i=0);var s=this.getFilters();for(var a in this.resetFilters(),t)for(var n in t[a])this.addFilter(a,n,t[a][n]);var o=this.filter(i);if(this.resetFilters(),this.setFilters(s),r)for(var a in r){o.order(a,r[a]);break}return e?o.group.apply(null,e):o},array.filter=function(__limit){void 0===__limit&&(__limit=0);for(var ar=[],isDate,isString,isArray,fnc,hasFilters=!1,reg=/[0-9]{4}\-[0-9]{2}\-[0-9]{2}( [0-9]{2}\:[0-9]{2}\:[0-9]{2})?/g,isMatch=!1,matches=0,str,o,err,i=0;i<this.length;i++)for(var a in isMatch=!0,matches=0,this.filters){err=!1;try{o=null,str="this["+i+"]."+a,o=eval(str)}catch(t){err=!0}if(err||void 0===o)isMatch=!1;else{hasFilters=!0,isDate=!1,isString=!1,isArray=Array.isArray(o),isArray?"string"==typeof o[0]&&(isString=!0,o[0].match(reg)&&(isDate=!0)):"string"==typeof o&&(isString=!0,o.match(reg)&&(isDate=!0));for(var j=0;j<this.filters[a].length;j++)for(var b in this.filters[a][j]){if(String(this.filters[a][j][b]).length)if("function"===b)isMatch=this.filters[a][j][b](o),isMatch&&matches++;else switch(b){case"eq":isDate?moment(o).format("YYYY-MM-DD")!==moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()!==String(this.filters[a][j][b]).toLowerCase()?isMatch=!1:matches++:o!==this.filters[a][j][b]?isMatch=!1:matches++;break;case"eqjson":JSON.stringify(o)!==JSON.stringify(this.filters[a][j][b])?isMatch=!1:matches++;break;case"neq":isDate?moment(o).format("YYYY-MM-DD")===moment(this.filters[a][j][b]).format("YYYY-MM-DD")?isMatch=!1:matches++:isString?o.toLowerCase()===this.filters[a][j][b].toLowerCase()?isMatch=!1:matches++:o===this.filters[a][j][b]?isMatch=!1:matches++;break;case"in":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1===o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else isString?isArray?-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++:-1===o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++:-1===o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;break;case"nin":if(Array.isArray(this.filters[a][j][b])){for(var k=0;k<this.filters[a][j][b].length;k++)if(-1!==o.indexOf(this.filters[a][j][b][k])){isMatch=!1;break}isMatch&&matches++}else isString?-1!==o.toLowerCase().indexOf(this.filters[a][j][b].toLowerCase())?isMatch=!1:matches++:-1!==o.indexOf(this.filters[a][j][b])?isMatch=!1:matches++;break;case"gt":isDate?moment(o).unix()<=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<=this.filters[a][j][b]?isMatch=!1:matches++;break;case"gte":isDate?moment(o).unix()<moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o<this.filters[a][j][b]?isMatch=!1:matches++;break;case"lt":isDate?moment(o).unix()>=moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>=this.filters[a][j][b]?isMatch=!1:matches++;break;case"lte":isDate?moment(o).unix()>moment(this.filters[a][j][b]).unix()?isMatch=!1:matches++:o>this.filters[a][j][b]?isMatch=!0:matches++;break;case"btw":isDate?moment(this.filters[a][j][b][0]).unix()>moment(o).unix()||moment(this.filters[a][j][b][1]).unix()<moment(o).unix()?isMatch=!1:matches++:this.filters[a][j][b][0]>o||this.filters[a][j][b][1]<o?isMatch=!1:matches++;break;case"substr":o.toLowerCase().substr(this.filters[a][j][b][0],this.filters[a][j][b][1]).toLowerCase()!==this.filters[a][j][b][2].toLowerCase()?isMatch=!1:matches++;break;case"regex":o.toString().match(this.filters[a][j][b])?matches++:isMatch=!1}else matches++;if(!isMatch)break}}if("or"===filteringMode?isMatch&&ar.push(this[i]):matches===filterCount&&ar.push(this[i]),__limit&&ar.length===__limit)return OGX.List.apply(null,ar)}return hasFilters?OGX.List.apply(null,ar):array},array},OGX.Object=function(){"use strict";var n=new OGX.List;function o(t){for(var r=t.split("."),e=OGX,i=0;i<r.length;i++)void 0!==e[r[i]]&&(e=e[r[i]]);return e}this.isRegistered=function(t,r){return typeof("undefined"!==this.register[t][r])},this.getExtend=function(t){var r=n.get({main:{eq:t}},null,1);return!!r.length&&r[0].extends},this.getExtends=function(t){var r=[],e=n.get({main:{eq:t}},null,1);if(e.length){var i;r=r.concat(e[0].extends);for(var s=0;s<e[0].extends.length;s++)(i=this.getExtends(e[0].extends[s]))&&(r=r.concat(i))}var a=[];for(s=0;s<r.length;s++)-1===a.indexOf(r[s])&&a.push(r[s]);return a},this.register=function(){var t=Array.prototype.slice.call(arguments),r=t.shift();n.push({main:r,extends:t})},this.create=function(t,r){void 0===r&&(r={});var e=this.getExtends(t);if(e.length){var i=o(t);i.prototype=Object.create({});var s,a=[];a.push(i.prototype);for(var n=0;n<e.length;n++)void 0!==(s=o(e[n]))&&a.push(s.prototype);return Object.assign.apply(null,a),new(i.prototype.constructor=i)(r)}return!!OGX.hasOwnProperty(t)&&new OGX[t](r)}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])}return r},writable:!0,configurable:!0});function require(){OGX.Object.register.apply(null,arguments)}function construct(__that,__cls){var ext=OGX.Object.getExtend(__cls);for(var a in ext)eval("OGX."+ext[a]).call(__that,arguments.callee.caller.arguments[0])}OGX.Object=new OGX.Object;if(OGX.OML=function(){"use strict";function createRecursive(e,o,O,w,v){var n=(new Date).getTime();!function e(o,n){if(Array.isArray(o))for(var t=0;t<o.length;t++)e(o[t],n);else{var i,a,s,r,d,c,p,l,u,f,h,g;if(!v)for(l in o)-1!==l.indexOf(":Point")&&(o[l].container=l.split(":")[0],o[l].data=O,o[l].route_data=w,e((p=n.create("Point",o[l])).oml(),p),delete o[l]);for(l in o)if(i=l.split(":")[0],a=s=l.split(":")[1],-1===["Route","OML"].indexOf(a)){switch(0<s.indexOf(".")&&(s=s.substr(0,s.indexOf(".")-1)),c=o[l],r=d=!0,s){case"Fork":if("scope"===i){if(!(g=OGX.Scope.match(o[l])))return!1;e(g.node,n)}else(g=getForkChild(o[l]))&&e(g,u);d=r=!1;break;case"Html":c.container=i,c.html=o[l].html,(r=isRequired(c))||(c.template=!1);break;case"Template":c.template=a.split(".")[1],c.container=i,a="Html",r=isRequired(c);break;case"Ghost":c.container=i;break;case"Controller":c.id=i;break;default:-1!==[".","#"].indexOf(i.substr(0,1))?c.container=i:(c.id=i,c.container=n.el[0],c.parent=n)}d&&(w&&Object.keys(w).length&&(c=convertRouteData(c,w)),c=convertData(c)),f=u=!1,r?(v&&(h=v.find("id",c.id,1))&&(f=!0),p=f?(h.wake(c.container),h):OGX.Object.create(a,c),n.add(p),u=p):(u=n,"Html"===a&&OGX.HtmlRender(c)),u&&o[l].hasOwnProperty("node:OML")&&e(o[l]["node:OML"],u),r&&"function"==typeof p.construct&&(f||p.construct.apply(p,[O,w])),(r||f)&&(n.blured||p.focus())}}}(o,e),OGX.OML.rendertime&&console.log("%c ⏱ OML RENDER TIME "+((new Date).getTime()-n)+"ms ","background:#222; color:#DDD; padding:8px 3px 8px 3px;")}function isRequired(e){return e.hasOwnProperty("instance")&&e.instance||e.hasOwnProperty("scroll")&&e.scroll}function getForkChild(__prop,__node){if(0===__prop.indexOf("#")&&(__prop=eval(__prop.substr(1))),__prop)for(var val in __node)if(-1!==__prop.indexOf(val))return __node[val];return!1}function convertRouteData(e,o){var n;e=e;for(var t in e)-1!==t.indexOf(":Route.Data")&&(n=t.split(":")[0],"string"==typeof e[t]?e[n+":Data"]=OGX.Templater.templatize(o,e[t]):"boolean"==typeof e[t]&&e[t]&&(e[n]=o),delete e[t]);return e}function convertData(e){for(var o in e)-1!==o.indexOf(":Data")&&(e[o.split(":").shift()]=convert(e[o]),delete e[o]);return e}function convert(__data){return"string"==typeof __data&&(0===__data.indexOf("#")?__data=eval(__data.substr(1)):-1!==__data.indexOf(".json")&&(__data=app.getJSON(__data))),__data}this.rendertime=!0,this.make=function(e,o,n){var t={};return t[e+":"+o]=n,t},this.parse=function(e){return"string"==typeof e&&("{"!==e.substr(0,1)&&(e="{"+e+"}"),e=JSON.parse(e)),e},this.replaceNodeName=function(e,o,n){var t={};for(var i in void 0===n&&(n="default"),e){t[i.replace(n,o)]=e[i];break}return e=t},this.render=function(e,o,n,t,i){void 0!==t&&(t=convert(t)),void 0!==n&&(n=convert(n)),void 0===i&&(i=!1),createRecursive(e,o,n,t,i),e.blured||e.focusNodes()}},OGX.OML=new OGX.OML,void 0===OGX)var OGX={};OGX.Stages={},OGX.Views={},OGX.Controllers={},require("Core","Uxi","Touch"),OGX.Core=function(){construct(this,"Core");var that=this,config,config_default={scope:["public"],routing:{routes:{},options:{history:!0,bookmark:!0},errors:{403:!1,404:!1}},stages:{blured:!0,use:!1,closeable:!1},overlays:{delay:200,anim:"OGX.Overlay.FADE"},popups:{blured:!1,sleeping:!1},theater:!1,observe:!1,auto_exit:!1,chromeos:!1,rendertime:!1},stage=!1,shown=!1,isWebView=!1,isIos=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),to_preload=0,preloaded=0,jsons={},url=!1;function handleScope(e,o){var n=e.join(" ");$("body").removeClass(n).addClass(o.join(" "))}function onPopupHidden(e){app.remove(OGX.Popup.NAME,e)}function initTheater(){for(var e=app.gather(OGX.Stage.NAME),o=[],n=0;n<e.length;n++)e[n].theater&&o.push(e[n]);config.theater.stages=o,config.theater.container="body",that.theater=that.create("Theater",config.theater)}function listenTheme(e){if(e){var o=window.matchMedia("(prefers-color-scheme: dark)");o.addListener(onThemeChange)}else o.removeListener(onThemeChange)}function onThemeChange(e){var o=e.matches;console.log("Dark mode is",o)}function listenResize(e){e?window.addEventListener("resize",onResize):window.removeEventListener("resize",onResize)}function onResize(){var e=stage.gather("");for(a in e)e[a]._NAME_!==OGX.Controller.NAME&&(-1===[OGX.Popup.NAME,OGX.Window.NAME].indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].resizeNodes()):-1!==OGX.Popup.NAME.indexOf(e[a]._NAME_)?e[a].sleeping||(e[a].resize(),e[a].centered&&e[a].center(),e[a].resizeNodes()):-1!==OGX.Window.NAME.indexOf(e[a]._NAME_)&&(e[a].sleeping||(e[a].resize(),e[a].resizeNodes())))}function initStages(){var e,o,n,t,i,a,s=!1;for(var r in config.vapps)o=(e=r.split(":"))[0],n=e[1],(i=OGX.Data.merge(config.vapps[r],config.stages,!1,!0)).id=o,!0===i.use&&(t=(s=o)+"/"+i.home),that.addStage(n,i);s&&(that.useStage(s),a=config.bookmark&&-1!==window.location.href.indexOf("#")?window.location.href.split("#").pop():t,setTimeout(function(){that.goto(a)},0),setTimeout(function(){$(document).trigger(OGX.App.READY)},100))}function initPreload(){config.hasOwnProperty("templates")&&(to_preload++,setTimeout(function(){preloadTemplates()},0)),config.hasOwnProperty("preload")&&(config.preload.hasOwnProperty("images")&&(to_preload++,setTimeout(function(){OGX.Net.loadImages(config.preload.images.path,config.preload.images.files,onPreloaded)},0)),config.preload.hasOwnProperty("sounds")&&(to_preload++,setTimeout(function(){OGX.Net.loadSounds(config.preload.sounds.path,config.preload.sounds.files,onPreloaded,"sounds")},0)),config.preload.hasOwnProperty("fonts")&&(to_preload++,setTimeout(function(){OGX.Net.loadFonts(config.preload.fonts,onPreloaded)},0)),config.preload.hasOwnProperty("json")&&(to_preload++,setTimeout(function(){OGX.Net.loadJSON(config.preload.json.path,config.preload.json.files,onPreloaded,"json")},0))),0===to_preload&&appReady()}function preloadTemplates(){var e=[],o=config.templates.path;for(var n in config.templates.files)e.push({name:n,file:o+config.templates.files[n]});OGX.Templater.loadTemplates(e,onPreloaded)}function onPreloaded(e,o){if(preloaded++,void 0!==o)switch(o){case"sounds":OGX.Audio.setSounds(e);break;case"json":jsons=e}$(document).trigger(OGX.App.LOADING,{total:to_preload,loaded:preloaded}),preloaded===to_preload&&(config.routing&&(that.router=new OGX.Router(config.routing),that.router.start()),appReady())}function appReady(){initStages(),handleScope([""],OGX.Data.clone(config.scope)),config.theater&&initTheater()}function initDefaults(){isWebView=void 0!==window.ontouchstart,isIos&&$("body").addClass("ios"),config=OGX.Data.weld(config,config_default,!1,!1),"string"==typeof config.windows.style&&(config.windows.style=eval(config.windows.style)),"string"==typeof config.windows.anim&&(config.popups.anim=eval(config.popups.anim)),"string"==typeof config.overlays.anim&&(config.overlays.anim=eval(config.overlays.anim)),that.el=$(document),OGX.OML.rendertime=config.rendertime}function checkModules(){return!0}function init(e){console.log("%c OGX.JS💞OML ","background:#222; color:#DDD; padding:8px 3px 8px 3px;"),config=e["app.json"],initDefaults(),initPreload(),listenResize(!0),listenTheme(!0)}this._NAME_=OGX.App.NAME,this.router=!1,this.isWebView=function(){return isWebView},this.isTouch=function(){return this.touch.touchable()},this.url=function(){return url},this.scope=function(e){return void 0!==e&&Array.isArray(e)?(handleScope(OGX.Data.clone(config.scope),OGX.Data.clone(e)),OGX.Scope.scope=e,!0):OGX.Scope.scope},this.addStage=function(e,o){OGX.Data.merge(o,config.stages),o.container="body";var n=OGX.Object.create(e,o);return this.add(n),setTimeout(function(){n.construct(o),o.use?(n.el.css("display","block"),n.focus(),shown=n):n.sleep()},0),n},this.removeStage=function(e){var o=this.find(!1,e);o&&(o.destroy(),o.kill(),this.find(!1,e,"remove"))},this.useStage=function(e){var o=this.find(!1,e);o&&(stage=o)},this.getStage=function(e){if(void 0===e)return stage;var o=this.find(!1,e);return o||!1},this.showStage=function(e,o){void 0===o&&(o=!1);var n=this.find(OGX.Stage.NAME,e);if(n){if(o){var t=$(window).height();switch(o){case OGX.App.ANIM_SWAP:shown&&(shown.el.on("transitionend",function(){shown.el.off("transitionend"),shown.el.css("top",-t+"px"),n.el.css("top","0px"),n.el.on("transitionend",function(){n.el.off("transitionend"),n.el.css("transform","scale(1)"),shown.el.removeClass("ogx_stage_anim"),shown.el.css("display","none"),that.el.trigger(OGX.App.STAGE_CHANGED,{old:shown,new:n}),shown=n})}),n.el.addClass("ogx_stage_anim"),shown.el.addClass("ogx_stage_anim"),shown.el.css("transform","scale(0.9)")),n.el.css("top",t+"px"),n.el.css("display","block"),n.el.css("transform","scale(0.9)"),n.el.addClass("ogx_stage_anim");break;case OGX.App.ANIM_FLIP:n.el.appendTo("body"),n.el.addClass("ogx_stage_anim_swap"),shown&&(shown.el.addClass("ogx_stage_anim"),shown.el.addClass("ogx_stage_anim_flip"))}}else shown&&shown.id!==n.id&&shown.sleep(),n.sleeping&&n.wake(),n.el.css("display","block"),shown=n;that.useStage(e)}},this.getWindow=function(e){return this.find(OGX.Window.NAME,e)},this.getWindows=function(e){return this.gather(OGX.Window.NAME)},this.windowExists=function(e){return!1!==this.find(OGX.Window.NAME,e)},this.addWindow=function(e,o){if(void 0===o){if(!shown)return!1;o=shown}var n;return!!o&&(e.container=o.el,e.parent=o,e.hasOwnProperty("node:OML")?(n=OGX.Object.create(OGX.Window.NAME,e),o.add(n),n.focus(),OGX.OML.render(n,e["node:OML"])):n=o.create(OGX.Window.NAME,e),n)},this.windowOpen=function(e){return this.find(OGX.Window.NAME,e).status===OGX.Window.OPEN},this.showWindow=function(e,o){var n={anim:OGX.Window.ANIM_NONE,params:!1,fade:!1};o=void 0===o?OGX.Data.clone(n):OGX.Data.weld(n,o,!0);var t=this.find(OGX.Window.NAME,e);return!!t&&(t.sleeping&&attachWindow(e),t.blured&&t.focus(),t.show(),!0)},this.hideWindow=function(e,o){"string"!=typeof e&&(e=this.findWindow(e).id);var n={anim:!1,cb:!1};o=void 0===o?OGX.Data.clone(n):OGX.Data.merge(o,n,!1),this.find(OGX.Window.NAME,e).hide()},this.swapWindows=function(e,o){var n,t,i,a;return!(!this.windowExists(e)||!this.windowExists(o))&&(n=this.getWindow(e),t=this.getWindow(o),i=n.el.css("z-index"),a=t.el.css("z-index"),n.el.css("z-index",a),t.el.css("z-index",i),!0)},this.sleepWindow=function(e){this.find(OGX.Window.NAME,e).sleep()},this.blurWindow=function(e){this.find(OGX.Window.NAME,e).blur()},this.focusWindow=function(e){this.find(OGX.Window.NAME,e).focus()},this.removeWindow=function(e){return this.find(OGX.Window.NAME,e,"remove")},this.removeWindows=function(e){for(var o in e)this.removeWindow(o);return!0},this.removeAllWindows=function(e){void 0===e&&(e=[]);var o=this.gather(OGX.Window.NAME);for(var n in o)-1!==e.indexOf(n.id)&&this.removeWindow(n.id)},this.addToWindow=function(e,o,n){n.hasOwnProperty("container")||(n.container='.ogx_window[data-ogx-id="'+e+'"] > .ogx_window_body');var t=app.find(OGX.Window.NAME,e);if(t)return t.create(o,n)},this.findWindow=function(e){var o=e.el.parents(".ogx_window");if(o.length){var n=$(o[0]).data("ogx-id");return this.find(OGX.Window.NAME,n)}return!1},this.addPopup=function(e,o){var n;return void 0===o&&(o=stage),e.container=o.el[0],e.parent=o,e.chromeos=config.chromeos,e.hasOwnProperty("node:OML")?(n=OGX.Object.create(OGX.Popup.NAME,e),o.add(n),n.focus(),OGX.OML.render(n,e["node:OML"])):n=o.create(OGX.Popup.NAME,e),setTimeout(function(){n.show()},0),n},this.addToPopup=function(e,o){o.hasOwnProperty("container")||(o.container='.ogx_popup[data-ogx-id="'+e+'"] > .ogx_popup_body');var n=app.find(OGX.Popup.NAME,e);return!!n&&n.create(__class,o)},this.removePopup=function(e,o,n){if(void 0===o&&(o={}),void 0===n&&(n=shown),n){OGX.Data.merge(o,{anim:!1,callback:!1});var t=n.find(OGX.Popup.NAME,e);if(t)return t.hide(o.anim,o.callback,e,onPopupHidden),!0}return!1},this.removeFromPopup=function(e,o){var n=this.find(OGX.Popup.NAME,e);return!!n&&n.find("view",o,"remove")},this.getPopup=function(e){return this.find(OGX.Popup.NAME,e)},this.getVisiblePopups=function(){var e=this.gather(OGX.Popup.NAME),o=[];for(var n in e)"visible"===e[n].el.css("visibility")&&o.push(e[n]);return o},this.getPopupView=function(e,o){return this.find(OGX.Popup.NAME,e).find(OGX.View.NAME,o)},this.getPopupViews=function(e){return this.find(OGX.Popup.NAME,e).views},this.popupExists=function(e){return!1!==this.find(OGX.Popup.NAME,e)},this.addOverlay=function(e,o){void 0===o&&(o=shown),o&&o.addOverlay(e)},this.removeOverlay=function(e,o){void 0===o&&(o=shown),o&&o.removeOverlay(e)},this.theater=!1,this.getJSON=function(e){return!!jsons.hasOwnProperty(e)&&jsons[e]},this.goto=function(e,o){return void 0===o&&(o={}),o=OGX.Data.merge(o,{history:!0,data:null},!1),this.router.goto(e,o)},checkModules()&&OGX.Net.loadJSON("","app.json",init)},OGX.App=function(e){"use strict";return OGX.Object.create("Core",e)},OGX.App.NAME="App",OGX.App.LOADING="AppLoading",OGX.App.READY="AppReady";if(OGX.Audio=function(){"use strict";var e={},n=!1;this.setSounds=function(t){e=t},this.getSound=function(t){return!!e.hasOwnProperty(t)&&e[t].cloneNode()},this.playSound=function(t,e){void 0===e&&(e=1);var i=this.getSound(t);i&&((i=i.cloneNode()).volume=e,n?i.play().catch(function(){}):setTimeout(function(){i.play().catch(function(){})},0))},$(document).on("touchstart mousedown",function t(){n=!0,$(document).off("touchstart mousedown",t)})},OGX.Audio=new OGX.Audio,require("Calendar","Uxi","Touch"),OGX.Calendar=function(t){construct(this,"Calendar");var i,n,e,l,o=this,c=t,a={display_date:moment(),date:!1,format:"YYYY-MM-DD",layouts:[{layout:"MONTH_DAYS",engine:"DAY_NUMBER",config:!1}],layout:0,selectable:!0,swipable:!0,chromeos:!1},d=[],r={x:1,y:1};function s(t){t?n.on("click",".ogx_calendar_layout_item",u):n.off("click",".ogx_calendar_layout_item",u)}function u(t){var e=$(this);e.hasClass("ogx_calendar_selected_item")?(e.removeClass("ogx_calendar_selected_item"),o.el.trigger(OGX.Calendar.UNSELECT,c.date),c.date=null):(e.parent().find(".ogx_calendar_selected_item:first").removeClass("ogx_calendar_selected_item"),e.addClass("ogx_calendar_selected_item"),c.date=moment(e.data("ogx-date")),c.display_date=c.date.clone(),o.el.trigger(OGX.Calendar.SELECT,c.date),p()),setTimeout(_,0)}function _(){for(var t=i.getCells(),e=0;e<t.length;e++)0==t[e].offset.x&&0==t[e].offset.y||m(t[e].abs,t[e].rel,t[e].offset,$(t[e].element).children(0)[0])}function h(t){t?(n.on(OGX.GridSwiper.SWIPE_LEFT,function(t,e){var i=d[l].value();f(i.value,i.unit),g(d[l].labels(c.display_date))}),n.on(OGX.GridSwiper.SWIPE_RIGHT,function(t,e){var i=d[l].value();f(-1*i.value,i.unit),g(d[l].labels(c.display_date))}),n.on(OGX.GridSwiper.SWIPE_UP,function(t,e){l=e.cell.y-1,p(),g(d[l].labels(c.display_date))}),n.on(OGX.GridSwiper.SWIPE_DOWN,function(t,e){l=e.cell.y-1,p(),g(d[l].labels(c.display_date))})):(n.off(OGX.GridSwiper.SWIPE_LEFT),n.off(OGX.GridSwiper.SWIPE_RIGHT),n.off(OGX.GridSwiper.SWIPE_UP),n.off(OGX.GridSwiper.SWIPE_DOWN))}function f(t,e){c.display_date.add(t,e),p()}function p(){var t=d[l].format(c.display_date),e='<span class="ogx_calendar_display_date">'+c.display_date.format(t)+"</span>";c.date&&(e+='<span class="ogx_calendar_selected_date">'+c.date.format(c.format)+"</span>"),n.children(".ogx_calendar_head:first").children(".ogx_calendar_head_date:first").html(e)}function g(t){n.children(".ogx_calendar_head:first").children(".ogx_calendar_head_labels:first").html(t)}function m(t,e,i,n){if(0<=e.y-1&&e.y-1<c.layouts.length){var o=$(n),a=d[l].value(),r=c.display_date.clone().add(i.x*a.value,a.unit),s=d[e.y-1].html(r,OGX.CalendarEngine[c.layouts[e.y-1].engine],c.layouts[e.y-1].config,c.date);o.html(s)}}function y(t,e){return OGX.CalendarLayout[t].prototype=Object.create(OGX.CalendarLayout.BASE_LAYOUT.prototype),OGX.CalendarLayout[t].prototype.constructor=OGX.CalendarLayout[t],new OGX.CalendarLayout[t](e)}this._NAME_=OGX.Calendar.NAME,this.el=null,this.val=function(t){return void 0!==t&&(c.date=t,moment().isMoment(c.date)||(c.date=moment(c.date)),c.display_date=c.date.clone(),p(),setTimeout(_,0)),c.date},this.display=function(t){return void 0!==t&&(c.display_date=t,moment().isMoment(c.display_date)||(c.display_date=moment(c.display_date)),p(),setTimeout(_,0)),c.display_date},this.axis=function(t,e){c.axis.x=t,c.axis.y=e},this.next=function(){c.layouts.length},this.prev=function(){},this.getLayout=function(){return l},this.destroy=function(){c.selectable&&s(!1),h(!1),i.destroy()},function(){for(var t in a)c.hasOwnProperty(t)||(c[t]=a[t]);o.el=n=$(c.container),n.addClass("ogx_calendar"),c.display_date?moment.isMoment(c.display_date)||(c.display_date=moment(c.display_date)):c.display_date=moment(),l=c.layout,r.y=l+1}(),n.html('<div class="ogx_calendar_head"><div class="ogx_calendar_head_date"></div><div class="ogx_calendar_head_labels"></div></div><div class="ogx_calendar_body"></div>'),function(){e=[[!1,!1,!1]];for(var t=0;t<c.layouts.length;t++)e.push([m,m,m]);e.push([!1,!1,!1])}(),function(){for(var t=0;t<c.layouts.length;t++)d.push(y(c.layouts[t].layout,{}))}(),i=o.create("GridSwiper",{container:c.container+" .ogx_calendar_body:first",loop:!0,map:e,start:{x:1,y:1},chromeos:c.chromeos}),p(),g(d[l].labels(c.display_date)),h(!0),c.selectable&&s(!0)},OGX.Calendar.NAME="Calendar",OGX.Calendar.SELECT="CalendarSelect",OGX.Calendar.UNSELECT="CalendarUnselect",OGX.CalendarLayout={},OGX.CalendarLayout.BASE_LAYOUT=function(){"use strict";this.labels=function(t){return""},this.html=function(t,e,i,n){return""},this.value=function(){return{value:1,unit:"months"}},this.format=function(){return"YYYY-MM"}},OGX.CalendarLayout.MONTH_DAYS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(){for(var t="",e=function(){for(var t=new Date(Date.UTC(2017,0,2)),e=[],i=0;i<7;i++)e.push(t.toLocaleDateString(navigator.language,{weekday:"short"})),t.setDate(t.getDate()+1);return e}(),i=0;i<e.length;i++)t+='<span class="ogx_calendar_layout_month_days_label">'+e[i]+"</span>";return t},this.html=function(t,e,i,n){var o,a=t.format("MM"),r=moment(t.format("YYYY-MM-")+"01").day(),s=moment(t.format("YYYY-MM-")+"01").subtract(r,"days"),l="";n&&(l=n.format("YYYY-MM-DD"));for(var c,d="",u=0;u<42;u++)c="",o=s.format("YYYY-MM-DD"),s.format("MM")!==a&&(c+="ogx_calendar_layout_month_days_offset "),o===moment().format("YYYY-MM-DD")&&(c+="ogx_calendar_layout_month_days_today "),n&&l===o&&(c+="ogx_calendar_selected_item "),d+='<div class="ogx_calendar_layout_item ogx_calendar_layout_month_days '+c+'" data-ogx-date="'+o+'">'+e(o,i)+"</div>",s.add(1,"days");return d},this.value=function(){return{value:1,unit:"months"}},this.format=function(){return"YYYY-MM"}},OGX.CalendarLayout.CENTURY_DECADES=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_century_decades_label">'+100*Math.floor(Number(t.format("YYYY"))/100)+"'s</span>"},this.html=function(t,e,i,n){var o,a,r=moment(),s=100*Math.floor(Number(r.format("YYYY"))/100),l=10*Math.floor(Number(r.format("YYYY").substr(2))/10),c=100*Math.floor(Number(t.format("YYYY"))/100),d=0,u=0;n&&(d=100*Math.floor(Number(n.format("YYYY"))/100),u=10*Math.floor(Number(n.format("YYYY").substr(2))/10));for(var _="",h=0;h<10;h++)a="",s+l==c+(o=10*h)&&(a="ogx_calendar_layout_century_decades_current "),d+u===c+o&&(a+="ogx_calendar_selected_item "),_+='<div class="ogx_calendar_layout_item ogx_calendar_layout_century_decades '+a+'" data-ogx-date="'+(c+o)+'-01-01">'+e(c+o,i)+"</div>";return _},this.value=function(){return{value:100,unit:"years"}},this.format=function(){return"YYYY"}},OGX.CalendarLayout.CENTURY_YEARS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_century_decades_label">'+100*Math.floor(Number(t.format("YYYY"))/100)+"'s</span>"},this.html=function(t,e,i,n){var o,a=moment(),r=100*Math.floor(Number(a.format("YYYY"))/100),s=Number(a.format("YYYY").substr(2)),l=100*Math.floor(Number(t.format("YYYY"))/100),c=0,d=0;n&&(c=100*Math.floor(Number(n.format("YYYY"))/100),d=Math.floor(Number(n.format("YYYY").substr(2))));for(var u="",_=0;_<100;_++)o="",l+_===r+s&&(o+="ogx_calendar_layout_century_years_current "),l+_===c+d&&(o+="ogx_calendar_selected_item"),u+='<div class="ogx_calendar_layout_item ogx_calendar_layout_century_years '+o+'" data-ogx-date="'+(l+_)+'-01-01">'+e(l+_+"-01-01",i)+"</div>";return u},this.value=function(){return{value:100,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.DECADE_YEARS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_century_years_label">'+10*Math.floor(Number(t.format("YYYY"))/10)+"'s</span>"},this.html=function(t,e,i,n){var o,a=10*Math.floor(Number(t.format("YYYY"))/10),r="",s=Number(moment().format("YYYY")),l="";n&&(l=Number(n.format("YYYY")));for(var c=0;c<10;c++)o="",a+c===s&&(o+="ogx_calendar_layout_decade_years_current "),a+c===l&&(o+="ogx_calendar_selected_item "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_decade_years '+o+'" data-ogx-date="'+(a+c)+'-01-01">'+e(a+c+"-01-01",i)+"</div>";return r},this.value=function(){return{value:10,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.DECADE_MONTHS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){for(var e=10*Math.floor(Number(t.format("YYYY"))/10),i=Number(String(e).substr(2,2)),n="",o=0;o<10;o++)n+='<span class="ogx_calendar_layout_decade_months_label">\''+i+"</span>",i++;return n},this.html=function(t,e,i,n){var o,a,r,s,l=10*Math.floor(Number(t.format("YYYY"))/10),c="",d=moment().format("YYYY-MM");n&&(o=n.format("YYYY-MM"));for(var u=0;u<12;u++){s=u+1;for(var _=0;_<10;_++)a="",(r=l+_+"-"+(s<10?"0"+s:s))===d&&(a="ogx_calendar_layout_decade_months_current "),r===o&&(a+="ogx_calendar_selected_item "),c+='<div class="ogx_calendar_layout_item ogx_calendar_layout_decade_months '+a+'" data-ogx-date="'+r+'-01">'+e(moment(r+"-01"),i)+"</div>"}return c},this.value=function(){return{value:10,unit:"years"}},this.format=function(t){return"["+10*Math.floor(Number(t.format("YYYY"))/10)+"'s]"}},OGX.CalendarLayout.YEAR_MONTHS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_year_months_label">Months</span>'},this.html=function(t,e,i,n){var o,a,r=moment().format("YYYY-MM"),s=t.format("YYYY"),l="",c="";n&&(c=n.format("YYYY-MM"));for(var d=1;d<13;d++)o="",s+"-"+(a=d<10?"0"+d:d)===r&&(o+="ogx_calendar_layout_year_months_current "),s+"-"+a===c&&(o+="ogx_calendar_selected_item "),l+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_months '+o+'" data-ogx-date="'+s+"-"+a+'-01">'+e(s+"-"+a+"-01",i)+"</div>";return l},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.YEAR_WEEKS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_year_weeks_label">Weeks</span>'},this.html=function(t,e,i,n){var o=moment().week(),a=t.format("YYYY"),r=moment().format("YYYY"),s="",l="";n&&(l=n.week(),s=n.format("YYYY"));for(var c,d,u="",_=1;_<53;_++)c="",o===_&&a===r&&(c="ogx_calendar_layout_year_weeks_current "),l===_&&a===s&&(c+="ogx_calendar_selected_item "),u+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_weeks '+c+'" data-ogx-date="'+(d=moment().year(a).week(_).format("YYYY-MM-DD"))+'">'+e(d,i)+"</div>";return u},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.YEAR_DAYS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_year_weeks_label">Nth Day</span>'},this.html=function(t,e,i,n){var o,a,r,s="",l=t.format("YYYY-MM-DD"),c=moment(t.format("YYYY")+"-01-01"),d="";n&&(d=n.format("YYYY-MM-DD")),a=t.isLeapYear()?366:365;for(var u=0;u<a;u++)o="",(r=c.format("YYYY-MM-DD"))===l&&(o="ogx_calendar_layout_year_days_current "),r===d&&(o+="ogx_calendar_selected_item "),s+='<div class="ogx_calendar_layout_item ogx_calendar_layout_year_days '+o+'" data-ogx-date="'+r+'">'+e(moment(r),i)+"</div>",c.add(1,"days");return s},this.value=function(){return{value:1,unit:"years"}},this.format=function(){return"Y"}},OGX.CalendarLayout.MONTH_WEEKS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_year_weeks_label">Nth Week</span>'},this.html=function(t,e,i,n){var o,a="",r=moment(),s=Number(r.format("YYYY")),l=Number(r.format("w")),c=Number(t.format("YYYY")),d=0,u=0;n&&(d=Number(n.format("YYYY")),u=Number(n.format("w")));a="";for(var _=moment(t.format("YYYY-MM-[01]")),h=0;h<5;h++)css="",o=Number(_.format("w")),c===d&&o===u&&(css+="ogx_calendar_selected_item "),c===s&&o===l&&(css+="ogx_calendar_layout_month_weeks_current"),a+='<div class="ogx_calendar_layout_item ogx_calendar_layout_month_weeks '+css+'" data-ogx-date="'+_.format("YYYY-MM-DD")+'">'+e(_.clone(),i)+"</div>",_.add(7,"days");return a},this.value=function(){return{value:1,unit:"months"}},this.format=function(){return"[(]YYYY-MM[)] W"}},OGX.CalendarLayout.WEEK_DAYS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){for(var e="",i=function(){for(var t=new Date(Date.UTC(2017,0,2)),e=[],i=0;i<7;i++)e.push(t.toLocaleDateString(navigator.language,{weekday:"short"})),t.setDate(t.getDate()+1);return e}(),n=0;n<i.length;n++)e+='<span class="ogx_calendar_layout_month_days_label">'+i[n]+"</span>";return e},this.html=function(t,e,i,n){var o,a,r="",s=t.weekday(),l=t.subtract(s,"days"),c=moment().format("YYYY-MM-DD"),d="";n&&(d=n.format("YYYY-MM-DD"));for(var u=0;u<7;u++)o="",(a=l.format("YYYY-MM-DD"))===c&&(o="ogx_calendar_layout_week_days_current "),a===d&&(o+="ogx_calendar_selected_item "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_week_days '+o+'" data-ogx-date="'+a+'">'+e(moment(a),i)+"</div>",l.add(1,"days");return r},this.value=function(){return{value:1,unit:"weeks"}},this.format=function(){return"YYYY-MM"}},OGX.CalendarLayout.DAY_HOURS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_day_hours_label">Hours</span>'},this.html=function(t,e,i,n){var o,a,r="",s=Number(moment().format("HH")),l=t.format("YYYY-MM-DD "),c=moment().format("YYYY-MM-DD "),d="",u="";n&&(d=Number(n.format("HH")),u=n.format("YYYY-MM-DD "));for(var _=0;_<24;_++)a="",_===s&&l===c&&(a="ogx_calendar_layout_days_hours_current "),_===d&&l===u&&(a+="ogx_calendar_selected_item "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_days_hours '+a+'" data-ogx-date="'+(l+(o=_<10?"0"+_:String(_)))+':00">'+e(moment(l+o+":00"),i)+"</div>";return r},this.value=function(){return{value:1,unit:"days"}},this.format=function(){return"YYYY-MM-DD HH:[00]"}},OGX.CalendarLayout.DAY_WORK_HOURS=function(){"use strict";OGX.CalendarLayout.BASE_LAYOUT.call(this),this.labels=function(t){return'<span class="ogx_calendar_layout_day_work_hours_label">Work Hours</span>'},this.html=function(t,e,i,n){i&&void 0!==i?i.hasOwnProperty("start")||(i.start=8,i.end=17):i={start:8,end:17};var o,a,r="",s=Number(moment().format("HH")),l=t.format("YYYY-MM-DD "),c=moment().format("YYYY-MM-DD "),d="",u="";n&&(d=Number(n.format("HH")),u=n.format("YYYY-MM-DD "));for(var _=i.start;_<i.end+1;_++)a="",_===s&&l===c&&(a="ogx_calendar_layout_days_work_hours_current "),_===d&&u===l&&(a+="ogx_calendar_selected_item "),r+='<div class="ogx_calendar_layout_item ogx_calendar_layout_days_work_hours '+a+'" data-ogx-date="'+(l+(o=_<10?"0"+_:_))+':00">'+e(moment(l+o+":00"),i)+"</div>";return r},this.value=function(){return{value:1,unit:"days"}},this.format=function(){return"YYYY-MM-DD HH:[00]"}},OGX.CalendarLayout.DAY=function(t){"use strict";this.labels=function(t){return'<span class="ogx_calendar_layout_day_label">'+function(t){for(var e=new Date(Date.UTC(2017,0,2)),i=[],n=t.day(),o=0;o<7;o++)i.push(e.toLocaleDateString(navigator.language,{weekday:"long"})),e.setDate(e.getDate()+1);return i[n]}(t)+"</span>"},this.html=function(t,e,i,n){var o="",a=t.format("YYYY-MM-DD"),r=moment().format("YYYY-MM-DD");return n&&a===n.format("YYYY-MM-DD")&&(o+="ogx_calendar_selected_item "),a===r&&(o+="ogx_calendar_layout_day_current "),'<div class="ogx_calendar_layout_item ogx_calendar_layout_day '+o+'" data-ogx-date="'+a+'">'+e(t,i)+"</div>"},this.value=function(){return{value:1,unit:"days"}},this.format=function(){return"YYYY-MM-DD"},this.select=function(t){}},OGX.CalendarEngine={},OGX.CalendarEngine.CELL_VALUE=function(t,e){var i=moment(t);return e.hasOwnProperty("css")||(e.css=""),'<div class="ogx_calendar_engine_cell_value '+e.css+'">'+i.format(e.format)+"</div>"},OGX.CalendarEngine.DAY_NUMBER=function(t,e){return OGX.CalendarEngine.CELL_VALUE(t,{format:"DD",css:"ogx_calendar_engine_day_number"})},OGX.CalendarEngine.WEEK_NUMBER=function(t,e){return'<div class="ogx_calendar_engine_week_number">'+moment(t).week()+"</div>"},OGX.CalendarEngine.MONTH_NUMBER=function(t,e){return OGX.CalendarEngine.CELL_VALUE(t,{format:"MM",css:"ogx_calendar_engine_month_number"})},OGX.CalendarEngine.YEAR_NUMBER=function(t,e){return OGX.CalendarEngine.CELL_VALUE(t,{format:"YY",css:"ogx_calendar_engine_year_number"})},OGX.CalendarEngine.DECADE_NUMBER=function(t){return'<div class="ogx_calendar_engine_date_day_number">'+String(t).substr(2)+"'s</div>"},require("Carousel","Uxi","Placeholder","Touch"),OGX.Carousel=function(t){construct(this,"Carousel");var o,a,i,e,n,r,s=this,l=t,c={current:0,min_x:100,anim:!0,drag:!0,dots:!1,css:!1},d={position:"bottom"},u=!1,_=0,h=0,f=new OGX.List,p="ogx_carousel";function g(t){void 0!==t&&f[t]&&f[t].instance&&f[t].instance&&s.find(!1,f[t].instance).blur()}function m(t){a.off("transitionend"),a.removeClass(p+"_anim")}function y(t){if(t.distX>t.distY){var e=r*i*-1+t.distX*t.dirX;e<=0&&e>-1*(a.width()-s.el.width())&&a.css({transform:"translate3d("+e+"px, 0, 0)"})}}function v(t){if(t.distX>l.min_x){var e=r+-1*t.dirX;0<=e&&e<h&&r!==e&&(g(r),r=e,o.trigger(OGX.Carousel.CHANGE,r))}var i=0;r&&(i=100/h*(-1*r)),x(i,r)}function x(t,e){l.anim&&(a.addClass(p+"_anim"),a.on("transitionend",function(){a.off("transitionend"),a.removeClass(p+"_anim"),function(t){void 0!==t&&f[t]&&f[t].instance&&f[t].instance&&s.find(!1,f[t].instance).focus()}(e)})),a.css({transform:"translate3d("+t+"%, 0, 0)"})}function O(){u=!0,clearInterval(e),e=setInterval(b,50),i=Math.floor(o.innerWidth()),a.removeClass(p+"_anim")}function b(){u=!1,clearInterval(e),e=!1}function w(){if(s.nodes.length){f.clear();var t,e=0;l.dots&&(e=1);for(var i=0;i<h;i++)(t=a.children("."+p+"_views > ."+p+'_view[data-ogx-panel-id="'+i+'"]').children(":first")).length&&t[0].hasAttribute("data-ogx-id")?(i!==r&&s.nodes[e].blur(),f.push({index:i,instance:s.nodes[e].id,n:e}),e++):f.push({index:i,instance:!1})}}this._NAME_=OGX.Carousel.NAME,this.el=null,this.enable=function(){l.drag&&this.touch.swipe.enable(),setTimeout(function(){for(var t=0;t<f.length;t++)f[t].instance&&t!==r&&s.find(!1,f[t].instance).blur()},0)},this.disable=function(){l.drag&&this.touch.swipe.disable()},this.resize=function(){setTimeout(O,0)},this.show=function(t,e){var i=f.findIndex("instance",e,1);i&&this.showPanel(i.index)},this.val=function(t){if(void 0===t)return r;this.showPanel(t)},this.panels=function(){return l["node:OML"].length},this.addNode=function(t,e,i){void 0===i&&(i=!1);var n=this.addPanel(),o="."+p+'[data-ogx-id="'+this.id+'"] .'+p+"_views:first ."+p+'_view[data-ogx-panel-id="'+n+'"]',a={};for(var r in t){var s=r.split(":");a[o]=s[1];break}OGX.OML.render(this,a,e),h++;var l=$(o).children(":first");l.length&&l[0].hasAttribute("data-ogx-id")&&f.push({instance:l.data(ogx-n),n:h-1}),i&&this.showPanel(h-1)},this.removeNode=function(t,e){for(var i=0;i<f.length;i++)if(f[i].instance===e){this.removePanel(i);break}},this.showPanel=function(t){if(0<=t&&t<h&&!u&&(i=r)!==t){g(r);var e=100/h*(-1*t),i=t;return setTimeout(function(){x(e,i)},0),r=t,l.dots&&n.select(t),!0}return!1},this.swapPanels=function(t,e){var i=a.children("."+p+"_view:eq("+t+")").detach();t<e?a.children("."+p+"_view:eq("+(e-1)+")").after(i):a.children("."+p+"_view:eq("+e+")").before(i);var n=100/h*(-1*e);a.removeClass(p+"_anim"),a.css({transform:"translate3d("+n+"%, 0, 0)"}),r=e,f.swap(t,e),f[t].index=e,f[e].index=t,o.trigger(OGX.Carousel.CHANGE,r)},this.removePanel=function(t){0<=t&&t<h&&(0<=t-1&&this.showView(t-1),this.nodes.length&&f[t].instance&&this.find(!1,f[t].instance,"remove"),f.splice(t,1),a.children("."+p+"_view:eq("+t+")").remove(),h--,a.css("width",Math.round(100*h)+"%"))},this.destroy=function(){e&&clearInterval(e),l.dots&&n.destroy()},OGX.Data.merge(l,c,!1),l.dots&&("boolean"==typeof l.dots&&(l.dots={}),OGX.Data.merge(l.dots,d)),r=l.current,s.el=o=$(l.container),i=Math.floor(o.innerWidth()),l.hasOwnProperty("node:OML")&&(h=l["node:OML"].length),function(){l.css||(l.css=""),o.addClass(p+" "+l.css);var t="";l.dots&&"top"===l.dots.position&&(t+='<div class="carousel_dots"></div>'),t+='<div class="'+p+'_views" style="width:'+100*h+'%;"></div>',l.dots&&"bottom"===l.dots.position&&(t+='<div class="carousel_dots"></div>'),o.append(t),(a=o.find("."+p+"_views:first")).css({transform:"translate3d("+100/h*(-1*r)+"%, 0, 0)"})}(),l.dots&&(n=s.create("Dots",{container:"."+p+'[data-ogx-id="'+s.id+'"] > .carousel_dots',total:h})).bind("dots",s),function(){for(var t=[],e=0;e<h;e++)a.append('<div class="'+p+'_view" style="width:'+100/h+'%;" data-ogx-panel-id="'+_+'"></div>'),t.push("."+p+'[data-ogx-id="'+s.id+'"] > .'+p+"_views > ."+p+'_view[data-ogx-panel-id="'+_+'"]'),_++;s.placeholders(l,t),o.trigger(OGX.Carousel.READY)}(),s.touch.swipe.set({x:!0,cb_down:m,cb_swipe:y,cb_up:v}),setTimeout(w,0)},OGX.Carousel.NAME="Carousel",OGX.Carousel.READY="CarouselReady",OGX.Carousel.DRAG="CarouselDrag",OGX.Carousel.CHANGE="CarouselChange",OGX.Carousel.RESTORE="CarouselRestore",void 0===OGX)var OGX={};require("Chat","Uxi"),OGX.Chat=function(__config){construct(this,"Chat");var that=this,config=__config,config_default={placeholder:"Type a message",dot_speed:600,on_keyb_update_delay:300,messages:[],handle_keyboard:!0,hide_keyboard_on_send:!1,template_left:'<div class="ogx_chat_message ogx_chat_message_left" style="{{$opacity}} data-id="$uid"><span class="ogx_chat_message_icon" style="{{$bg}}"><span>{{$letter}}</span></span><span class="ogx_chat_message_container"><span class="ogx_chat_message_body">{{$body}}</span><span class="ogx_chat_message_date">{{$date}}</span><span style="clear:both"></span></span></div>',template_right:'<div class="ogx_chat_message ogx_chat_message_right" style="{{$opacity}}" data-id="{{$uid}}"><span class="ogx_chat_message_container"><span class="ogx_chat_message_body">{{$body}}</span><span class="ogx_chat_message_date">{{$date}}</span><span style="clear:both"></span></span></div>',key:"_id",users:[],user:!1,display_mode:OGX.Chat.DISPLAY_INITIALS,picture_key:"",restrict:{multiline:!1,length:500},date_format:"YYYY-MM-DD h:mm:ss A"},container,inner,scroller,composer,intv,winh,oldh=!1,typing={},type=".";function render(){if(0<config.messages.length){for(var t=0;t<config.messages.length;t++)addMessage(config.messages[t]);scroller.resize(),scroller.bottom()}scroller.vocal()}function addMessage(__msg,__prepend){void 0===__prepend&&(__prepend=!1),scroller.observe(!1),scroller.mute();var u=config.users.find(config.key,__msg.from,1);if(u){var initals=u.first_name.substr(0,1).toUpperCase()+u.last_name.substr(0,1).toUpperCase();switch(config.display_mode){case OGX.Chat.DISPLAY_INITIALS:__msg.letter=initals,__msg.bg="";break;case OGX.Chat.DISPLAY_PICTURE:__msg.letter="";var e=eval("u."+config.picture_key);"undefined"!==e?__msg.bg="background-image:url('"+e+"')":(__msg.letter=initals,__msg.bg="")}__msg.uid=u[config.key],__msg.opacity=__prepend?"opacity:1;":"";var html=OGX.Templater.templatize(__msg,getTemplate(__msg));__prepend?inner.prepend(html):inner.append(html);var msg=inner.children(".ogx_chat_message:last");setTimeout(function(){msg.addClass("ogx_chat_message_anim"),scroller.resize(),__prepend?scroller.top():scroller.bottom(),scroller.vocal(),scroller.observe(!0)},100)}}function addTyping(t){typing[t]=!0;var e='<div class="ogx_chat_typing" data-user="'+t+'"><span class="ogx_chat_typing_body">.</div></div>';inner.append(e),animTyping(!0)}function removeTyping(t){typing[t]=!1,inner.find('.ogx_chat_typing[data-user="'+t+'"]').remove(),0===inner.find(".ogx_chat_typing").length&&animTyping(!1)}function animTyping(t){intv=t?intv||setInterval(typeDot,config.dot_speed):(clearInterval(intv),null)}function typeDot(){3<(type+=".").length&&(type="."),inner.find(".ogx_chat_typing_body").html(type)}function getTemplate(t){return t.from===config.user?config.template_right:config.template_left}function sendMessage(){var t=composer.find("textarea:first").val();if(t.length&&(t=(t=(t=t.replace(/^[\r|\n\r]+/,"")).replace(/<\/?[^>]+(>|$)/g,"")).replace(/’/,"'")).length){t=t.replace(/[\r\n]/g,"<br>");var e={from:config.user,body:t,date:moment().format(config.date_format)};addMessage(e);var i=JSON.parse(JSON.stringify(e));delete i.bg,delete i.letter,composer.find("textarea:first").val(""),that.el.trigger(OGX.Chat.SEND_MESSAGE,i)}}function handleShowKeyb(t){oldh=oldh||container.height(),container.height(oldh-t.keyboardHeight),updateScroller()}function handleHideKeyb(){container.height(oldh),updateScroller()}function updateScroller(){setTimeout(function(){scroller.resize(),scroller.bottom()},config.on_keyb_update_delay)}function listenKeyb(t){t?(window.addEventListener("native.keyboardshow",handleShowKeyb),window.addEventListener("native.keyboardhide",handleHideKeyb)):(window.removeEventListener("native.keyboardshow",handleShowKeyb),window.removeEventListener("native.keyboardhide",handleHideKeyb))}function listenArea(t){t?composer.on("keyup","textarea",function(t){13===t.which&&(sendMessage(),config.hide_keyboard_on_send&&handleHideKeyb())}):composer.off("keyup","textarea")}function listenComposer(t){t?composer.on("click",".ogx_chat_composer_send",function(){sendMessage(),config.hide_keyboard_on_send&&handleHideKeyb()}):composer.off("click",".ogx_chat_composer_send")}function initScroller(){scroller=that.create("Scroller",{container:that.el.find(".ogx_chat_messages:first")[0],initDelay:100,auto_scroll:!0,trigger:!0}),inner=scroller.inner(),(inner=$(inner)).addClass("ogx_chat_messages_inner"),scroller.mute(),scroller.resize(),render()}function initMarkup(){var t='<div class="ogx_chat_messages"></div><div class="ogx_chat_composer">';t+='<span class="ogx_chat_composer_input"><textarea placeholder="'+config.placeholder+'">',t+='</textarea></span><span class="ogx_chat_composer_send"></span></div>',container.append(t),composer=container.find(".ogx_chat_composer:first")}function initUsers(){for(var t in config.users)typing[t]=!1}function initDefaults(){for(var t in config_default)config.hasOwnProperty(t)||(config[t]=config_default[t]);config.users.hasOwnProperty("find")||(config.users=new OGX.List(config.users)),that.el=container=$(config.container),container.addClass("ogx_chat")}function init(){if(initDefaults(),initMarkup(),initUsers(),initScroller(),config.handle_keyboard&&listenKeyb(!0),listenComposer(!0),config.restrict){var t=JSON.parse(JSON.stringify(config.restrict));config.restrict.hasOwnProperty("forbidden")&&(t.forbidden=config.restrict.forbidden),config.restrict.hasOwnProperty("allowed")&&(t.allowed=config.restrict.allowed),t.container=that.el.find(".ogx_chat_composer:first .ogx_chat_composer_input:first textarea")[0],OGX.Form.restrictField(t)}listenArea(!0),winh=$(window).height()}this._NAME_=OGX.Chat.NAME,this.el=null,this.disable=function(){this.el.find(".ogx_chat_composer:first .ogx_chat_composer_input:first textarea").blur()},this.users=function(t){return void 0!==t?(t.hasOwnProperty("find")||(t=new OGX.List(t)),config.users=t,!0):config.users},this.user=function(t){return void 0===t?config.user:(config.user=t,!0)},this.typing=function(t,e){t&&!typing[e]?addTyping(e):!t&&typing[e]&&removeTyping(e)},this.compose=function(t){composer.find("textarea:first").val(t)},this.clear=function(){inner.empty()},this.scroller=function(){return scroller},this.addMessage=function(t){addMessage(t)},this.setMessages=function(t){config.messages=t,render()},this.prependMessages=function(t){for(var e=0;e<t.length;e++)addMessage(t[e],!0);config.messages=t.concat(config.messages)},this.destroy=function(){config.restrict&&OGX.Form.unrestrictField(that.el.find(".ogx_chat_composer:first .ogx_chat_composer_input:first textarea")[0]),listenKeyb(!1),listenArea(!1),listenComposer(!1)},init()},OGX.Chat.NAME="Chat",OGX.Chat.SEND_MESSAGE="ChatSend",OGX.Chat.DISPLAY_INITIALS="ChatDisplayInitials",OGX.Chat.DISPLAY_PICTURE="ChatDisplayPicture",OGX.Color={},OGX.Color.hexToRgb=function(t){"use strict";t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},OGX.Color.rgbToHex=function(t,e,i){"use strict";return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},OGX.Color.rgbToHsl=function(t){"use strict";var e,i,n,o=new RegExp("rgb\\(([0-9]+)\\, ([0-9 ]+)\\, ([0-9]+)","g").exec(t);if(o){o.shift(),e=o[0],i=o[1],n=o[2],e/=255,i/=255,n/=255;var a,r,s=Math.max(e,i,n),l=Math.min(e,i,n),c=(s+l)/2;if(s===l)a=r=0;else{var d=s-l;switch(r=.5<c?d/(2-s-l):d/(s+l),s){case e:a=(i-n)/d+(i<n?6:0);break;case i:a=(n-e)/d+2;break;case n:a=(e-i)/d+4}a/=6}return[a,r,c]}return!1},OGX.Color.hslToRgb=function(t,e,i){"use strict";var n,o,a;if(0===e)n=o=a=i;else{var r=function(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;n=r(l,s,t+1/3),o=r(l,s,t),a=r(l,s,t-1/3)}return[Math.round(255*n),Math.round(255*o),Math.round(255*a)]},require("Container","Uxi"),OGX.Container=function(t){construct(this,"Container");var o=this,a={tabs:!0,enabled:!0,reorder:!0,anim:!0,drag:!0,flatten:!1,chromeos:!1,current:0,dots:!1},r=t,s=!1,l=!1,n=!1,c="normal",e=0;function i(t){t?(l.el.on(OGX.Tabs.SELECT,function(t,e){n.showPanel(l.index())}),l.el.on(OGX.Tabs.CLOSE,function(){}),l.el.on(OGX.Tabs.REORDER,function(t,e){n.swapPanel(e.from,e.to)}),l.el.on(OGX.Tabs.ADD,function(){}),n.el.on(OGX.Carousel.CHANGE,function(t,e){l.selectIndex(e)})):(l.el.off(OGX.Tabs.SELECT),l.el.off(OGX.Tabs.CLOSE),l.el.off(OGX.Tabs.REORDER),l.el.off(OGX.Tabs.ADD),n.el.off(OGX.Carousel.CHANGE))}this.el=null,this._NAME_=OGX.Container.NAME,this.construct=function(){n=this.find(OGX.Carousel.NAME,this.id+"_carousel")},this.show=function(t,e){if(n&&"normal"===c){var i=this.nodes.findIndex("id",e);i&&(n.val(i.index),r.tabs&&l.selectIndex(i.index))}},this.showIndex=function(t){n&&"normal"===c&&(n.val(t),r.tabs&&l.selectIndex(t))},this.enable=function(){r.tabs&&n&&i(!0)},this.disable=function(){r.tabs&&n&&i(!1)},this.resize=function(){r.flatten&&(n&&"flattened"!==c&&this.el.width()>=r.flatten?(c="flattened",r.tabs&&(l.blur(),l.hide()),n.blur(),e=function(t){var e=t[0].style.transform;return e=(e=e.match(/translate3d\(([0-9px%,\.\- ]+)\)/))[1].split(",")}(n.el.children(".ogx_carousel_views:first"))[0],n.el.children(".ogx_carousel_views:first").addClass("ogx_container_flattened").css("transform","translate3d(0px, 0px, 0px)")):n&&"flattened"===c&&this.el.width()<r.flatten&&(c="normal",r.tabs&&(l.focus(),l.show()),n.focus(),n.el.children(".ogx_carousel_views:first").removeClass("ogx_container_flattened").css("transform","translate3d("+e+", 0px, 0px)")))},function(){OGX.Data.merge(r,a,!1),r.tabs&&"object"!=typeof r.tabs&&(r.tabs={}),o.el=s=$(r.container),s.addClass("ogx_container");var t=!1;r.tabs&&(function(){var t={container:'.ogx_container[data-ogx-id="'+o.id+'"]',reorder:r.reorder,editable:!1,chromeos:r.chromeos,enabled:r.enabled};t=OGX.Data.merge(r.tabs,t),l=o.create("Tabs",t)}(),t="ogx_carousel_shink");var e=JSON.parse(JSON.stringify(r["node:OML"])),i={},n='.ogx_container[data-ogx-id="'+o.id+'"]:Carousel';i["node:OML"]={},i["node:OML"][n]={id:o.id+"_carousel",css:t,anim:r.anim,current:r.current,chromeos:r.chromeos,drag:r.drag,enabled:r.enabled,dots:r.dots,"node:OML":e},r["node:OML"]=i["node:OML"],setTimeout(function(){o.resize()},0)}()},OGX.Container.NAME="Container",require("Controller","Touch"),OGX.Controller=function(t){construct(this,"Controller");t=OGX.Data.merge(t,{enabled:!0,blured:!0,always_on:!1}),this.el=$(t.container),this.enabled=t.enabled,this.blured=t.blured,this.always_on=t.always_on,this._NAME_=OGX.Controller.NAME,this.always_on&&this.focus()},OGX.Controller.prototype.blur=function(){this.always_on||this.blured||(this.blured=!0,this.ux(!1),this.disable())},OGX.Controller.prototype.focus=function(){this.blured&&(this.blured=!1,this.enabled&&(this.ux(!0),this.enable()))},OGX.Controller.prototype.construct=function(){},OGX.Controller.prototype.enable=function(){},OGX.Controller.prototype.disable=function(){},OGX.Controller.prototype.ux=function(){},OGX.Controller.prototype.resize=function(){},OGX.Controller.prototype.destroy=function(){},OGX.Controller.prototype.kill=function(){this.disable(),this.destroy()},OGX.Controller.NAME="Controller",OGX.Data={},OGX.Data.weld=function(t,e,o,i){void 0===o&&(o=!1),void 0===i&&(i=!1);var n=t;return i&&(n=JSON.parse(JSON.stringify(t))),function t(e,i){for(var n in i)!e.hasOwnProperty(n)||o?e[n]=i[n]:"object"==typeof i[n]&&t(e[n],i[n])}(n,e),n},OGX.Data.merge=function(t,e,i,n,o){for(var a in void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),n&&(t=JSON.parse(JSON.stringify(t))),e)i?o?t.hasOwnProperty(a)&&(t[a]=e[a]):t[a]=e[a]:t.hasOwnProperty(a)||o||(t[a]=e[a]);return t},OGX.Data.props=function(t,e){for(var i in e)if(!t.hasOwnProperty(e[i]))return!1;return!0},OGX.Data.clone=function(t){return JSON.parse(JSON.stringify(t))},OGX.Data.isOML=function(t){for(var e in t)if(-1!==e.indexOf(":"))return!0;return!1},OGX.Display=function(t){"use strict";var i,l,n={display:!1,displays:!1},o={html:!1,css:!1,oml:!1,placeholder:!1,template:!1,view:!1,bind_css:!1,add_css:!1,calc_css:!1,bind_template:!1};function c(t){if(i.display&&!i.display.hasOwnProperty("bind"))return i.display;if(i.displays&&i.display.hasOwnProperty("bind")){if(t.hasOwnProperty(i.display.bind)){var e=t[i.display.bind];return i.displays[e]}if(i.displays.hasOwnProperty("__default"))return i.displays.__default}return!1}function a(t){var e=OGX.Data.merge(o,t,!0,!0);return e.template&&("object"==typeof e.template?e.bind_template=!0:(e.html=OGX.Templater.getTemplate(e.template),e.template=!1)),e.css&&(e.bind_css="object"==typeof e.css&&e.css.hasOwnProperty("bind"),e.add_css="object"==typeof e.css&&e.css.hasOwnProperty("add"),e.calc_css="object"==typeof e.css&&e.css.hasOwnProperty("conditions")),e}function e(t){if(void 0===t&&(t={}),i=OGX.Data.clone(n),!t.hasOwnProperty("display")&&!t.hasOwnProperty("displays"))return i.display=OGX.Data.merge(o,t,!0,!0,!0),i.display=a(i.display),void(l=c());if(t.hasOwnProperty("display")&&t.display&&!t.display.hasOwnProperty("bind"))return i.display=OGX.Data.merge(o,t.display,!0,!0,!0),i.display=a(i.display),void(l=c());if(t.hasOwnProperty("display")&&t.display&&t.display.hasOwnProperty("bind")&&t.hasOwnProperty("displays")&&t.displays&&(i.display=t.display,i.displays=OGX.Data.clone(t.displays)),i.displays)for(var e in i.displays)i.displays[e]=OGX.Data.merge(o,i.displays[e],!0,!0,!0),i.displays[e]=a(i.displays[e])}this._NAME_=OGX.Display.NAME,this.val=function(t){if(void 0===t)return OGX.Data.clone(i);e(t)},this.display=function(t){return i.displays&&i.displays.hasOwnProperty(t)?(l=i.displays[t],!0):l},this.css=function(t){var e,i="",n=void 0!==t;if((e=n?c(t):l)&&(e.bind_css&&n?i+=t[e.css.bind]:e.css&&"string"==typeof e.css&&(i=e.css),e.add_css&&(i+=" "+e.css.add),e.calc_css&&n))for(var o,a,r=0;r<e.css.conditions.length;r++)if("true"===OGX.Templater.templatize(t,e.css.conditions[r][0])&&((o=e.css.conditions[r][1]).hasOwnProperty("css")&&(i=o.css),o.hasOwnProperty("add")&&(i+=" "+o.add),o.hasOwnProperty("remove"))){a=o.remove.explode(" ");for(var s=0;s<a.length;s++)i=i.replace(a[0],"")}return i||""},this.html=function(t){var e,i=!1,n=void 0!==t;return(e=n?c(t):l)&&(e.bind_template&&n?i=OGX.Templater.getTemplate(t[e.template.bind]):(e.template||e.html)&&(i=e.html),n&&i&&(i=OGX.Templater.templatize(t,i))),i=i||""},this.oml=function(t,e,i){var n={},o=c(e);if(o=o||l){if(o.oml)return o.placeholder?function(t,e,i){var n,o,a=OGX.Data.clone(t.oml);for(var r in a){var s,l;for(var c in n=r.replace("default",e),a[n]=a[r],a[n]["node:OML"]=[],t.placeholder){l=i[c].length;for(var d=0;d<l;d++){for(var u in s=OGX.Data.clone(t.placeholder[c]),(o=OGX.Data.clone(i))[c]=o[c][d],s){s[u].data=o;break}a[n]["node:OML"].push(s)}return delete a[r],a}}return!1}(o,t,e):o.oml;if(o.view)return n[t+":"+o.view]=o.view,n[t+":"+o.view].id=i,n[t+":"+o.view].data=e,n;if(o.template)return"string"==typeof o.template?n[t+":Templates."+o.template]={data:e}:n[t+":Templates."+e[o.template.bind]]={data:e},n;if(o.hasOwnProperty("html"))return n[t+":Html"]={html:this.html(e)},n}return!1},this.toJSON=function(){return i},e(t)},OGX.Display.NAME="Display",require("Dots","Uxi","Touch"),OGX.Dots=function(t){construct(this,"Dots");var n,i=this,o=t,e={container:"document",total:0,current:0,clickable:!0},a={};function r(t){switch(a[t]._NAME_){case OGX.Carousel.NAME:a[t].el.off(OGX.Carousel.CHANGE,s),delete a[t];break;case OGX.Iceberg.NAME:a[t].el.off(OGX.Iceberg.SHOW,s),delete a[t]}}function s(t,e){i.select(e)}function l(t){t?n.on(i.touch.down,".ogx_dots_item",function(){var t=Number($(this).data("id"));i.select(t),n.trigger(OGX.Dots.SELECT,t),function(t){for(var e in a)switch(a[e]._NAME_){case OGX.Carousel.NAME:a[e].val(t)}}(t)}):n.off(i.touch.down)}function c(){for(var t,e="",i=0;i<o.total;i++)t="",o.current===i&&(t="ogx_dots_selected"),e+='<div class="ogx_dots_item" data-id="'+i+'"><span class="ogx_dots_gfx '+t+'"></span></div>';n.html(e)}this._NAME_=OGX.Dots.NAME,this.el=null,this.bind=function(t,e){return!(a.hasOwnProperty(t)||!e.hasOwnProperty("_NAME_"))&&function(t,e){switch((a[t]=e)._NAME_){case OGX.Carousel.NAME:o.total=e.panels(),o.current=e.val(),setTimeout(c,0),e.el.on(OGX.Carousel.CHANGE,s);break;case OGX.Iceberg.NAME:o.total=e.panels().length,o.current=e.val(),setTimeout(c,0),e.el.on(OGX.Iceberg.SHOW,s)}return!0}(t,e)},this.unbind=function(t){return!!a.hasOwnProperty(t)&&r(t)},this.select=function(t){n.find(".ogx_dots_selected").removeClass("ogx_dots_selected"),n.children(".ogx_dots_item:eq("+t+")").children(".ogx_dots_gfx:first").addClass("ogx_dots_selected"),o.current=t},this.destroy=function(){!function(){for(var t in a)r(t)}(),o.clickable&&l(!1)},OGX.Data.merge(o,e),i.el=n=$(o.container),n.addClass("ogx_dots"),c(),o.clickable&&l(!0)},OGX.Dots.NAME="Dots",OGX.Dots.SELECT="DotsSelect",require("DynamicList","Uxi","Touch"),OGX.DynamicList=function(t){construct(this,"DynamicList");var c,l,d,u,s=this,_=t,e={container:null,key:!1,display:!1,displays:!1,reorder:!1,swipe:!1,chromeos:!1,min_x:30,click_time:100,hold_time:2e3,interval:5,list:[],mode:OGX.DynamicList.SELECT_MODE_SINGLE,trigger:!1,swipe_template:'<div class="ogx_dynamic_list_item ogx_dynamic_list_swiper_back_item" style="height:{{$height}}px; z-index:{{$zindex}}; margin-bottom:{{$margin}}px;">{{$template}}</div>',zindex:1},i={mode:OGX.DynamicList.SWIPE_MODE_DELETE,options:{},template:!1,html:""},h=new OGX.List,r={},f=1,n="__id__",p={mode:!1,stime:0,target:0,si:0,ei:0,y:0},o=null,a=null,g=null,m=0,y=new OGX.Display(_),v=!1,x=!1;function O(){for(var t,e,i,n=F(),o="",a=[],r=0;r<n.length;r++)!1,e="",t=n[r][u],h.find(u,t,1)&&(e="ogx_dynamic_list_selected_item"),y.html(n[r]),o+='<div class="ogx_dynamic_list_item '+e+" "+y.css(n[r])+'" data-ogx-id='+t+"></div>",i=y.oml('.ogx_dynamic_list[data-ogx-id="'+s.id+'"] .ogx_dynamic_list_item[data-ogx-id="'+t+'"]',n[r],u),a.push(i);c.html(o),function(t){for(var e=0;e<t.length;e++)s.parse(t[e])}(a),_.trigger&&c.trigger(OGX.DynamicList.RENDER)}function b(n){if(n.hasOwnProperty("mode")||(n.mode="eqjson"),"object"==typeof n.object)switch((r[n.property]=n).object._NAME_){case OGX.DynamicList.NAME:_.list.removeFilter(n.property);var t=G(n.property,n.remote_property);_.list.addFilter(n.property,n.mode,t),r[n.property].object.el.on(OGX.DynamicList.SELECT,function(t,e){var i;return _.list.removeFilter(n.property),i=r[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||r[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?r[n.property].object.getSelection()[0][n.remote_property]:G(n.property,n.remote_property),_.list.addFilter(n.property,n.mode,i),l=_.list.filter(),d=!0,setTimeout(O,0),!1}),r[n.property].object.el.on(OGX.DynamicList.UNSELECT,function(t,e){var i;return _.list.removeFilter(n.property),0<(i=r[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||r[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?[]:G(n.property,n.remote_property)).length&&_.list.addFilter(n.property,n.mode,i),l=_.list.filter(),d=!0,setTimeout(O,0),!1});break;case OGX.Tags.NAME:case OGX.Switch.NAME:case OGX.Roulette.NAME:_.list.removeFilter(n.property),_.list.addFilter(n.property,n.mode,n.object.val()),r[n.property].object.el.on(OGX[n.object._NAME_].CHANGE,function(t,e){return _.list.removeFilter(n.property),_.list.addFilter(n.property,n.mode,r[n.property].object.val()),l=_.list.filter(),d=!0,setTimeout(O,0),!1});break;case OGX.RouletteTree.NAME:for(var e=r[n.property].object.val(),i=0;i<e.length;i++)_.list.removeFilter(e[i].group),null!==e[i].value&&_.list.addFilter(e[i].group,n.mode,e[i].value);r[n.property].object.el.on(OGX.RouletteTree.CHANGE,function(t,e){for(var i=0;i<e.length;i++)_.list.removeFilter(e[i].group),null!==e[i].value&&_.list.addFilter(e[i].group,n.mode,e[i].value);return l=_.list.filter(),d=!0,setTimeout(O,0),!1})}else if("string"==typeof n.object){if(0===$(n.object).length)return!1;n.object=$(n.object);var o=(r[n.property]=n).object.val();switch(r[n.property].hasOwnProperty("min_length")?(r[n.property].last_val=o).length>=r[n.property].min_length&&(_.list.removeFilter(n.property),_.list.addFilter(n.property,n.mode,o)):(_.list.removeFilter(n.property),_.list.addFilter(n.property,n.mode,o)),n.object.attr("type").toLowerCase()){case"text":case"number":case"email":case"password":case"tel":r[n.property].object.on("input",function(){return o=$(this).val(),_.list.removeFilter(n.property),r[n.property].hasOwnProperty("min_length")?o.length<r[n.property].min_length&&r[n.property].last_val.length>=r[n.property].min_length||o.length>=r[n.property].min_length?(o.length>=r[n.property].min_length&&_.list.addFilter(n.property,n.mode,o),l=_.list.filter(),d=!0,r[n.property].last_val=o,setTimeout(O,0)):r[n.property].last_val=o:(o.length&&_.list.addFilter(n.property,n.mode,o),l=_.list.filter(),d=!0,setTimeout(O,0)),!1});break;case"range":var a;r[n.property].object.on("input",function(){return a=Number($(this).attr("min")),_.list.removeFilter(n.property),_.list.addFilter(n.property,n.mode,[a,$(this).val()]),l=_.list.filter(),d=!0,setTimeout(O,0),!1})}}}function w(t){if(r.hasOwnProperty(t)&&"object"==typeof r[t].object)switch(r[t].object._NAME_){case OGX.DynamicList.NAME:r[t].object.el.off(OGX.DynamicList.SELECT),r[t].object.el.off(OGX.DynamicList.UNSELECT);break;case OGX.Tags.NAME:case OGX.Switch.NAME:case OGX.Roulette.NAME:case OGX.RouletteTree.NAME:r[t].object.el.off(OGX[r[t].object._NAME_].CHANGE);break;default:r[t].object.off("input")}else r[t].object.off("input");return _.list.removeFilter(t),delete r[t],l=_.list.filter(),d=!0,setTimeout(O,0),!0}function G(t,e){for(var i=r[t].object.getSelection(),n=[],o=0;o<i.length;o++)n.push(i[o][e]);return n}function X(t){void 0!==c&&v&&(t?c.on("click",".ogx_dynamic_list_item",W):c.off("click",".ogx_dynamic_list_item",W))}function E(t){t?c.on(s.touch.down,".ogx_dynamic_list_item",C):c.off(s.touch.down,".ogx_dynamic_list_item",C)}function T(t){a=t?setInterval(L,20):(clearInterval(a),null)}function D(t){t?c.on(s.touch.move,".ogx_dynamic_list_item",M):c.off(s.touch.move,".ogx_dynamic_list_item")}function C(t){p.mode=!1,p.target=$(t.currentTarget),p.si=p.target.index(),p.cy=c.offset().top,t=s.event(t),p.startx=t.pageX,p.starty=t.pageY,g&&clearInterval(g),p.stime=(new Date).getTime(),_.reorder&&T(!0),D(!0),$("body").on(s.touch.up,N)}function M(t){t=s.event(t),p.y=-1*(p.starty-t.pageY),p.mx=t.pageX-p.startx,p.px=t.pageX,p.py=t.pageY,p.st=!1,_.swipe&&!p.mode&&Math.abs(p.mx)>_.min_x&&(p.mode="swipe",_.scroll&&!p.st&&(p.st=!0,x.disable(),x.container().css("cssText","height:"+x.container().height()+"px !important;")),_.reorder&&T(!1),S(!0))}function L(){!p.mode&&(new Date).getTime()-p.stime>_.hold_time&&(p.mode="reorder",p.item=_.list.find(u,p.target.data("id").toString(),1),c.trigger(OGX.DynamicList.HOLD,p.item),T(!1),setTimeout(function(){p.tgy=p.target.position().top,p.tgx=p.target.position().left,p.y=0;var t=p.target.outerWidth(),e=p.target.outerHeight();p.clone=p.target.clone().css({position:"absolute",left:p.tgx+"px",top:p.tgy+"px",width:t+"px",height:e+"px"}).addClass("ogx_dynamic_list_reorder").prependTo(c),p.target.addClass("ogx_dynamic_list_frozen"),g=setInterval(R,_.interval),c.on(s.touch.move,P)}(),0))}function N(t){if($("body").off(s.touch.up,N),(_.reorder||_.swipe)&&(clearInterval(g),D(g=!1)),_.swipe&&S(!1),_.reorder&&T(!1),_.scroll&&(x.enable(),x.container().removeAttr("style")),_.reorder&&"reorder"===p.mode){if(c.off(s.touch.move,P),p.clone){var e=JSON.parse(JSON.stringify(_.list[p.si]));return _.list.delete(p.si),_.list.insert(e,p.ei),p.clone.remove(),p.clone=!1,p.target.removeClass("ogx_dynamic_list_frozen"),void c.trigger(OGX.DynamicList.DROP,p.item)}if((new Date).getTime()-p.stime<_.click_time){var i=p.target.data("id").toString(),n=_.list.find(u,i,1);c.trigger(OGX.DynamicList.SELECT,n),s.select(u,i)}}else if(_.swipe&&"swipe"===p.mode){var o=p.target.outerWidth(!0),a=Math.abs(100*p.mx/o);a<50?a?(p.target.addClass("ogx_dynamic_list_swiper_trans_item_restore"),p.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX(0px)")):(p.target.next(".ogx_dynamic_list_swiper_back_item:first").remove(),p.target.css("transform","translateX(0px)")):0<p.mx?(p.target.attr("data-side","left"),p.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX("+o+"px)")):(p.target.attr("data-side","right"),p.target.addClass("ogx_dynamic_list_swiper_trans_item").css("transform","translateX("+-1*o+"px)"))}p.mode=!1}function S(t){o=t?setInterval(A,_.interval):(clearInterval(o),!1)}function A(){if("swipe"===p.mode&&Math.abs(p.mx)>_.min_x){var t=parseInt(p.target.css("border-top-width").split("px")[0]),e=parseInt(p.target.css("border-bottom-width").split("px")[0]),i=p.target.outerHeight();if(!p.target.hasClass("ogx_dynamic_list_swiper_work")){p.target.addClass("ogx_dynamic_list_swiper_work");var n={};n.height=i,n.margin=-2*(t+e),n.top=p.target.position().top,n.zindex=_.zindex;var o="";_.swipe.template?o=OGX.Templater.getTemplate(_.swipe.template):_.swipe.html&&(o=_.swipe.html),n.template=o,o=OGX.Templater.templatize(n,_.swipe_template),p.target.after(o)}if(_.swipe.mode===OGX.DynamicList.SWIPE_MODE_SIDE&&(p.mx<0?(m=1,p.target.next(".ogx_dynamic_list_swiper_back_item:first").addClass("ogx_dynamic_list_swiper_side_left").removeClass("ogx_dynamic_list_swiper_side_right")):(m=-1,p.target.next(".ogx_dynamic_list_swiper_back_item:first").addClass("ogx_dynamic_list_swiper_side_right").removeClass("ogx_dynamic_list_swiper_side_left"))),p.py>=p.target.offset().top&&p.py<=p.target.offset().top+i){p.target.css("transform","translateX("+p.mx+"px)");var a=p.target.next(".ogx_dynamic_list_swiper_back_item:first");p.mx<0?a.addClass("ogx_dynamic_list_swiper_right").removeClass("ogx_dynamic_list_swiper_left"):a.addClass("ogx_dynamic_list_swiper_left").removeClass("ogx_dynamic_list_swiper_right")}else N(p.target)}}function Y(t){t?c.on("transitionend",".ogx_dynamic_list_swiper_trans_item",k):c.off("transitionend",".ogx_dynamic_list_swiper_trans_item",k)}function k(t){var e=$(this),i=e.next(".ogx_dynamic_list_swiper_back_item:first");if(e.hasClass("ogx_dynamic_list_swiper_trans_item_restore"))i.remove(),e.css("transform","translateX(0px)"),e.removeClass("ogx_dynamic_list_swiper_trans_item");else{var n,o=e.index(),a=e.data("ogx-id");switch(_.swipe.mode){case OGX.DynamicList.SWIPE_MODE_DELETE:e.remove(),I(i),n=_.list.findDelete(_.key,String(a),1),c.trigger(OGX.DynamicList.DELETE,{item:n,index:o});break;case OGX.DynamicList.SWIPE_MODE_SIDE:var r;n=_.list.find(_.key,a,1),r=-1===m?"right":"left",c.trigger(OGX.DynamicList.SIDED,{side:r,item:n,index:o});break;case OGX.DynamicList.SWIPE_MODE_CUSTOM:}}e.removeClass("ogx_dynamic_list_swiper_work"),e.removeClass("ogx_dynamic_list_swiper_trans_item_restore")}function I(t){t.addClass("ogx_dynamic_list_swiper_delete"),t.on("transitionend",function(){t.off("transitionend"),t.remove()})}function P(t){t.preventDefault(),t.stopImmediatePropagation(),t=s.event(t),p.y=-1*(p.starty-t.pageY)}function R(){if(1<Math.abs(c.offset().top-p.cy))return clearInterval(g),g=!1,p.clone.remove(),p.clone=!1,p.target.removeClass("ogx_dynamic_list_frozen"),void c.trigger(OGX.DynamicList.RELEASE);var i=!1,t=c.children(".ogx_dynamic_list_item:last"),e=t.offset().top+-1*p.cy;if(p.tgy+p.y<e?p.clone.css({top:p.tgy+p.y}):i=t,!i){var n,o,a,r,s=0;c.children(".ogx_dynamic_list_item").each(function(t,e){if((e=$(e))[0]!==p.clone[0]&&!e.hasClass("ogx_dynamic_list_frozen")){if(n=e.offset().top,o=e.outerHeight(),r=n+o/2,a=p.clone.offset().top,n<a&&a<r)return s=-1,void(i=e);if(r<a&&a<n+o)return s=1,void(i=e)}})}if(i){switch(p.ei=_.list.findIndex(u,$(i).data("id").toString()).index,s){case-1:i.index()-1!==p.target.index()&&p.target.detach().insertBefore(i);break;case 1:i.index()+1!==p.target.index()&&p.target.detach().insertAfter(i)}i=!1}}function W(t){var e=$(this);switch(_.mode){case OGX.DynamicList.SELECT_MODE_SINGLE:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")||(z(e.index(),!0),c.trigger(OGX.DynamicList.SELECT,h[h.length-1]));break;case OGX.DynamicList.SELECT_MODE_TOGGLE:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")?(z(e.index(),!1),c.trigger(OGX.DynamicList.UNSELECT)):(s.resetSelection(),z(e.index(),!0),c.trigger(OGX.DynamicList.SELECT,h[h.length-1]));break;case OGX.DynamicList.SELECT_MODE_MULTI:e.hasClass("ogx_dynamic_list_selected_item")||e.hasClass("ogx_dynamic_list_swiper_trans_item")?(z(e.index(),!1),c.trigger(OGX.DynamicList.UNSELECT)):(z(e.index(),!0),c.trigger(OGX.DynamicList.SELECT,h));break;case OGX.DynamicList.SELECT_MODE_HIT:var i=F();if(e.hasClass("ogx_dynamic_list_swiper_back_item")){var n="left";e.hasClass("ogx_dynamic_list_swiper_side_right")&&(n="right"),c.trigger(OGX.DynamicList.BACK_HIT,{side:n,item:i[e.index()]})}else c.trigger(OGX.DynamicList.SELECT,i[e.index()])}}function H(t,e,i){"single"===_.mode&&s.resetSelection();var n,o=F().find(t,e);o&&!Array.isArray(o)&&(o=[o]);for(var a=0;a<o.length;a++)(n=c.find('.ogx_dynamic_list_item[data-ogx-id="'+o[a][u]+'"]:first'))&&(i?(n.addClass("ogx_dynamic_list_selected_item"),h.push(o[a])):n.removeClass("ogx_dynamic_list_selected_item"));return"single"===_.mode&&o.length?o[0]:o}function z(t,e){var i,n=F();return 0<(i=c.find(".ogx_dynamic_list_item:eq("+t+")")).length&&(_.mode===OGX.DynamicList.SELECT_MODE_SINGLE&&s.resetSelection(),e?(i.addClass("ogx_dynamic_list_selected_item"),h.push(n[t])):(i.removeClass("ogx_dynamic_list_selected_item"),h.findDelete(u,attr.data("data-ogx-id"),1)),!0)}function F(){return d?l:_.list}function U(){for(var t=0;t<_.list.length;t++)_.list[t][u]=String(f),f++}function j(t){for(var e=0;e<t.length;e++)delete t[e][u];return t}function B(){s.val(_.list),_.binds&&function(){for(var t=0;t<_.binds.length;t++)b(_.binds[t])}(),v=!0,s.blured||X(!0),c.trigger(OGX.DynamicList.READY)}this._NAME_=OGX.DynamicList.NAME,this.el=null,this.enable=function(){return _.mode!==OGX.DynamicList.STATIC&&(this.touch.enable(),X(!0),(_.reorder||_.swipe)&&(E(!0),_.swipe&&Y(!0)),!0)},this.disable=function(){return _.mode!==OGX.DynamicList.STATIC&&(this.touch.disable(),X(!1),(_.reorder||_.swipe)&&(E(!1),_.swipe&&Y(!1)),!0)},this.val=function(t){if(void 0===t){if(_.key)return _.list;var e=JSON.parse(JSON.stringify(_.list));return j(OGX.List(e))}t.hasOwnProperty("insert")||(t=new OGX.List(t)),_.list=t,_.key||(f=1,u=n,U()),setTimeout(O,0)},this.getFilteredList=function(){if(d){if(_.key)return l;var t=JSON.parse(JSON.stringify(l));return j(OGX.List(t))}return!1},this.display=function(t){return void 0===t?_.display:_.display.val(t)},this.mode=function(t){return void 0===t?_.mode:(_.mode=t,!0)},this.bind=function(t){return!r.hasOwnProperty(t.property)&&b(t)},this.unbind=function(t){return!!r.hasOwnProperty(t)&&w(t)},this.order=function(t,e){return _.list.order(t,e),setTimeout(O,0),!0},this.filter=function(){return l=_.list.filter(),d=!0,setTimeout(O,0),l},this.unfilter=function(){return d=!1,setTimeout(O,0),!0},this.addFilter=function(t,e,i){return _.list.addFilter(t,e,i)},this.removeFilter=function(t,e,i){return _.list.removeFilter(t,e,i)},this.resetFilters=function(){return _.list.resetFilters()},this.getFilters=function(){return _.list.getFilters()},this.insert=function(t,e){var i;_.key||(t[u]=f++);var n=!0;if(d){var o=new OGX.List(t);o.setFilters(_.list.getFilters()),0===o.filter().length?n=!1:l.push(t)}var a='<div class="ogx_dynamic_list_item '+y.css(t)+'" data-ogx-id='+t[u]+"></div>",r=y.oml('.ogx_dynamic_list[data-ogx-id="'+this.id+'"] .ogx_dynamic_list_item[data-ogx-id="'+t[u]+'"]',t,t[u]);if(void 0===e)_.list.push(t),n&&c.append(a);else if(_.list.insert(t,e),n){if(d)i=(l=_.list.filter()).findIndex(u,t[u]);else{if(0===e)return c.prepend(a),!0;i=_.list.findIndex(u,t[u])}var s=c.children(".ogx_dynamic_list_item:nth-child("+(i.index+1)+")");0<s.length?s.before(a):c.append(a),_.trigger&&c.trigger(OGX.DynamicList.RENDER)}return this.parse(r),n},this.delete=function(t){var e=F().delete(t);if(e){var i=c.children(".ogx_dynamic_list_item:eq("+t+")");return this.remove(e[u]),i.remove(),!0}return!1},this.deleteSelection=function(){for(var t=F(),e=0;e<h.length;e++)t.findDelete(u,h[e][u],1),this.remove(h[e][u]),c.children(".ogx_dynamic_list_selected_item").remove();return!0},this.findDelete=function(t,e,i){if(_.key){var n=arguments.length;void 0!==i&&n--,1===n&&(i=e,e=t,t=_.key)}var o,a,r=_.list.findDelete(t,e,i);r&&!Array.isArray(r)&&(r=[r]);for(var s=0;s<r.length;s++)a=(o=c.children('.ogx_dynamic_list_item[data-ogx-id="'+r[s][u]+'"]:first')).next(".ogx_dynamic_list_swiper_back_item:first"),o.remove(),this.remove(r[s][u]),I(a);return r},this.select=function(t,e){return H(t,e,!0)},this.selectIndex=function(t){return z(t,!0)},this.unselect=function(t,e){return H(t,e,!1)},this.unselectIndex=function(t){return z(t,!1)},this.resetSelection=function(){h=new OGX.List,c.children(".ogx_dynamic_list_selected_item").removeClass("ogx_dynamic_list_selected_item")},this.getSelection=function(t){return void 0===t&&(t=!1),t?c.children(".ogx_dynamic_list_selected_item"):_.key?h:j(JSON.parse(JSON.stringify(h)))},this.getElement=function(t,e){_.key&&1===arguments.length&&(e=t,t=_.key);var i=_.list.find(t,e,1);return!!i&&c.children('.ogx_dynamic_list_item[data-ogx-id="'+i[u]+'"]')[0]},this.getIndex=function(t,e){_.key&&1===arguments.length&&(e=t,t=_.key);var i=_.list.find(t,e,1);return i?c.children('.ogx_dynamic_list_item[data-ogx-id="'+i[u]+'"]').index():-1},this.replace=function(t,e,i){_.key&&2===arguments.length&&(i=e,e=t,t=_.key);_.key||(i[u]=f++);var n=_.list.findReplace(t,e,i,1);if(n){var o=c.children('.ogx_dynamic_list_item[data-ogx-id="'+n[u]+'"]:first');return o.length&&(o.attr("data-ogx-id",i[u]),o.html(y.html(i)),_.trigger&&c.trigger(OGX.DynamicList.RENDER)),!0}return!1},this.update=function(t,e,i,n,o){if(_.key){var a=arguments.length;void 0!==o&&a--,void 0!==n&&a--,2===a&&(i=e,e=t,t=_.key)}var r,s=_.list.findUpdate(t,e,i,n,o);if(s&&!Array.isArray(s)&&(s=[s]),s.length){for(var l=0;l<s.length;l++)0<(r=c.children('.ogx_dynamic_list_item[data-ogx-id="'+s[l][u]+'"]:first')).length&&(r.html(y.html(s[l])),_.trigger&&c.trigger(OGX.DynamicList.RENDER));return s.length}return!1},this.restore=function(t,e){_.key&&1===arguments.length&&(e=t,t=_.key);var i=_.list.find(t,e,1),n=c.children('.ogx_dynamic_list_item[data-ogx-id="'+i[_.key]+'"]');n.addClass("ogx_dynamic_list_swiper_trans_item_restore"),n.css({transform:"translateX(0px)","z-index":_.zindex+1}),setTimeout(function(){n.next(".ogx_dynamic_list_swiper_back_item:first").remove()},200)},this.clear=function(){c.empty()},this.reset=function(){c.empty(),d=!1,_.list=new OGX.List,h=new OGX.List,l=new OGX.List},this.destroy=function(){!function(){for(var t in r)w(t)}(),c.empty(),c.removeClass("ogx_dynamic_list")},this.render=function(){setTimeout(O,0)},_=_||{},OGX.Data.merge(_,e),_.list.hasOwnProperty("_NAME_")||(_.list=new OGX.List(_.list)),!_.key&&0<_.list.length?(u=n,U()):u=_.key,_.swipe&&("object"!=typeof _.swipe&&(_.swipe={}),OGX.Data.merge(_.swipe,i)),s.el=c=$(_.container),c.addClass("ogx_dynamic_list"),B(),_.scroll&&(x=s.find(OGX.Scroller.NAME,_.id+"_scroller"))},OGX.DynamicList.NAME="DynamicList",OGX.DynamicList.HOLD="DynamicListHold",OGX.DynamicList.RELEASE="DynamicListRelease",OGX.DynamicList.DROP="DynamicListDrop",OGX.DynamicList.SELECT="DynamicListSelect",OGX.DynamicList.DELETE="DynamicListDelete",OGX.DynamicList.SIDED="DynamicListSided",OGX.DynamicList.BACK_HIT="DynamicListBackHit",OGX.DynamicList.UNSELECT="DynamicListUnselect",OGX.DynamicList.RENDER="DynamicListRender",OGX.DynamicList.SELECT_MODE_SINGLE="single",OGX.DynamicList.SELECT_MODE_TOGGLE="toggle",OGX.DynamicList.SELECT_MODE_MULTI="multi",OGX.DynamicList.SELECT_MODE_HIT="hit",OGX.DynamicList.STATIC="static",OGX.DynamicList.SWIPE_LEFT="DynamicListSwipeLeft",OGX.DynamicList.SWIPE_RIGHT="DynamicListSwipeRight",OGX.DynamicList.SWIPE_MODE_DELETE="DynamicListSwipeModeDelete",OGX.DynamicList.SWIPE_MODE_SIDE="DynamicListSwipeModeSide",OGX.DynamicList.SWIPE_MODE_CUSTOM="DynamicListSwipeModeCustom",OGX.DynamicList.READY="DynamicListReady",OGX.Form=function(){"use strict";var c=this,d={container:!1,allowed:!1,forbidden:!1,change_cb:!1,submit_cb:!1,validate:!1,elem_types:["input","textarea"],wait:1e3,fields:{}},s={container:!1,allowed:/^[a-z0-9\\!\\.\\?\\#\\@\\$\\-\\:\\(\\)\\/_,;%'"’ ]$/gi,forbidden:!1,mask:!1,mask_char:"%",paste:!0,autocomplete:null,multiline:!1,input_cb:!1,change_cb:!1,val:null,changing:!1,wait:2e3,intv:!1,max:2500,type:"string",params:null},u=new OGX.List,o=new OGX.List;function l(t,e){var i,n=u.find("container",e,1);if(n&&n.config.change_cb){for(var o in n.fields)if(n.fields[o].intv)return;var a=f(n.form);for(var r in a)n.config.fields.hasOwnProperty(r)&&n.config.fields[r].hasOwnProperty("type")?a[r]=h(n.config.fields[r].type,a[r]):n.config.hasOwnProperty("type")&&(a[r]=h(n.config.type,a[r]));if(i=JSON.stringify(a),n.val!==i){var s;if(n.val=i,n.config.validate){s={obj:a,form:e,valid:!1};var l=c.validateForm(n.form);!0===l?s.valid=!0:(s.valid=!1,s.error=l)}else s=a;n.config.change_cb(s)}}}function _(t){var l={container:t.container,config:t,field:$(t.container),intv:!1};l.name=l.field.attr("name"),l.val=l.field.val(),l.field.val(l.val),u.insert(l),$(document).on("input change",l.container,function(){var t=$(this).val();if(t!==l.val){if(l.config.input_cb){var e={value:null,obj:{},el:null};t=h(l.config.type,t),e.el=field[0],e.value=t,e.property=name,e.obj[name]=t,l.config.input_cb(e,l.config.params)}l.intv||(l.intv=setInterval(function(){!function(t){var e=$(t.container).val();t.val!==e&&(t.val=e,t.config.changing=(new Date).getTime());if(t.config.changing&&(new Date).getTime()>t.config.wait+t.config.changing&&(clearInterval(t.intv),t.intv=!1,t.config.change_cb)){var i={value:null,obj:{},el:null};e=h(t.config.type,e),i.el=t.field[0],i.property=t.name,i.value=e,i.obj[i.property]=e,t.config.change_cb(i,t.config.params)}}(l)},50))}}),t.multiline||$(document).on("keydown",l.container,function(t){if(8!==t.which&&13!==t.which){var e=$(this).val(),i=t.key;if(13!==t.which&&l.config.mask){if(e.length>l.config.mask.length)return t.preventDefault(),t.stopImmediatePropagation(),!1;for(var n=l.config.mask,o=0;o<e.length;o++)l.config.mask.substr(o,1)===l.config.mask_char&&(n=n.replace(l.config.mask_char,e.substr(o,1)));var a=n.indexOf(l.config.mask_char),r=!1;return a+1<n.length+1&&(r=n.substr(a+1,1)),-1!==a&&(i===l.config.mask.substr(n.indexOf(l.config.mask_char)-1,1)?n=n.substr(0,n.indexOf(l.config.mask_char)-1):(n=n.substr(0,n.indexOf(l.config.mask_char)),r&&r!==l.config.mask_char&&setTimeout(function(){l.field.val(n+i+r)},0))),void l.field.val(n)}}if(13===t.which){t.preventDefault(),t.stopImmediatePropagation();e=$(this).val();if(l.intv&&(clearInterval(l.intv),l.intv=null),l.config.change_cb){var s={value:null,obj:{},el:null};e=h(l.config.type,e),s.el=l.field[0],s.property=name,s.value=e,s.obj[name]=e,l.config.change_cb(s,l.config.params)}else l.field.trigger("change",e)}}),(l.config.allowed||l.config.forbidden)&&c.restrictField(l.config)}function h(t,e){switch(t){case"string":return String(e);case"number":return Number(e);case"int":return parseInt(e);case"bool":return"true"===e||1===e}}function f(t){return $(t).serializeArray().map(function(t){return this[t.name]=t.value,this}.bind({}))[0]}this.bindForm=function(t){return OGX.Data.merge(t,d),function(i){for(var n,o,a={container:i.container,config:i,form:$(i.container),fields:new OGX.List,val:""},r=0;r<i.elem_types.length;r++)a.form.find(i.elem_types[r]).each(function(t,e){e.hasAttribute("name")&&(o=e.getAttribute("name"),n=OGX.Data.clone(s),OGX.Data.merge(n,i,!0,!1,!0),i.fields.hasOwnProperty(o)&&(n=OGX.Data.merge(n,i.fields[o],!0)),n.container=i.container+" "+i.elem_types[r]+'[name="'+o+'"]',n.change_cb=l,n.params=i.container,_(n),a.fields.insert({container:n.container}))});a.form.on("submit",function(t){t.preventDefault(),t.stopImmediatePropagation();var e={obj:f(a.container),form:a.container};if(a.config.validate){var i=c.validateForm(a.container);!0===i?e.valid=!0:(e.valid=!1,e.error=i)}a.config.submit_cb?a.config.submit_cb(e):a.form.trigger("submit",e)}),u.insert(a)}(t),!0},this.unbindForm=function(t){var e=u.find("container",t,1);if(e){for(var i in $(document).off("submit",e.container),e.fields)this.unbindField(e.fields[i].container);u.findDelete("container",t,1)}},this.bindField=function(t){return OGX.Data.merge(t,s),_(t),!0},this.unbindField=function(t){var e=u.find("container",t,1);e&&($(document).off("input change",e.container),e.config.multiline||$(document).off("keydown",e.container),e.intv&&clearInterval(e.intv),o.find("container",e.container,1)&&this.unrestrictField(e.container),u.findDelete("container",e.container,1))},this.restrictField=function(t){return function(t){var i={container:t.container,config:t,field:$(t.container),keys:[],content:null},n=[8,9];null===t.autocomplete&&i.field[0].hasAttribute("autocomplete")&&"on"===i.field.attr("autocomplete")?t.autocomplete=!0:t.autocomplete=!1;t.autocomplete?t.hasOwnProperty("allowed")&&t.allowed&&(t.allowed=new RegExp(t.allowed.toString().replace("$/gi","+$").replace("/^","^"),"gi")):i.keys.push(229);-1!==["input","texarea"].indexOf(i.field.get(0).tagName.toLowerCase())?i.content="val":i.content="html";i.config.multiline||i.keys.push(13);$(document).on("textInput keydown",i.container,function(t){if("textInput"===t.type){var e=t.originalEvent.data;if(i.config.allowed&&!e.match(i.config.allowed))return t.preventDefault(),t.stopImmediatePropagation(),!1;if(i.config.forbidden&&e.match(i.config.forbidden))return t.preventDefault(),t.stopImmediatePropagation(),!1;if("keydown"===t.type){if(-1!==i.keys.indexOf(t.which))return t.preventDefault(),t.stopImmediatePropagation(),!1;if($(this)[i.content]().length>=i.config.max&&-1===t.which.indexOf(n))return t.preventDefault(),t.stopImmediatePropagation(),!1}}}),i.config.paste||$(document).on("paste",i.container,function(t){t.preventDefault(),t.stopImmediatePropagation()});o.insert(i)}(t),!0},this.unrestrictField=function(t){var e=o.find("container",t,1);return $(document).off("textInput keydown",e.container),e.config.paste||$(document).off("paste",e.container),o.findDelete("container",t,1),!0},this.formToObj=function(t){return f(t)},this.populateForm=function(t,i){var n,e=$(t);function o(t,e){n=$(e).attr("name"),t.hasOwnProperty(n)&&$(e).val(t[n])}e.find("input").each(function(t,e){o(i,e)}),e.find("texarea").each(function(t,e){o(i,e)})},this.validateForm=function(t){for(var i,n,o,e=$(t),a={},r=!0,s=d.elem_types,l=0;l<s.length;l++)e.find(s[l]).each(function(t,e){i=$(e),e.hasAttribute("required")&&e.hasAttribute("pattern")&&("input"===i[0].tagName&&"submit"!==i.attr("type")||"input"!==i[0].tagName)&&(n=i.attr("pattern"),o=i.val(),n&&((n=new RegExp(n,"g")).test(o)||(a[i.attr("name")]=!1,r=!1)))});return!!r||a}},OGX.Form=new OGX.Form,OGX.Geo=function(t){"use strict";var s=this;void 0===t&&(t={});var a,e,i,n={map:null,markers:[],icon:"",browser_loc:null},l=t;function r(t,e){for(var i,n={},o=0;o<t.length;o++){i=!1;for(var a=0;a<e.length;a++){for(var r=0;r<e[a].address_components.length;r++)if(-1!==e[a].address_components[r].types.indexOf(t[o][0])){n.hasOwnProperty(t[o][1])&&n[t[o][1]].length||(n[t[o][1]]=e[a].address_components[r].short_name),i=!0;break}if(i)break}}return n=s.clean(n)}function c(t){return t*(Math.PI/180)}function d(t){return Array.isArray(t)?new google.maps.LatLng(t[0],t[1]):"function"!=typeof t.lat?new google.maps.LatLng(t.lat,t.lng):t}function o(t){var e={gmap:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),raw:{lat:t.coords.latitude,lng:t.coords.longitude}};i?(i(e),i=null):$(document).trigger(OGX.Geo.BROWSER_LOC_SUCCESS,e)}function u(t){$(document).trigger(OGX.Geo.BROWSER_LOC_ERROR,t)}this._NAME_=OGX.Geo.NAME,this.setMap=function(t){l.map=t,google.maps.event.addListenerOnce(l.map,"tilesloaded",function(){$(document).trigger(OGX.Geo.MAP_LOADED)})},this.getMap=function(){return l.map},this.getMapRadius=function(){return!!l.map&&function(){if(l.map){var t=l.map.getBounds(),e=t.getCenter(),i=t.getNorthEast(),n=e.lat()/57.2958,o=e.lng()/57.2958,a=i.lat()/57.2958,r=i.lng()/57.2958;return 3963*Math.acos(Math.sin(n)*Math.sin(a)+Math.cos(n)*Math.cos(a)*Math.cos(r-o))}return!1}()},this.getCurrentLocation=function(){return!!l.map&&function(){var t=l.map.getCenter();return new google.maps.LatLng(t.lat(),t.lng())}()},this.getBrowserLocation=function(t){i=void 0===t?null:t,navigator.geolocation.getCurrentPosition(o,u,{maximumAge:0,timeout:1e4,enableHighAccuracy:!0})},this.getDistance=function(t,e,i,n){var o=c(i-t),a=c(n-e),r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(c(t))*Math.cos(c(i))*Math.sin(a/2)*Math.sin(a/2),s=6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return Math.round(1e3*s)/1e3},this.addressToLatLng=function(t,i,n){a.geocode({address:t},function(t,e){e==google.maps.GeocoderStatus.OK?i(t[0].geometry.location,n):i(!1,n)})},this.getCityBoundaries=function(t,e,i,n,o){a.geocode({address:t+", "+e+", "+i},function(t,e){e==google.maps.GeocoderStatus.OK?n(t[0].geometry,o):n(!1,o)})},this.latLngToZip=function(t,n,e){t=d(t),a.geocode({location:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=r([["postal_code","zip"]],t);n(i)}})},this.latLngToCountryStateCity=function(t,n,o){t=d(t),a.geocode({location:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=r([["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);n(i,o)}else n(!1,o)})},this.partialAddressToCountryStateCity=function(t,n,o){a.geocode({address:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=r([["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);n(i,o)}else n(!1,o)})},this.latLngToAddress=function(t,n,o){t=d(t),a.geocode({location:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=r([["street_number","number"],["route","street"],["postal_code","zip"],["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);t[0].hasOwnProperty("formatted_address")&&(i.formatted=t[0].formatted_address),n(i,o)}else n(!1,o)})},this.partialAddressToAddress=function(t,n,o){a.geocode({address:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i=r([["street_number","number"],["route","street"],["postal_code","zip"],["country","country"],["administrative_area_level_1","state"],["locality","city"],["administrative_area_level_2","city"]],t);t[0].hasOwnProperty("formatted_address")&&(i.formatted=t[0].formatted_address),i.lat=t[0].geometry.location.lat(),i.lng=t[0].geometry.location.lng(),n(i,o)}else n(!1,o)})},this.zipToAddress=function(t,e,i){this.partialAddressToAddress(zip,e,i)},this.zipToLatLng=function(t,n,o){a.geocode({address:t},function(t,e){if(e===google.maps.GeocoderStatus.OK){var i={};i.lat=t[0].geometry.location.lat(),i.lng=t[0].geometry.location.lng(),n(i,o)}else n(!1,o)})},this.getRoute=function(i){var t={start:!1,end:!1,waypoints:!1,optimize:!0,mode:OGX.Geo.TRAVEL_MODE_CAR,callback:!1,params:!1};for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e]);var n=new google.maps.DirectionsService,o={origin:i.start,destination:i.end,travelMode:i.mode};i.waypoints&&(o.waypoints=i.waypoints,i.optimize&&(o.optimizeWaypoints=!0)),n.route(o,function(t,e){e===google.maps.DirectionsStatus.OK?i.callback(t,i.params):i.callback(!1,i.params)})},this.calcRouteMinutes=function(t){for(var e=0,i=0;i<t.legs.length;i++)e+=t.legs[i].duration.value;return e=Math.round(e/60)},this.drawRoute=function(t){(e=e||new google.maps.DirectionsRenderer).setMap(l.map),e.setDirections(t)},this.clearMap=function(){l.map&&e&&e.setMap(null)},this.latLngToLoc=function(t,e){return new google.maps.LatLng(t,e)},this.clean=function(t,e){var i;if(void 0===e&&(e=!1),t.hasOwnProperty("city")&&t.hasOwnProperty("vicinity")&&-1!==t.vicinity.indexOf(",")&&(i=new RegExp(", ([a-z -']+)$","gi").exec(t.vicinity))&&1<i.length&&(t.city===i[1]?t.vicinity=t.vicinity.replace(i[0],""):t.city?t.city.length>i[1].length&&(t.city=i[1],t.vicinity=t.vicinity.replace(i[0],"")):t.city=i[1]),e)for(var n in t)-1===e.indexOf(n)&&delete t[n];return t},"undefined"!=typeof google&&void 0!==google.maps?(a=new google.maps.Geocoder,function(){for(var t in n)l.hasOwnProperty(t)||(l[t]=n[t])}(),l.map&&l.markers.length):$(document).trigger(OGX.Geo.ERROR_GMAP)},OGX.Geo.NAME="Geo",OGX.Geo.ERROR="GEO_error",OGX.Geo.ERROR_GMAP="GEO_GMAP_ERROR",OGX.Geo.TRAVEL_MODE_CAR="DRIVING",OGX.Geo.TRAVEL_MODE_TRANSIT="TRANSIT",OGX.Geo.TRAVEL_MODE_WALK="WALKING",OGX.Geo.TRAVEL_MODE_BIKE="BICYCLING",OGX.Geo.BROWSER_LOC_SUCCESS="GEO_BROWSER_LOC_SUCCESS",OGX.Geo.BROWSER_LOC_ERROR="GEO_BROWSER_LOC_ERROR",OGX.Geo.MAP_LOADED="GEO_MAP_LOADED",require("Ghost","Uxi"),OGX.Ghost=function(t){construct(this,"Ghost"),this.el=$(t.container),this._NAME_=OGX.Ghost.NAME,css="ogx_ghost",t.hasOwnProperty("css")&&(css+=" "+t.css),this.el.addClass(css),delete css},OGX.Ghost.NAME="Ghost",require("GridSwiper","Uxi","Touch"),OGX.GridSwiper=function(t){construct(this,"GridSwiper");var s,l,c,d,e,i,n,o,a,r,u,_,h=this,f=t,p={map:[[!0,!0,!0],[!0,!0,!0],[!0,!0,!0]],axis:{x:!0,y:!0},loop:!0,start:!1,chromeos:!1},g=!1,m={x:null,y:null},y={x:0,y:0},v=".ogx_grid_swiper_cell",x={x:0,y:0},O={x:0,y:0},b=(new Date).getTime()+Math.round(1e3*Math.random()),w=[];function G(t){t?s.on(h.touch.down,X):s.off(h.touch.down,X)}function X(t){g=!1,o=n=i=e=0,t=Y(t),m.x=t.pageX,m.y=t.pageY,C(!0)}function E(t){t?$("body").on(h.touch.up,T):$("body").off(h.touch.up,T)}function T(t){C(!1),D()}function D(t,e,i){var n,o;void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!0),i&&S(!0),l.addClass("ogx_grid_swiper_anim"),y=A(l),n=-1*Math.round((y.x+t)/c)*c*-1,o=-1*Math.round((y.y+e)/d)*d*-1,l.css({transform:"translate3d("+n+"px, "+o+"px, 0px)"})}function C(t){t?(L(!0),s.on(h.touch.move,M)):(L(!1),s.off(h.touch.move,M))}function M(t){t=Y(t),o=n=i=e=0,g||(f.axis.x&&Math.abs(t.pageX-m.x)>Math.abs(t.pageY-m.y)?g="x":f.axis.y&&Math.abs(t.pageX-m.x)<Math.abs(t.pageY-m.y)&&(g="y")),g&&(f.axis.x&&"x"===g?(e=Math.abs(t.pageX-m.x),n=0<t.pageX-m.x?1:-1):f.axis.y&&"y"===g&&(i=Math.abs(t.pageY-m.y),o=0<t.pageY-m.y?1:-1))}function L(t){t?_=_||setInterval(N,10):_&&(clearInterval(_),_=null)}function N(){if(f.axis.x&&"x"===g&&e&&n&&e<=c){if(!f.loop&&(x.x+-1*n<0||x.x+-1*n>f.map[0].length-1))return;if((a=(x.x+-1*n)%f.map[0].length)<0&&(a=Math.abs(f.map[0].length+a)),!1===f.map[O.y][a])return;u=e*n,l.css({transform:"translate3d("+(-1*x.x*c+u)+"px, "+y.y+"px, 0px)"})}else if(f.axis.y&&"y"===g&&i&&o&&i<=d){if(!f.loop&&(x.y+-1*o<0||x.y+-1*o>f.map.length-1))return;if((r=(x.y+-1*o)%f.map.length)<0&&(r=Math.abs(f.map.length+r)),!1===f.map[r][O.x])return;u=i*o,l.css({transform:"translate3d("+y.x+"px, "+(-1*x.y*d+u)+"px, 0px)"})}}function S(t){t?(l.off("transitionend"),l.on("transitionend",function(){l.off("transitionend"),l.removeClass("ogx_grid_swiper_anim"),y=A(l);var t={x:null,y:null};t.x=-1*Math.round(y.x/c),t.y=-1*Math.round(y.y/d),x.x!==t.x?(n=x.x>t.x?1:-1,x.x=t.x,O.x=k(x).x,-1===n?(l.children(v+"[data-y="+(x.y-1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(v+"[data-y="+(x.y+1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(v+"[data-x="+(x.x-2)+"][data-y="+x.y+"]").attr("data-x",x.x+1).css("left",(x.x+1)*c),s.trigger(OGX.GridSwiper.SWIPE_LEFT,{cell:O,point:x}),I(w=[{x:x.x+1,y:x.y},{x:x.x,y:x.y-1},{x:x.x,y:x.y+1}])):(l.children(v+"[data-y="+(x.y-1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(v+"[data-y="+(x.y+1)+"]").attr("data-x",x.x).css("left",x.x*c),l.children(v+"[data-x="+(x.x+2)+"][data-y="+x.y+"]").attr("data-x",x.x-1).css("left",(x.x-1)*c),s.trigger(OGX.GridSwiper.SWIPE_RIGHT,{cell:O,point:x}),I(w=[{x:x.x-1,y:x.y},{x:x.x,y:x.y-1},{x:x.x,y:x.y+1}])),R()):x.y!==t.y&&(o=x.y>t.y?1:-1,x.y=t.y,O.y=k(x).y,-1===o?(l.children(v+"[data-x="+(x.x-1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(v+"[data-x="+(x.x+1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(v+"[data-y="+(x.y-2)+"][data-x="+x.x+"]").attr("data-y",x.y+1).css("top",(x.y+1)*d),s.trigger(OGX.GridSwiper.SWIPE_UP,{cell:O,point:x}),I(w=[{x:x.x,y:x.y+1},{x:x.x-1,y:x.y},{x:x.x+1,y:x.y}])):(l.children(v+"[data-x="+(x.x-1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(v+"[data-x="+(x.x+1)+"]").attr("data-y",x.y).css("top",x.y*d),l.children(v+"[data-y="+(x.y+2)+"][data-x="+x.x+"]").attr("data-y",x.y-1).css("top",(x.y-1)*d),s.trigger(OGX.GridSwiper.SWIPE_DOWN,{cell:O,point:x}),I(w=[{x:x.x,y:x.y-1},{x:x.x-1,y:x.y},{x:x.x+1,y:x.y}])),R()),g=0})):l.off("transitionend")}function A(t){var e=t.css("transform");return"none"===e?0:(e=(e=(e=e.substr(7)).substr(0,e.length-1)).split(","),{x:Number(e[4]),y:Number(e[5])})}function Y(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}function k(t){var e={x:0,y:0};return e.x=t.x%f.map[0].length,e.x<0&&(e.x=Math.abs(f.map[0].length+e.x)),e.y=t.y%f.map.length,e.y<0&&(e.y=Math.abs(f.map.length+e.y)),e}function I(t){for(var e,i={x:null,y:null},n=0;n<t.length;n++){if(t[n].y<0||t[n].y>f.map.length-1){if(!f.loop)return!1;i.y=k(t[n]).y}else i.y=t[n].y;if(t[n].x<0||t[n].x>f.map[0].length-1){if(!f.loop)return!1;i.x=k(t[n]).x}else i.x=t[n].x;e=f.map[i.y][i.x],P(t[n],e)}}function P(t,e){var i=!1;switch(typeof e){case"string":l.children(v+'[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(v+"_content:first").html(e);break;case"function":(i=e(t,k(t),{x:t.x-x.x,y:t.y-x.y},l.children(v+'[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(v+"_content:first")[0]))&&l.children(v+'[data-x="'+t.x+'"][data-y="'+t.y+'"]').children(v+"_content:first").html(i);break;case"object":var n='.ogx_grid_swiper[data-ogx-id="'+b+'"] > .ogx_grid_swiper_container > '+v+'[data-x="'+t.x+'"][data-y="'+t.y+'"] > '+v+"_content",o=k(t);for(var a in e){e[a].id="cell_"+o.x+"_"+o.y;break}e=OGX.OML.replaceNodeName(e,n);var r=h.nodes.find("id","cell_"+o.x+"_"+o.y,1);r&&h.remove(r._NAME_,r.id),$(n).empty(),OGX.OML.render(h,e,{abs:t,rel:k(t)}),R()}}function R(){for(var t=0;t<h.nodes.length;t++)h.nodes[t].id==="cell_"+O.x+"_"+O.y?h.nodes[t].focus():h.nodes[t].blur()}function W(){w=[],f.axis.x&&(w.push({x:f.start.x-1,y:f.start.y}),w.push({x:f.start.x+1,y:f.start.y})),w.push({x:f.start.x,y:f.start.y}),f.axis.y&&(w.push({x:f.start.x,y:f.start.y-1}),w.push({x:f.start.x,y:f.start.y+1})),I(w)}function H(){f.map.length||(f.map=[[]],f.axis.y=!1),f.map.length&&!Array.isArray(f.map[0])&&(f.map=[f.map],f.axis.y=!1),f.start||(f.start={x:null,y:null},f.start.y=Math.floor(f.map.length/2),f.start.x=Math.floor(f.map[0].length/2))}function z(){var t=f.start.x*-c,e=f.start.y*-d,i=f.start.y-1,n=f.start.x,o='<div class="ogx_grid_swiper_container" style="transform:translate3d('+t+"px, "+e+'px, 0px);">',a=-1*t,r=-1*e-d;f.axis.y&&(o+='<div class="ogx_grid_swiper_cell" style="left:'+a+"px; top:"+r+'px;" data-x="'+n+'" data-y="'+i+'"><div class="ogx_grid_swiper_cell_content"></div></div>',o+='<div class="ogx_grid_swiper_cell" style="left:'+a+"px; top:"+(r+2*d)+'px;" data-x="'+n+'" data-y="'+(2+i)+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),o+='<div class="ogx_grid_swiper_cell" style="left:'+a+"px; top:"+(r+d)+'px;" data-x="'+n+'" data-y="'+(1+i)+'"><div class="ogx_grid_swiper_cell_content"></div></div>',f.axis.x&&(o+='<div class="ogx_grid_swiper_cell" style="left:'+(a-c)+"px; top:"+-1*e+'px;" data-x="'+(n-1)+'" data-y="'+f.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>',o+='<div class="ogx_grid_swiper_cell" style="left:'+(a+c)+"px; top:"+-1*e+'px;" data-x="'+(n+1)+'" data-y="'+f.start.y+'"><div class="ogx_grid_swiper_cell_content"></div></div>'),o+="</div>",s.html(o),l=s.children(".ogx_grid_swiper_container:first"),x.x=f.start.x,x.y=f.start.y,y.x=t,y.y=e,O.x=f.start.x,O.y=f.start.y}this._NAME_=OGX.GridSwiper.NAME,this.el=null,this.enable=function(){G(!0),E(!0)},this.disable=function(){G(!1),E(!1),L(!1)},this.resize=function(){S(!1),l.removeClass("ogx_grid_swiper_anim"),c=s.width(),d=s.height();var t=x.x*-c,e=x.y*-d;l.children(v+"[data-y="+(x.y-1)+"]").css({top:(x.y-1)*d,left:x.x*c}),l.children(v+"[data-y="+x.y+"]").css({top:x.y*d,left:x.x*c}),l.children(v+"[data-y="+(x.y+1)+"]").css({top:(x.y+1)*d,left:x.x*c}),l.children(v+"[data-x="+(x.x-1)+"]").css({top:x.y*d,left:(x.x-1)*c}),l.children(v+"[data-x="+(x.x+1)+"]").css({top:x.y*d,left:(x.x+1)*c}),l.css("transform","translate3d("+t+"px, "+e+"px, 0px"),C(!1),setTimeout(function(){D(0,0,!1),l.addClass("ogx_grid_swiper_anim")},0)},this.setMap=function(t,e){f.map=t,void 0!==e&&(f.start=e),H(),z(),W()},this.setMapCell=function(t,e){f.map[t.y]||(f.map[t.y]=[]),f.map[t.y][t.x]=e},this.getMapCell=function(t){return 0<t.y&&f.map.length<t.y&&0<t.x&&f.map[t.y].length<t.x&&f.map[t.y][t.x]},this.getCells=function(){var i,n,o,a,r=[];return l.children(v).each(function(t,e){i=$(e),n={x:Number(i.attr("data-x")),y:Number(i.attr("data-y"))},o=k(n),a={x:n.x-x.x,y:n.y-x.y},r.push({abs:n,rel:o,offset:a,element:e})}),r},this.getCellContent=function(t){return l.children(v+"[data-x="+t.x+"][data-y="+t.y+"]").children(v+"_content:first")[0]},this.getCurrentCell=function(){return O},this.renderCellContent=function(t){I([t])},this.setTopCell=function(t){this.setOffsetCell({x:0,y:-1},t)},this.setBottomCell=function(t){this.setOffsetCell({x:0,y:1},t)},this.setLeftCell=function(t){this.setOffsetCell({x:-1,y:0},t)},this.setRightCell=function(t){this.setOffsetCell({x:1,y:0},t)},this.setOffsetCell=function(t,e){var i={x:t.x+x.x,y:t.y+x.y};this.setMapCell(i,e)},this.getOffsetCell=function(t){var e={x:t.x+x.x,y:t.y+x.y};return this.getMapCell(e)},this.getOffsetCellContent=function(t){var e={x:t.x+x.x,y:t.y+x.y};return this.getCellContent(e)},this.swipeRight=function(){D(-c)},this.swipeLeft=function(){D(c)},this.swipeUp=function(){D(0,-d)},this.swipeDown=function(){D(0,d)},OGX.Data.merge(f,p),h.el=s=$(f.container),s.addClass("ogx_grid_swiper"),s.attr("data-ogx-id",b),c=s.width(),d=s.height(),H(),z(),W()},OGX.GridSwiper.NAME="GridSwiper",OGX.GridSwiper.SWIPE_LEFT="GridSwiperSwipeLeft",OGX.GridSwiper.SWIPE_RIGHT="GridSwiperSwipeRight",OGX.GridSwiper.SWIPE_UP="GridSwiperSwipeUp",OGX.GridSwiper.SWIPE_DOWN="GridSwiperSwipeDown",require("GroupedList","Uxi","Touch"),OGX.GroupedList=function(t){construct(this,"GroupedList");var i,a,s,r,l,c=this,d=t,e={group_by:"name",group_mode:null,group_param:null,group_order:null,order:null,list:new OGX.List,key:null,swipe:!1,reorder:!1,display:!1,mode:OGX.DynamicList.SELECT_MODE_HIT,scope:["public"]},u={},n="static";function o(t){t?"static"===n&&i.on(c.touch.down,".ogx_grouped_list_item",_):"static"===n&&i.off(c.touch.down,".ogx_grouped_list_item",_)}function _(){i.find(".ogx_grouped_list_selected_item").removeClass("ogx_grouped_list_selected_item"),$(this).addClass("ogx_grouped_list_selected_item");var t=d.list[Number($(this).data("id"))];i.trigger(OGX.GroupedList.SELECT,t)}function h(t){return d.group_order.indexOf(t)}function f(t,e){for(var i,n=0;n<a.nodes.length;n++)if(i=a.nodes[n].val().find(t,e,1))return{list:a.nodes[n],item:i};return!1}function p(t){if("object"==typeof u[t].object){switch(u[t].object._NAME_){case OGX.DynamicList.NAME:u[t].object.el.off(OGX.DynamicList.SELECT),u[t].object.el.off(OGX.DynamicList.UNSELECT);break;case OGX.Tags.NAME:case OGX.Switch.NAME:case OGX.Roulette.NAME:case OGX.RouletteTree.NAME:u[t].object.el.off(OGX[u[t].object._NAME_].CHANGE);break;default:u[t].object.off("input")}d.list.removeFilter(t),delete u[t],r=d.list.filter(),l=!0,setTimeout(m,0)}else u[t].object.off("input");return!0}function g(t,e){for(var i=u[t].getSelection(),n=[],o=0;o<i.length;o++)n.push(i[o][e]);return n}function m(){var t=!1,e=!1;if(d.list&&(t=d.list,l&&(t=r),t.length&&(e=s,s=t.group(d.group_by,d.group_mode,d.group_param))),t&&t.length){if(JSON.stringify(e)!==JSON.stringify(s)){c.find(OGX.NestList.NAME,c.id+"_nests","remove");var i=function(){var t='.ogx_grouped_list[data-ogx-id="'+c.id+'"]',e={};e[t+":NestList"]={id:c.id+"_nests",list:[],"node:OML":[]};var i,n=[],o=OGX.Data.clone(d.group_order);for(var a in s)i=d.group_order?d.group_order.indexOf(a):n.length,e[t+":NestList"].list.push({title:a}),n[i]={"default:DynamicList":{list:s[a],key:d.key,mode:d.mode,display:d.display,swipe:d.swipe,reorder:d.reorder,order:d.order}};for(var r=0;r<n.length;r++)void 0===n[r]&&(n.splice(r,1),o.splice(r,1),r--);return e[t+":NestList"]["node:OML"]=n,e[t+":NestList"].order=o,e}();OGX.OML.render(c,i),a=c.find(OGX.NestList.NAME,c.id+"_nests")}}else s=!1,c.el.empty()}this._NAME_=OGX.GroupedList.NAME,this.el=null,this.enable=function(){o(!0)},this.disable=function(){o(!1)},this.scope=function(t){return void 0!==t?(d.scope=t,a.scope(t),!0):d.scope},this.val=function(t){if(void 0===t)return d.list;t.hasOwnProperty("insert")||(t=new OGX.List(t));var e=d.list.getFilters();"{}"!==JSON.stringify(e)&&(l=!0,t.setFilters(e),r=t.filter()),d.list=t,setTimeout(m,0)},this.nests=function(){return a||!1},this.bind=function(t){return!u.hasOwnProperty(t.property)&&function(n){n.hasOwnProperty("mode")||(n.mode="eqjson");if("object"==typeof n.object)switch((u[n.property]=n).object._NAME_){case OGX.DynamicList.NAME:d.list.removeFilter(n.property);var i=g(n.property,n.remote_property);d.list.addFilter(n.property,n.mode,i),u[n.property].object.el.on(OGX.DynamicList.SELECT,function(t,e){return d.list.removeFilter(n.property),i=u[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||u[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?u[n.property].object.getSelection()[0][__object.remote_property]:g(n.property,n.remote_property),d.list.addFilter(n.property,n.mode,i),r=d.list.filter(),l=!0,setTimeout(m,0),!1}),u[n.property].object.el.on(OGX.DynamicList.UNSELECT,function(t,e){return d.list.removeFilter(n.property),0<(i=u[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_SINGLE||u[n.property].object.mode()===OGX.DynamicList.SELECT_MODE_TOGGLE?[]:g(n.property,n.remote_property)).length&&d.list.addFilter(n.property,n.mode,i),r=d.list.filter(),l=!0,setTimeout(m,0),!1});break;case OGX.Tags.NAME:case OGX.Switch.NAME:case OGX.Roulette.NAME:d.list.removeFilter(n.property),d.list.addFilter(n.property,n.mode,n.object.val()),u[n.property].object.el.on(OGX[n.object._NAME_].CHANGE,function(t,e){return d.list.removeFilter(n.property),d.list.addFilter(n.property,n.mode,u[n.property].object.val()),r=d.list.filter(),l=!0,setTimeout(m,0),!1});break;case OGX.RouletteTree.NAME:for(var t=u[n.property].object.val(),e=0;e<t.length;e++)d.list.removeFilter(t[e].group),null!==t[e].value&&d.list.addFilter(t[e].group,n.mode,t[e].value);u[n.property].object.el.on(OGX.RouletteTree.CHANGE,function(t,e){for(var i=0;i<e.length;i++)d.list.removeFilter(e[i].group),null!==e[i].value&&d.list.addFilter(e[i].group,n.mode,e[i].value);return r=d.list.filter(),l=!0,setTimeout(m,0),!1})}else if("string"==typeof n.object){if(0===$(n.object).length)return!1;n.object=$(n.object);var o=(u[n.property]=n).object.val();switch(u[n.property].hasOwnProperty("min_length")?(u[n.property].last_val=o).length>=u[n.property].min_length&&(d.list.removeFilter(n.property),d.list.addFilter(n.property,n.mode,o)):(d.list.removeFilter(n.property),d.list.addFilter(n.property,n.mode,o)),n.object.attr("type").toLowerCase()){case"text":case"number":case"email":case"password":case"tel":u[n.property].object.on("input",function(){return o=$(this).val(),d.list.removeFilter(n.property),u[n.property].hasOwnProperty("min_length")?o.length<u[n.property].min_length&&u[n.property].last_val.length>=u[n.property].min_length||o.length>=u[n.property].min_length?(o.length>=u[n.property].min_length&&d.list.addFilter(n.property,n.mode,o),r=d.list.filter(),l=!0,u[n.property].last_val=o,setTimeout(m,0)):u[n.property].last_val=o:(o.length&&d.list.addFilter(n.property,n.mode,o),r=d.list.filter(),l=!0,setTimeout(m,0)),!1});break;case"range":var a;u[n.property].object.on("input",function(){return a=Number($(this).attr("min")),d.list.removeFilter(n.property),d.list.addFilter(n.property,n.mode,[a,$(this).val()]),r=d.list.filter(),l=!0,setTimeout(m,0),!1})}}return!0}(t)},this.unbind=function(t){return!!u.hasOwnProperty(t)&&p(t)},this.filter=function(){return r=d.list.filter(),l=!0,setTimeout(m,0),!0},this.unfilter=function(){return l=!1,setTimeout(m,0),!0},this.addFilter=function(t,e,i){return d.list.addFilter(t,e,i)},this.removeFilter=function(t,e,i){return d.list.removeFilter(t,e,i)},this.resetFilters=function(){return d.list.resetFilters()},this.getFilters=function(){return d.list.getFilters()},this.addGroup=function(t,e,i){var n={title:t,scope:d.scope},o={};void 0===e&&(e=[]),o["default:DynamicList"]={list:e,key:d.key,display:d.display,swipe:d.swipe,reorder:d.reorder},a.addNest(n,o,i),d.group_order.insert(t,i),d.list=d.list.concat(e)},this.removeGroup=function(t){return!!this.getGroupList(t)&&(a.removeNest(t),d.list.findDelete(d.group_by,t),!0)},this.addToGroup=function(t,e){var i=this.getGroupList(t);i&&(i.insert(e),d.list.push(e),setTimeout(function(){a.updateNestHeight(t)},0))},this.removeFromGroup=function(t,e,i){2===arguments.length&&(i=e,e=d.key);var n=this.getGroupList(t);n&&(n.findDelete(e,i,1),d.list.findDelete(e,i,1),n.val().length?setTimeout(function(){a.updateNestHeight(t)},0):this.removeGroup(t))},this.updateGroupItem=function(t,e,i,n){this.getGroupList(t).update(e,i,n,!1,1),d.list.findUpdate(e,i,n,1)},this.replaceGroupItem=function(t,e,i,n){this.getGroupList(t).replace(e,i,n),d.list.findReplace(e,i,n,1)},this.getGroupList=function(t){var e=h(t);return a.nodes[e]},this.addItem=function(t){var e=t[d.group_by];if(-1===d.group_order.indexOf(e)){var i=h(e);-1!==i?this.addToGroup(e,[t],i):this.addGroup(e,[t])}else this.addToGroup(e,t);setTimeout(function(){a.updateNestHeight(e)},0)},this.removeItem=function(t,e){d.key&&1===arguments.length&&(e=t,t=d.key);var i=d.list.find(t,e,1);if(i){var n=i[d.group_by];return this.removeFromGroup(n,t,e),setTimeout(function(){a.updateNestHeight(n)},0),!0}return!1},this.replaceItem=function(t,e,i){d.key&&2===arguments.length&&(e=t,t=d.key);var n=f(t,e);return!!n&&(n.item[d.group_by]!==i[d.group_by]?(n.list.findDelete(t,e,1),d.list.findDelete(t,e,1),this.addItem(i),setTimeout(function(){a.updateNestHeight(n.item[d.group_by]),a.updateNestHeight(i[d.group_by])},0)):n.list.replace(t,e,i),!0)},this.updateItem=function(t,e,i,n){if(d.key){var o=arguments.length;void 0!==n&&o--,2===o&&(i=e,e=t,t=d.key)}var a=f(t,e);if(a){if(i.hasOwnProperty(d.group_by)&&a.item[d.group_by]!==i[d.group_by]){a.list.findDelete(t,e,1);var r=d.list.findUpdate(t,e,1);r=OGX.Data.merge(r,i,!0,!1,n),this.addItem(r)}else a.list.update(t,e,i,n,1);return!0}return!1},this.render=function(){return setTimeout(m,0),!0},this.refresh=function(){var t=i.find(".ogx_grouped_list_selected_item:first");if(0<t.length){var e=t.data("id");t.html(OGX.Templater.templatize(d.list[e],d.template))}},this.destroy=function(){!function(){for(var t in u)p(t)}(),o(!1),a.destroy()},OGX.Data.merge(d,e),0<d.list.length&&!d.list.hasOwnProperty("insert")&&(d.list=new OGX.List(d.list)),d.group_order&&!d.group_order.hasOwnProperty("insert")&&(d.group_order=new OGX.List(d.group_order)),d.display&&d.display.hasOwnProperty("css")&&("object"!=typeof d.display.css&&d.display.css?d.display.css+=" ogx_grouped_list_item":d.display.hasOwnProperty("add")?d.display.add="ogx_grouped_list_item "+d.display.add:d.display.add="ogx_grouped_list_item"),s=!1,c.el=i=$(d.container),i.addClass("ogx_grouped_list"),m()},OGX.GroupedList.NAME="GroupedList",OGX.GroupedList.SELECT="GroupedListSelect",require("Html","Uxi"),OGX.Html=function(t){construct(this,"Html"),this._NAME_=OGX.Html.NAME,void 0!==t&&t&&(this.el=$(t.container),setTimeout(function(){OGX.HtmlRender(t)},0))},OGX.HtmlRender=function(t){var e=$(t.container),i=new OGX.Display(t);data=!1,t.data&&Object.keys(t.data).length&&(data=t.data),e.html(i.html(data)),t.css&&e.addClass(i.css(data)),t.hasOwnProperty("id")&&t.id&&"#"===t.id.substr(0,1)&&e.attr("id",t.id.substr(1))},OGX.Html.NAME="Html",require("Iceberg","Uxi","Touch"),OGX.Iceberg=function(t){construct(this,"Iceberg");var i,n,o,a,s=this,e={left:0,right:0,top:0,bottom:0,min:50,drag:!0,flatten:!1,"node:OML":{}},l=t,c=!1,r="normal",d="main",u={left:null,main:null,right:null,top:null,bottom:null},_=[0,0,0],h=0,f=0,p=0,g=0;function m(t){for(var e in u)u[e]&&u[e].instance&&(t===e?u[e].instance.focus():u[e].instance.blur())}function y(){c.hasClass("ogx_iceberg_anim")||(c.off("transitionend"),_=b(c))}function v(t){var e=0;return t.dirY&&t.distY>t.distX&&(e=1),e}function x(t){l.drag&&t.dist&&((o=v(t))||-1===["main","left","right"].indexOf(d)?-1!==["main","top","bottom"].indexOf(d)&&t.dirY&&t.distY&&(n=_[1]+t.distY*t.dirY)<=g&&p<=n&&c.css({transform:"translate3d(0, "+n+"px, 0)"}):t.dirX&&t.distX&&(i=_[0]+t.distX*t.dirX)<=f&&h<=i&&c.css({transform:"translate3d("+i+"px, 0, 0)"}))}function O(t){if(n=i=0,o=v(t),t.swipe&&t.dist){var e;switch(t.swipe=!1,d){case"main":-1===t.dirX&&l.right&&!o?(i=-u.right.outerWidth(),e="right",t.swipe=!0):1===t.dirX&&l.left&&!o?(i=u.left.outerWidth(),e="left",t.swipe=!0):1===t.dirY&&l.top&&o?(n=u.top.outerHeight(),e="top",t.swipe=!0):-1===t.dirY&&l.bottom&&o&&(n=-u.bottom.outerHeight(),e="bottom",t.swipe=!0);break;case"left":-1!==t.dirX||o||(i=0,e="main",t.swipe=!0);break;case"right":1!==t.dirX||o||(i=0,e="main",t.swipe=!0);break;case"top":-1===t.dirY&&o&&(n=0,e="main",t.swipe=!0);break;case"bottom":1===t.dirY&&o&&(n=0,e="main",t.swipe=!0)}a=o?1===t.dirY?OGX.Iceberg.SWIPE_DOWN:OGX.Iceberg.SWIPE_UP:1===t.dirX?OGX.Iceberg.SWIPE_RIGHT:OGX.Iceberg.SWIPE_LEFT,t.swipe&&t.dist&&(c.addClass("ogx_iceberg_anim"),c.on("transitionend",function(){c.off("transitionend"),c.removeClass("ogx_iceberg_anim"),_=b(c),m(d=e),c.trigger(a,d)}),c.css({transform:"translate3d("+i+"px, "+n+"px, 0)"}))}else if(t.dist){switch(n=i=0,d){case"left":i=u.left.outerWidth();break;case"right":i=-u.right.outerWidth();break;case"top":n=u.top.outerHeight();break;case"bottom":n=-u.bottom.outerHeight()}c.addClass("ogx_iceberg_anim"),c.on("transitionend",function(){c.off("transitionend"),c.removeClass("ogx_iceberg_anim"),_=b(c),c.trigger(OGX.Iceberg.RESTORE,d)}),c.css({transform:"translate3d("+i+"px, "+n+"px, 0)"})}}function b(t){var e=t[0].style.transform;if(e=e.match(/translate3d\(([0-9px%,\.\- ]+)\)/)){e=e[1].split(",");for(var i=0;i<e.length;i++)e[i]=Number(e[i].split("px")[0]);return e}return[0,0,0]}function w(){var t;for(var e in u)u[e]&&((t=u[e].children(":first")).length&&t[0].hasAttribute("data-ogx-id")?u[e].instance=s.nodes.find("id",String(t.data("ogx-id")),1):u[e].instance=!1)}this._NAME_=OGX.Iceberg.NAME,this.el=null,this.show=function(t,e){if(void 0===t&&(t=!1),"normal"===r)for(var i in u)if(u[i]&&u[i].instance&&u[i].instance.id===e){if(!t)return this.val(i),!0;if(u[i].instance._NAME_===u[i].instance.NAME)return this.val(i),!0}return!1},this.val=function(t){if(void 0===t)return d;if(n=i=0,"normal"===r){switch(t){case"left":i=u.left.outerWidth();break;case"top":n=u.top.outerHeight();break;case"main":i=0;break;case"right":i=u.left.outerWidth();break;case"bottom":n=-u.bottom.outerHeight()}u[d].instance&&u[d].instance.blur(),u[d=t].instance&&u[d].instance.focus(),c.css({transform:"translate3d("+i+"px, "+n+"px, 0)"})}},this.enable=function(){"flattened"!==r&&(this.touch.swipe.enable(),setTimeout(function(){m(d)},0))},this.disable=function(){this.touch.swipe.disable()},this.resize=function(){u.left&&(f=u.left.outerWidth()),u.right&&(h=-u.right.outerWidth()),u.top&&(g=u.top.outerHeight()),u.bottom&&(p=-u.bottom.outerHeight()),l.flatten&&("flattened"!==r&&this.el.outerWidth()>=l.flatten?(r="flattened",_=b(c),c.addClass("ogx_iceberg_views_flattened").css("transform","translate3d(0px, 0px, 0px)"),c.children(".ogx_iceberg_view").addClass("ogx_iceberg_view_flattened"),this.disable()):"flattened"===r&&this.el.width()<l.flatten&&(r="normal",c.children(".ogx_iceberg_view").removeClass("ogx_iceberg_view_flattened"),c.removeClass("ogx_iceberg_views_flattened").css("transform","translate3d("+_[0]+"px, 0px, 0px)"),this.enable()))},OGX.Data.merge(l,e),width=Math.round($(l.container).innerWidth()),height=$(l.container).innerHeight(),s.el=$(l.container),s.el.addClass("ogx_iceberg"),function(){var t,e,i='<div class="ogx_iceberg_views ogx_hw">',n={},o='.ogx_iceberg[data-ogx-id="'+s.id+'"] > .ogx_iceberg_views > .ogx_iceberg_view[data-ogx-panel-id="';for(var a in l["node:OML"])for(var r in l["node:OML"][a])0===r.indexOf("left")&&(i+='<div class="ogx_iceberg_view_left ogx_view ogx_iceberg_view" data-ogx-panel-id="left" style="width:'+(isNaN(l.left)?l.left:l.left+"px")+';"></div>',n.left=o+'left"]',u.left=!0),0===r.indexOf("top")&&(i+='<div class="ogx_iceberg_view_top ogx_view ogx_iceberg_view" data-ogx-panel-id="top" style="height:'+(isNaN(l.top)?l.top:l.top+"px")+';"></div>',n.top=o+'top"]',u.top=!0),0===r.indexOf("main")&&(i+='<div class="ogx_iceberg_view_main ogx_view ogx_iceberg_view" data-ogx-panel-id="main"></div>',n.main=o+'main"]'),0===r.indexOf("right")&&(i+='<div class="ogx_iceberg_view_right ogx_view ogx_iceberg_view" data-ogx-panel-id="right" style="width:'+(isNaN(l.right)?l.right:l.right+"px")+';"></div>',n.right=o+'right"]',u.right=!0),0===r.indexOf("bottom")&&(i+='<div class="ogx_iceberg_view_bottom ogx_view ogx_iceberg_view" data-ogx-panel-id="bottom" style="height:'+(isNaN(l.bottom)?l.bottom:l.bottom+"px")+';"></div>',n.bottom=o+'bottom"]',u.bottom=!0);for(s.el.html(i),a=0;a<l["node:OML"].length;a++)for(var r in l["node:OML"][a])t=r.split(":")[0],e=r.replace(t,n[t]),l["node:OML"][a][e]=l["node:OML"][a][r],delete l["node:OML"][a][r];c=s.el.children(".ogx_iceberg_views:first"),u.left&&(u.left=c.children(".ogx_iceberg_view_left:first"),f=u.left.outerWidth()),u.top&&(u.top=c.children(".ogx_iceberg_view_top:first"),g=u.top.outerHeight()),u.main=c.children(".ogx_iceberg_view_main:first"),u.right&&(u.right=c.children(".ogx_iceberg_view_right:first"),h=-u.right.outerWidth()),u.bottom&&(u.bottom=c.children(".ogx_iceberg_view_bottom:first"),p=-u.bottom.outerHeight())}(),setTimeout(w,0),s.touch.swipe.set({x:!0,y:!0,min_x:l.min,min_y:l.min,cb_down:y,cb_swipe:x,cb_up:O}),s.resize()},OGX.Iceberg.NAME="Iceberg",OGX.Iceberg.SHOW="icebergShow",OGX.Iceberg.SWIPE_UP="icebergSwipeUp",OGX.Iceberg.SWIPE_DOWN="icebergSwipeDown",OGX.Iceberg.SWIPE_LEFT="icebergSwipeLeft",OGX.Iceberg.SWIPE_RIGHT="icebergSwipeRight",OGX.Iceberg.RESTORE="icebergRestore",OGX.Loading=function(t){"use strict";var e=this,i=!1,n={display:{css:"ogx_loading",html:" ",anim:OGX.Overlay.FADE}};t.hasOwnProperty("loading")&&t.loading&&setTimeout(function(){e.addLoading()},0),this.hasLoading=function(){return!!i},this.addLoading=function(t){i||(i=!0,void 0===t&&(t={}),OGX.Data.merge(t,n),this.addOverlay(t))},this.removeLoading=function(t){i&&(this.removeOverlay(t),i=!1)}},OGX.Media=function(){"use strict";var i=!1,n={},o=0;function a(t,e,i){var n=$(t).parent().innerWidth(),o=$(t).parent().innerHeight(),a=function(t,e){var i=t.width/t.height,n={};return e.width/e.height<i?(n.width=e.width,n.height=Math.round(t.height*(e.width/t.width))):(n.width=Math.round(t.width*(e.height/t.height)),n.height=e.height),n}({width:e,height:i},{width:n,height:o}),r=(n-a.width)/2,s=(o-a.height)/2;$(t).css("left",r+"px"),$(t).css("top",s+"px"),$(t).prop("width",a.width),$(t).prop("height",a.height)}function r(t){var e=!1;void 0!==t&&t?n.hasOwnProperty(t)&&(e=$(n[t].element)):e=config.container,e&&(e.find(".ogx_video").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth(),a=$(t).parent().innerHeight(),r=o,s=Math.ceil(r/n);s<a&&(r=(s=a)*n),$(t).prop("width",r),$(t).prop("height",s)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_video_resp").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth(),a=$(t).parent().innerHeight(),r=o,s=Math.ceil(r/n);s<a&&(r=(s=a)*n),$(t).prop("width",r),$(t).prop("height",s)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_video_poster").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth(),a=$(t).parent().innerHeight(),r=o,s=Math.ceil(r/n),l=0,c=0;s<a&&(s=a,r=Math.ceil(s*n)),o<r?l=(r-o)/2*-1:r<o&&(l=(o-r)/2*-1),a<s?c=(s-a)/2*-1:s<a&&(c=(a-s)/2*-1),$(t).css("left",l+"px"),$(t).css("top",c+"px"),$(t).prop("width",r),$(t).prop("height",s)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_image_contain").each(function(t,e){a(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_image_cover").each(function(t,e){!function(t,e,i){var n=$(t).parent().innerWidth(),o=n/(e/i),a=($(t).parent().innerHeight()-o)/2;0<a&&(a=0),$(t).parent().css("overflow","hidden"),$(t).prop("width",n),$(t).prop("height",o),$(t).css("top",a+"px")}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_image_fit").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth(),a=o,r=Math.ceil(a/n),s=0;o<a?s=(a-o)/2*-1:a<o&&(s=(o-a)/2*-1),$(t).css("left",s+"px"),$(t).prop("width",a),$(t).prop("height",r)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_image_scale").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth(),a=Math.ceil(o/n);$(t).prop("width",o),$(t).prop("height",a)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}),e.find(".ogx_image_resp").each(function(t,e){!function(t,e,i){var n=e/i,o=$(t).parent().innerWidth();e<o&&(o=e);var a=Math.ceil(o/n);$(t).prop("width",o),$(t).prop("height",a)}(e,parseInt($(e).data("width"),10),parseInt($(e).data("height"),10))}))}function s(t){t?$(window).on("resize",e):$(window).off("resize",e)}function e(){r()}this.resize=function(t){r(t)},this.bind=function(t,e){return!n.hasOwnProperty(t)&&(n[t]={observer:null,element:e},n[t].observer=function(i){var t=new(window.MutationObserver||window.WebKitMutationObserver)(function(t,e){t.forEach(function(t){!function(t){t.find(".ogx_video, .ogx_video_resp, .ogx_video_poster").each(function(t,e){$(e).attr("data-width",$(e).attr("width")),$(e).attr("data-height",$(e).attr("height")),$(e).parent().css("overflow","hidden")}),t.find(".ogx_image_cover, .ogx_image_contain, .ogx_image_fit, .ogx_image_scale, .ogx_image_resp").each(function(t,e){$(e).css("position","relative"),$(e).attr("data-width",$(e).attr("width")),$(e).attr("data-height",$(e).attr("height"))}),setTimeout(r,200)}($(i))}),r(i)});return t.observe(document.querySelector(i),{childList:!0,subtree:!0}),t}(e),o++,i||s(i=!0),!0)},this.unbind=function(t){return!(!n.hasOwnProperty(t)||!n[t].observer)&&(n[t].observer.disconnect(),delete n[t],!--o&&i&&s(!1),!0)}},OGX.Media=new OGX.Media,require("NestList","Uxi"),OGX.NestList=function(t){construct(this,"NestList");var o,a=this,e={scope:["public"],template:'<div class="ogx_nest_list_item {{$dsp}}" data-ogx-nest-id="{{$id}}"><div class="ogx_nest_list_item_head {{$css}}"><span class="ogx_nest_list_item_title">{{$title}}</span><span class="ogx_nest_list_item_icon"></span></div><div class="ogx_nest_list_item_body"><div class="ogx_nest_list_item_content">{{$body}}</div></div></div>',list:new OGX.List,item_default:!1,map:{title:"title",scope:"scope",id:"id"},order:!1,timeout:200},r={title:"",scope:[],open:!0},s={id:0,title:!1,scope:[],height:0,y:0,hidden:!1,open:!0,selector:!1},l=t,c=!1,d=0,u=0,_=0,h={y:0,h:0,way:1},f=new OGX.List;function i(t){t?o.on("click",".ogx_nest_list_item_head",n):o.off("click",".ogx_nest_list_item_head",n)}function n(t){c||(c=!0,p($(this)))}function p(t){var e=t.parent(0).data("ogx-nest-id"),i=!1;t.hasClass("ogx_nest_list_item_head_closed")?(h.way=1,t.addClass("ogx_nest_list_item_head_open").removeClass("ogx_nest_list_item_head_closed"),f.findUpdate("id",e,{open:!0},!1,1),i=!0):(h.way=0,t.removeClass("ogx_nest_list_item_head_open").addClass("ogx_nest_list_item_head_closed"),f.findUpdate("id",e,{open:!1},!1,1));var n=f.find("id",e,1);i?(function(t){var e=g(t);if(e)return e.focus()}(n),o.trigger(OGX.NestList.OPEN,n)):(function(t){var e=g(t);if(e)return e.blur()}(n),o.trigger(OGX.NestList.CLOSE,n)),setTimeout(y,0)}function g(t){var e=$(t.selector).find(".ogx_uxi:first");if(e.length){var i=String(e.data("ogx-id")),n=a.nodes.find("id",i,1);if(n)return n}return!1}function m(t){if(t.hasOwnProperty("scope"))for(var e=0;e<t.scope.length;e++)if(-1!==l.scope.indexOf(t.scope[e]))return!0;return!1}function y(){var t;!function(){var t=0;u=0,h.y=0;for(var e=h.h=0;e<f.length;e++)f[e].y=t,f[e].hidden||(d=d||o.children(".ogx_nest_list_item:eq("+e+")").children(".ogx_nest_list_item_head").outerHeight(!0),u+=d,h.y=t,f[e].open&&(h.y+=f[e].height,t+=f[e].height,u+=f[e].height),h.h=f[e].height);u-=h.h}();for(var e=o.children(".ogx_nest_list_mask:first"),i=0;i<f.length;i++)(t=o.children('.ogx_nest_list_item[data-ogx-nest-id="'+f[i].id+'"]')).removeClass("ogx_nest_list_item_noanim"),t.css("transform","translateY("+f[i].y+"px)");var n="height:"+Math.ceil(u+h.h)+"px !important;";e.on("transitionend",function(){e.off("transitionend"),h.way||o.css("cssText",n),c=!1}),h.way&&o.css("cssText",n),setTimeout(function(){e.css({transform:"translateY("+h.y+"px)"})},0)}function v(t,e){OGX.Data.merge(t,r);var i=OGX.Data.merge(s,t,!0,!0);t.hasOwnProperty(l.map.id)?i.id=t[l.map.id]:(i.id=_,_++);var n=function(t){var e={css:"",dsp:"ogx_nest_list_prep",id:t.id};return e[l.map.title]=t[l.map.title],t.open?e.css="ogx_nest_list_item_head_open":e.css="ogx_nest_list_item_head_closed",OGX.Templater.templatize(e,l.template)}(i);return void 0!==e&&e<l.list.length-1&&0<e?o.children(".ogx_nest_list_item:eq("+e+")").before(n):o.children(".ogx_nest_list_mask:first").before(n),i.selector='.ogx_nest_list[data-ogx-id="'+a.id+'"] > .ogx_nest_list_item[data-ogx-nest-id="'+i.id+'"] > .ogx_nest_list_item_body > .ogx_nest_list_item_content',setTimeout(function(){x(i);var t=$('.ogx_nest_list[data-ogx-id="'+a.id+'"] > .ogx_nest_list_item[data-ogx-nest-id="'+i.id+'"]');i.hidden&&t.addClass("ogx_nest_list_item_hidden"),t.removeClass("ogx_nest_list_prep")},l.timeout),i}function x(t){var e=$(t.selector).outerHeight(!0);t.height=e}function O(){o.empty(),f.clear();var t;o.html('<div class="ogx_nest_list_mask"></div>');for(var e=0;e<l.list.length;e++)t=v(l.list[e],!1),f.push(t),l["node:OML"][e]=OGX.OML.replaceNodeName(l["node:OML"][e],t.selector,"default");setTimeout(y,l.timeout)}function b(){for(var t=[],e=0;e<l.list.length;e++)t[l.order.indexOf(l.list[e][l.map.title])]=l.list[e];return l.list=new OGX.List(t)}function w(){l.list.hasOwnProperty("insert")||(l.list=new OGX.List(l.list));for(var t=0;t<l.list.length;t++)l.item_default?OGX.Data.merge(l.list[t],l.item_default):OGX.Data.merge(l.list[t],r),l.order&&b()}this.el=null,this._NAME_=OGX.NestList.NAME,this.enable=function(){i(!0)},this.disable=function(){i(!1)},this.show=function(t,e){var i=this.find(t,e);i&&p(i.el.parents(".ogx_nest_list_item:first").children(".ogx_nest_list_item_head:first"))},this.scope=function(t){return void 0!==t?(l.scope=t,function(){for(var t,e=0;e<f.length;e++)(t=o.children(f[e].selector)).addClass("ogx_nest_list_item_noanim"),m(f[e])?(f[e].hidden=!1,t.removeClass("ogx_nest_list_item_hidden")):(f[e].hidden=!0,t.addClass("ogx_nest_list_item_hidden"));setTimeout(y,0)}(),!0):l.scope},this.val=function(t){if(void 0===t)return l.list;l.list=t,w(),setTimeout(O,0)},this.addNest=function(t,e,i){var n=v(t,i);if(f.insert(n,i),e=OGX.OML.replaceNodeName(e,n.selector,"default"),OGX.OML.render(this,e),void 0!==i){var o=this.nodes.pop();this.nodes.insert(o,i)}},this.removeNest=function(t){var e=f.findIndex(l.map.title,t);e&&(this.nodes[e.index].kill(),this.nodes.splice(e.index,1),$('.ogx_nest_list[data-ogx-id="'+a.id+'"] > .ogx_nest_list_item[data-ogx-nest-id="'+f[e.index].id+'"]').remove(),f.splice(e.index,1),setTimeout(y,0))},this.updateNestHeight=function(t){var e=f.find(l.map.title,t,1);setTimeout(function(){x(e),y()},0)},OGX.Data.merge(l,e),w(),l.template=l.template.replace("{{$title}}","{{$"+l.map.title+"}}"),a.el=o=$(l.container),o.addClass("ogx_nest_list"),l.list.length&&O()},OGX.NestList.NAME="NestList",OGX.NestList.OPEN="NestListOpen",OGX.NestList.CLOSE="NestListClose",OGX.NestList.READY="NestListReady",OGX.Net={},OGX.Net.loadSounds=function(t,e,i,n){var o=0,a=0,r={};if(Array.isArray(e))a=e.length;else if("object"==typeof e)for(var s in ___files)a++;else e=[e],a=1;if(a)for(var s in e)r[e[s]]=new Audio,r[e[s]].oncanplaythrough=function(){a===++o&&(void 0!==i?i(r,n):$(document).trigger(OGX.Net.SOUNDS_LOADED,r))},r[e[s]].src=t+e[s],r[e[s]].load();else void 0!==i&&i(!1)},OGX.Net.loadJSON=function(t,e,i,n){var o=0,a=0,s={};if(Array.isArray(e))a=e.length;else if("object"==typeof e)for(var r in ___files)a++;else e=[e],a=1;if(a)for(var r in e)l(t,e[r]);else void 0!==i&&i(!1);function l(t,e){$.ajax({dataType:"json",url:t+e}).done(function(t){s[e]=function(t){var e,i,n=JSON.stringify(t),o=/([a-zA-Z0-9_\- ]+\.json)/gm,a=n.match(/:JSON":"([a-zA-Z0-9_\- ]+\.json)"/gm);if(!a||!a.length)return t;for(var r=0;r<a.length;r++)e=a[r].match(o)[0],s.hasOwnProperty(e)&&(i=new RegExp(':JSON":"'+e+'"',"gm"),n=n.replace(i,'":'+JSON.stringify(s[e])));return t=JSON.parse(n)}(t),++o===a&&(void 0!==i?i(s,n):$(document).trigger(OGX.Net.JSON_LOADED,s))})}},OGX.Net.loadFonts=function(t,e,i){if(t.length){for(var n='<div class="ogx_font_loader">',o=0;o<t.length;o++)n+='<span class="'+t[o]+'"></span>';n+="</div>",$("body").append(n),void 0!==e?e(i):$(document).trigger(OGX.Net.FONTS_LOADED,t)}else void 0!==e&&e(!1)},OGX.Net.loadImages=function(t,e,i,n){var o,a=0,r=0,s=[];if(Array.isArray(e))r=e.length;else if("object"==typeof e)for(var l in ___files)r++;else e=[e],r=1;if(r)for(var l in e)(o=new Image).onload=function(){++a===e.length&&(void 0!==i?i(s,n):$(document).trigger(OGX.Net.IMAGES_LOADED,s))},o.src=t+e[l],s.push(o);else void 0!==i&&i(!1)},OGX.Net.SOUNDS_LOADED="Soundsloaded",OGX.Net.JSON_LOADED="Jsonloaded",OGX.Net.FONTS_LOADED="Fontsloaded",OGX.Net.IMAGES_LOADED="Imagesloaded",OGX.Overlay=function(t){"use strict";var e=this,o=!1,a={anim:OGX.Overlay.FADE,display:{css:"",html:" "},index:!1,close_on_click:!1},r=!1,i="mousedown";function s(t){o&&(t?o.on(i,n):o.off(i,n))}function n(){s(!1),e.removeOverlay()}t.hasOwnProperty("overlay")&&t.overlay&&setTimeout(function(){e.addOverlay(t.overlay)},0),this.hasOverlay=function(){return!!o},this.addOverlay=function(t){if("object"!=typeof t&&(t={}),OGX.Data.merge(t,a),t.display.hasOwnProperty("_NAME_")||(t.display=new OGX.Display(t.display)),r=t,!this.hasOverlay()){var e=this.el;r.hasOwnProperty("container")&&(e=$(r.container));var i="z-index:"+(r.zindex?r.zindex:this.topIndex(e))+";",n='<div class="ogx_overlay '+r.display.css()+'" style="'+i+'">'+r.display.html()+"</div>";if(e.prepend(n),(o=e.children(".ogx_overlay:first")).off("transitionend"),r.anim)switch(r.anim){case OGX.Overlay.FADE:setTimeout(function(){o&&o.removeClass("ogx_overlay_fade_out").addClass("ogx_overlay_fade_in")},50)}else o.css("opacity",1)}t.close_on_click&&s(!0)},this.removeOverlay=function(t){if(s(!1),void 0===t&&(t=!1,r&&r.anim&&(t=r.anim)),o)if(t)switch(t){case OGX.Overlay.FADE:o.removeClass("ogx_overlay_fade_in").addClass("ogx_overlay_fade_out"),0<o.css("opacity")?o.on("transitionend",function(){o&&(o.off("transitionend"),o.remove(),o=!1)}):o&&(o.removeClass("ogx_overlay_fade_in").removeClass("ogx_overlay_fade_out"),o.off("transitionend"),o.remove(),o=!1)}else o.remove(),o=!1}},OGX.Overlay.FADE="OverlayFade",OGX.Overlay.REMOVE="OverlayRemove",OGX.Placeholder=function(){},OGX.Placeholder.prototype.placeholders=function(t,e){if(void 0===t||void 0===e)return!1;var i;t.hasOwnProperty("node:OML")||(t["node:OML"]=[]);for(var n=0;n<t["node:OML"].length;n++)for(var o in t["node:OML"][n])if(0===o.indexOf("default")){i=o.split(":")[1],t["node:OML"][n][e[n]+":"+i]=t["node:OML"][n][o],delete t["node:OML"][n][o];break}return t},require("Point","Uxi"),OGX.Point=function(t){construct(this,"Point");var a=this,r=OGX.Data.merge(t,{live:[]}),n=new OGX.List;function s(){for(var t=a.el.width(),e=0;e<a.points.length;e++)if(t>=a.points[e].min&&t<=a.points[e].max)return{id:e,oml:a.points[e].oml};return!1}this.points=[],this.point=null,this.el=$(t.container),this._NAME_=OGX.Point.NAME,this.construct=function(t,e){},this.resize=function(){var t=s();t&&t.id!==this.point&&(this.point=t.id,function(t){for(var e,i=0;i<r.live.length;i++)(e=a.find(!1,r.live[i]))&&(e.sleep(),t&&n.push(e),e.parent.nodes.findDelete("id",e.id,1))}(r.live.length&&!n.length),this.nodes.length&&this.clear(),OGX.OML.render(this,this.points[this.point].oml,r.data,r.route_data,n))},this.oml=function(){return this.points[this.point].oml},a.el=$(r.container),a.el.addClass("ogx_point ogx_view"),function(){var t;for(var e in r)if(-1!==e.indexOf(":")){t=e.split(":");var i,n=JSON.parse(JSON.stringify(r[e]));for(var o in n)0===o.indexOf("default:")&&(i=o.split(":"),n['.ogx_point[data-ogx-id="'+a.id+'"]:'+i[1]]=n[o],delete n[o]);a.points.push({min:parseInt(t[0],10),max:parseInt(t[1],10),oml:n})}a.point=s().id}()},OGX.Point.NAME="Point",require("Popup","Uxi","Placeholder","Touch","Resize","Overlay"),OGX.Popup=function(t){construct(this,"Popup");var r=this,e={container:!1,anim:!1,width:"80%",height:"80%",html:!1,template:!1,title:!1,css:"",icon:!1,icons:!1,view:!1,drag:!1,resize:!1,center:!0,data:{},buttons:[],buttons_enabled:!0,anim:OGX.Popup.FADE,overlay:!1,zindex:!1,chromeos:!1,parent:null},s=t,l=!1,a=!1,c="ogx_popup";function i(){var t=u();r.el.css({transform:"translate3D("+t.x+"px, "+t.y+"px, 0px)"}),r.resizeNodes()}function n(){r.blurNodes(),r.front()}function o(){r.focusNodes()}function d(){r.front()}function u(){var t=a.width(),e=a.height(),i=s.width,n=s.height;if("string"==typeof i&&-1!==i.indexOf("%")&&(i=Number(i.split("%")[0]),i=Math.round(i*t/100)),"string"==typeof n&&-1!==n.indexOf("%")&&(n=Number(n.split("%")[0]),n=Math.round(n*e/100)),s.center)x=Math.round(t/2-i/2),y=Math.round(e/2-n/2),s.drag&&(s.center=!1);else{var o=l.position();x=o.left,y=o.top,x>t&&(x=t-x),x<-i&&(x=0),y>e&&(y=e-n),y<0&&(y=0)}return{x:x,y:y}}function _(t,e,i,n,o){var a=!1;if(void 0!==e?e&&(a=!0):s.anim&&(e=s.anim),t?(r.front(),r.el.trigger(OGX.Popup.SHOW,r)):r.el.trigger(OGX.Popup.HIDE,r),a)switch(e){case OGX.Popup.FADE:t?(l.css("display","flex"),l.addClass(c+"_fade_in")):l.addClass(c+"_fade_out").removeClass(c+"_fade_in"),l.on("transitionend",function(){l.off("transitionend"),t||(l.removeClass(c+"_fade_out"),l.css("display","none")),void 0!==i&&i&&i(n),void 0!==o&&o&&o(r.id)})}else t?l.css({opacity:t,display:"flex"}):l.css("display","none"),void 0!==i&&i&&i(n),void 0!==o&&o&&o(r.id)}function h(t,e){void 0===e&&(e=!1),t?s.buttons_enabled&&!e||(s.buttons_enabled=!0,l.children(".ogx_popup_buttons:first").removeClass(c+"_buttons_disabled"),l.on(r.touch.down,".ogx_popup_button",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$(this).index();l.trigger(OGX.Popup.CLICK_BUTTON,{index:e,value:s.buttons[e]}),"object"==typeof s.buttons[e]&&s.buttons[e].hasOwnProperty("callback")&&s.buttons[e].callback&&(s.buttons[e].hasOwnProperty("params")?s.buttons[e].callback.apply(null,[s.buttons[e].params]):s.buttons[e].callback())})):s.buttons_enabled&&(s.buttons_enabled=!1,l.children(".ogx_popup_buttons:first").addClass(c+"_buttons_disabled"),l.off(r.touch.down,".ogx_popup_button"))}function f(){var t;t=s.index?s.index:s.parent.topIndex();var e=u(),i=s.width,n=s.height;-1===String(i).indexOf("%")&&(i+="px"),-1===String(n).indexOf("%")&&(n+="px");var o="";if(s.icon||s.title||s.icons||s.drag){if(o+='<div class="'+c+'_head">',s.icon&&(o+='<div class="'+c+'_icon" style="background-image:url(\''+s.icon+"')\"></div>"),s.title&&(o+='<div class="'+c+'_title">'+s.title+"</div>"),s.icons){o+='<div class="'+c+'_icons">';for(var a=0;a<s.icons.length;a++)"string"==typeof s.icons[a]?o+='<div class="'+c+'_icons_icon" style="background-image:url(\''+s.icons[a]+"')\"></div>":o+='<div class="'+c+'_icons_icon" style="background-image:url(\''+s.icons[a].icon+"')\"></div>";o+="</div>"}o+="</div>"}o+='<div class="'+c+"_body ogx_view "+s.css+'">',s.html?o+=s.html:s.template&&(o+=OGX.Templater.templatize(s.data,OGX.Templater.getTemplate(s.template))),o+="</div>",s.buttons&&s.buttons.length&&(o+='<div class="'+c+'_buttons">',o+=function(){for(var t="",e=0;e<s.buttons.length;e++)0<s.buttons.length&&("object"==typeof s.buttons[e]?t+='<span class="'+c+'_button">'+s.buttons[e].label+"</span>":t+='<span class="'+c+'_button">'+s.buttons[e]+"</span>");return t}(),o+="</div>"),l.html(o),l.css({width:i,height:n,transform:"translate3d("+e.x+"px, "+e.y+"px, 0)","z-index":t}),r.el=l}this.anim=null,this.el=null,this.floating=!0,this._NAME_=OGX.Popup.NAME,this.enable=function(){s.buttons&&h(!0,!0),this.touch.enable(),this.enableResize()},this.disable=function(){s.buttons&&h(!1),this.touch.disable(),this.disableResize()},this.show=function(t,e,i){_(1,t,e,i),this.focus(!0)},this.hide=function(t,e,i,n){_(0,t,e,i,n),this.blur(!0)},this.center=function(){var t=u();r.el.css({transform:"translate3D("+t.x+"px, "+t.y+"px, 0px)"})},this.move=function(t,e){null===t&&(t=r.el.position().left),null===e&&(e=r.el.position().top),r.el.css({transform:"translate3D("+t+"px, "+e+"px, 0px)"})},this.front=function(){var t=s.parent.topIndex();this.el.css("z-index",t)},this.icon=function(t){if(void 0===t)return s.icon;s.icon=t,this.el.children(".ogx_popup_head:first").children(".ogx_popup_icon:first").css("background-image","url("+t+")")},this.resize=function(){i()},this.buttons=function(t){if(void 0===t)return s.buttons;s.buttons=t;var e=initButtons();this.el.children(".ogx_popup_buttons:first").html(e)},this.destroy=function(){h(!1)},function(){if(OGX.Data.merge(s,e,!1),(l=$(s.container)).addClass("ogx_popup"),a=l.parent(),r.anim=s.anim,r.centered=s.center,f(),s.drag&&r.touch.drag.set({x:!0,y:!0,cb_down:d,target:".ogx_popup_head:first"}),s.resize&&r.setResize({top:!1,cb_resize:i,cb_down:n,cb_up:o}),s.hasOwnProperty("html")&&s.html)s["node:OML"]=[{"default:Html":{html:s.html}}];else if(s.hasOwnProperty("view")&&s.view){var t={};(t["default:Views."+s.view.id]=s)["node:OML"].push(t)}r.placeholders(s,['.ogx_popup[data-ogx-id="'+s.id+'"] > .ogx_popup_body']),s.overlay&&r.addOverlay()}()},OGX.Popup.NAME="Popup",OGX.Popup.FADE="PopupAnimFade",OGX.Popup.STYLE_HEAD="",OGX.Popup.HIDE="PopupHide",OGX.Popup.SHOW="PopupShow",OGX.Popup.CLICK_BUTTON="PopupClickButton",OGX.Popup.FLOAT=!0,OGX.Resize=function(t){"use strict";var r,s,l,c,d,u,_,h,f=this,p=t,e={enabled:!0,top:!0,left:!0,right:!0,bottom:!0,min_width:100,min_height:100,max_width:0,max_height:0,border:10,cb_up:!1,cb_down:!1,cb_resize:!1},i=!1,n="mousedown",o="mouseup",a="mousemove",g=(p=!1,!1),m=!1,y={w:0,h:0};function v(t){p&&(t?f.el.on(n,x):f.el.off(n,x))}function x(t){t.stopImmediatePropagation();var e=E(t);l=e.pageX,c=e.pageY;var i=f.el.position();r=i.left,s=i.top;var n=f.el.offset(),o=l-n.left,a=c-n.top;y.w=f.el.width(),y.h=f.el.height(),h=_=u=d=0,p.top&&a<p.border&&(h=-1),p.bottom&&a>f.el.height()-p.border&&(h=1),p.left&&o<p.border&&(_=-1),p.right&&o>f.el.width()-p.border&&(_=1),g=-1!==window.getComputedStyle(f.el[0],"width"),m=-1!==window.getComputedStyle(f.el[0],"height"),(_||h)&&(t.preventDefault(),f.hasOwnProperty("dragable")&&f.dragable&&f.touch.drag.disable(),O(!0),w(!0),p.cb_down&&p.cb_down())}function O(t){t?i=i||setInterval(b,5):i&&(clearInterval(i),i=!1)}function b(){if(-1===_||-1===h){var t=r,e=s;d&&_&&(t+=d*_*-1),u&&h&&(e+=u),d&&-1===_&&u&&1===h&&(e=s),f.el.css({transform:"translate3D("+t+"px, "+e+"px, 0px)"})}_&&y.w+d*_>p.min_width&&(g?f.el.css("width",100*(y.w+d*_)/f.el.parent().width()+"%"):f.el.width(y.w+d*_)),h&&y.h+u*h>p.min_height&&(m?f.el.css("height",100*(y.h+u*h)/f.el.parent().height()+"%"):f.el.height(y.h+u*h)),(d||u)&&(p.cb_resize?p.cb_resize():f.el.trigger(OGX.Resize.RESIZING))}function w(t){t?($("body").on(a,G),$("body").on(o,X)):($("body").off(a,G),$("body").off(o,X))}function G(t){t.preventDefault(),t.stopImmediatePropagation(),t=E(t),d=t.pageX-l,u=t.pageY-c}function X(t){O(!1),w(!1),t=E(t),d=t.pageX-l,u=t.pageY-c,p.cb_up&&p.cb_up(),f.hasOwnProperty("dragable")&&f.dragable&&(v(!1),f.touch.drag.enable(),setTimeout(function(){v(!0)},0))}function E(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t}this.resizable=!0,this.setResize=function(t){OGX.Data.merge(t,e,!1),p=t},this.enableResize=function(){v(!0)},this.disableResize=function(){v(!1)},OGX.Data.merge(p,e,!1),void 0===window.ontouchstart||p.chromeos||(n="touchstart",a="touchmove",o="touchend")},OGX.Resize.RESIZING="resizeResizing",require("Roulette","Uxi","Touch"),OGX.Roulette=function(t){construct(this,"Roulette");var a,c,d,i,u,e,r,n=this,_=t,o={force_coef:10,time_coef:.1,min_force_pitch:2,value:null,name:!1,display:!1,key:"value",mode:OGX.Roulette.MODE_REWIND,icon:!1,list:new OGX.List},s={template:!1,html:'<span class="ogx_roulette_block_label">{{$label}}</span>',css:!1},l="object",h=0,f=0,p="ogx_roulette";function g(t,e){void 0===e&&(e=!0),n.el.children('input[name="'+_.name+'"]').val(t),e&&n.el.children('input[name="'+_.name+'"]').trigger("change")}function m(t){t?a.on(n.touch.down,"."+p+"_icon",function(t){t.preventDefault(),t.stopImmediatePropagation(),n.next(!0)}):a.off(n.touch.down,"."+p+"_icon")}function y(t){return f+t>_.list.length-1?_.list[0]:f+t<0?_.list[_.list.length-1]:_.list[f+t]}function v(t){i=t.y,b(!0)}function x(t){var e;i=(e=t.dirY!==u?0:t.pt1.y-i,t.pt1.y),u=t.dirY,c.css({transition:"none",transform:"translate3D(0px, "+(E(c)+e)+"px, 0px)"})}function O(t){b(!1),trans=E(c);var e=Math.round(trans/d)*d,i=Math.round(e/d%_.list.length);if(i=i<=0?Math.abs(i):_.list.length-i,f!==i){switch(f=i,l){case"string":_.value=_.list[f];break;case"object":_.value=_.list[f][_.key]}n.el.children('input[name="'+_.name+'"]').val(_.value),n.el.children('input[name="'+_.name+'"]').trigger("change"),n.el.trigger(OGX.Roulette.CHANGE,_.value)}c.css({transition:"all 0.2s ease-out",transform:"translate3D(0px, "+e+"px, 0px)"})}function b(t){t?e=setInterval(w,10):clearInterval(e)}function w(){var t,e,i;(t=Math.floor((c.position().top+d*u)/(d*_.list.length)*-1))!==h&&(0===c.children("."+p+'_stripe[data-id="'+t+'"]').length&&((e=r.clone()).css("top",t*(d*_.list.length)+"px"),e.attr("data-id",t),c.append(e)),c.children("."+p+"_stripe").each(function(t,e){i=c.position().top+$(e).position().top,(Math.ceil(i+d*_.list.length)<-d||d<i)&&$(e).remove()}),h=t)}function G(){b(!1),c.off("transitionend",G)}function X(){var t="",e="";_.icon&&(e+='<div class="'+p+'_container">'),e+='<div class="'+p+'_stripes">';for(var i=0;i<2;i++){e+='<div class="'+p+'_stripe" style="top:'+i*(_.list.length*d)+'px;" data-id="'+i+'">';for(var n=0;n<_.list.length;n++){switch(l){case"string":t=OGX.Templater.templatize({label:_.list[n]},_.display.html());break;case"object":t=_.display.html(_.list[n])}e+='<div class="'+p+"_block "+_.display.css(_.list[n])+'" style="height:'+d+"px; line-height:"+d+'px;">'+t+"</div>"}e+="</div>"}if(e+="</div>",_.icon&&(e+='</div><div class="'+p+'_icon"></div>'),_.name)switch(l){case"string":e+='<input type="hidden" name="'+_.name+'" value="'+_.list[f]+'">';break;case"object":e+='<input type="hidden" name="'+_.name+'" value="'+_.list[f][_.key]+'">'}a.html(e),c=a.children("."+p+"_stripes:first"),_.icon&&(c=a.children("."+p+"_container:first").children("."+p+"_stripes:first")),r=(r=c.children("."+p+"_stripe:last")).detach();var o=f*d*-1;c.css({transition:"none",transform:"translate3D(0px, "+o+"px, 0px)"})}function E(t){var e=0;return"none"!==t.css("transform")&&(e=Number(t.css("transform").split(",")[5].split(")")[0])),e}function T(t){switch(l){case"string":return{index:_.list.indexOf(t)};case"object":return _.list.findIndex(_.key,t)}}this._NAME_=OGX.Roulette.NAME,this.el=null,this.enable=function(){a.removeClass(p+"_disabled"),this.touch.swipe.enable(),_.icon&&m(!0)},this.disable=function(){a.addClass(p+"_disabled"),this.touch.swipe.disable(),_.icon&&m(!1)},this.val=function(t,e){if(void 0!==t){var i=T(t).index;-1<i&&(function(t,e){void 0===e&&(e=!0);c.off("transitionend",G),b(!1),u=-1;var i=E(c),n=Math.round(i/d)*d,o=i-n,a=Math.round(n/d%_.list.length);a=a<=0?Math.abs(a):_.list.length-a;var r=a-t;_.mode===OGX.Roulette.MODE_CLOSEST&&r>_.list.length/2&&(r=-1*(_.list.length-a+t));var s=i+r*d-o,l=20*Math.round(Math.abs(r*d)*_.time_coef);b(!0),c.on("transitionend",G),c.css({transition:"all "+l+"ms ease-out",transform:"translate3D(0px, "+s+"px, 0px)"}),f=t}(i),_.name&&g(t,!1))}else switch(l){case"string":return _.list[f];case"object":return _.list[f][_.key]}},this.item=function(){return _.list[f]},this.loopval=function(t,e,i){var n=f,o=T(e).index;-1<o&&(f=o);var a=n-o,r=_.time_coef*Math.abs(a+t*_.list.length);b(!0),c.css({transition:"all "+r+"s ease-out",transform:"translate3D(0px, "+(E(c)+(a*d-_.list.length*d*t))+"px, 0px)"}),c.on("transitionend",G),_.name&&g(e,i),void 0!==i&&i&&this.el.trigger(OGX.Roulette.CHANGE,val)},this.next=function(t){var e,i=y(1);switch(u=1,l){case"string":e=i;break;case"object":e=i[_.key]}this.val(e),void 0!==t&&t&&(this.el.trigger(OGX.Roulette.CHANGE,e),_.name&&this.el.children('input[name="'+_.name+'"]').trigger("input"))},this.prev=function(t){var e,i=y(-1);switch(l){case"string":e=i;break;case"object":e=i[_.key]}this.val(e),void 0!==t&&t&&(this.el.trigger(OGX.Roulette.CHANGE,e),_.name&&this.el.children('input[name="'+_.name+'"]').trigger("change"))},this.setData=function(t,e){t.hasOwnProperty("insert")||(t=new OGX.List(t)),_.value=e,_.list=t,1===_.list.length&&(_.list[1]=_.list[0]),f=void 0===e?0:T(e).index,setTimeout(X,0)},this.destroy=function(){b(!1)},OGX.Data.merge(_,o),0<_.list.length&&!_.list.hasOwnProperty("insert")&&(_.list=new OGX.List(_.list)),"string"==typeof _.list[0]&&(l="string"),1===_.list.length&&(_.list[1]=_.list[0]),_.display?_.display=new OGX.Display(_.display):_.display=new OGX.Display(s),(a=n.el=$(_.container)).addClass(p),a.width(),d=a.height(),f=T(_.value).index,_.list.length&&X(),n.touch.swipe.set({x:!1,y:!0,cb_down:v,cb_swipe:x,cb_up:O,target:a.children(".ogx_roulette_container:first")[0]})},OGX.Roulette.NAME="Roulette",OGX.Roulette.CHANGE="RouletteChange",OGX.Roulette.MODE_REWIND="RouletteModeRewind",OGX.Roulette.MODE_CLOSEST="RouetteModeClosest",require("RouletteTree","Uxi"),OGX.RouletteTree=function(t){construct(this,"RouletteTree");var l,c,d=this,u=t,e={groups:!1,data:!1,value:!1},_=!1;function n(t,e){var n,o=$(t.target).data("ogx-id"),a=_.findIndex("id",String(o)),r=_[a.index].roulette.item().hasOwnProperty("head");if(c=a.index,a.index+1<_.length)for(i=a.index+1;i<_.length;i++)r?(_[i].roulette.val(""),_[i].roulette.blur()):(n=h(i-1,_[i-1].roulette.val()),_[i].roulette.setData(n,n[0].value),i===a.index+1?_[i].roulette.focus():_[i].roulette.blur());var s=f(c);l.trigger(OGX.RouletteTree.CHANGE,[s]),r&&(c=c||-1)}function h(t,e){for(var i=[],n=0;n<t+1;n++)i.push(_[n].roulette.val());var o=u.data;for(n=0;n<i.length-1;n++)o=o[i[n]];var a=[{label:_[t+1].group,value:""}];if(e.length)for(var r in o[e])a.push({label:r,value:r});return a}function f(t){var e=[];if(void 0===t&&(t=_.length),t<0)return!1;for(var i=0;i<_.length;i++)e.push({group:u.groups[i],value:_[i].roulette.val()});return e}function o(t){for(var e,i=0;i<u.groups.length;i++)t.hasOwnProperty(u.groups[i])&&(e=t[u.groups[i]],String(e).length?(isNaN(e)||(e=String(e)),_[i].roulette.val(e)):p(_[i].roulette))}function a(){_=new OGX.List;var a,r,s=0;!function t(e,i){var n;if(!Array.isArray(e)&&"object"==typeof e){if(s<i){for(var o in s=i,l.append('<div class="ogx_roulette_tree_roulette" data-ogx-roulette="'+i+'"></div>'),r=u.groups[i-1],a=[{label:r,value:null,head:!0}],e)a.push({label:o,value:o});n=d.create(OGX.Roulette.NAME,{container:'.ogx_roulette_tree[data-ogx-id="'+d.id+'"] .ogx_roulette_tree_roulette[data-ogx-roulette="'+i+'"]',list:a,icon:u.icon,value:null,name:r}),1<s&&p(n),_.push({roulette:n,group:r,id:n.id})}if(i<u.groups.length)for(var o in e)t(e[o],i+1)}}(u.data,1)}function p(t){setTimeout(function(){t.blur()},0)}this._NAME_=OGX.RouletteTree.NAME,this.el=null,this.enable=function(){_&&function(){for(var t=!0,e=0;e<_.length;e++)null===_[e].roulette.val()&&(t=t&&!1),!t&&0<e&&p(_[e].roulette)}()},this.ux=function(t){_&&function(t){t?l.on(OGX.Roulette.CHANGE,n):l.off(OGX.Roulette.CHANGE,n)}(t)},this.val=function(t){if(void 0===t)return f(c);o(t)},u=OGX.Data.merge(u,e),d.el=l=$(u.container),l.addClass("ogx_roulette_tree"),a(),c=-1,u.value&&setTimeout(function(){o(u.value)},0)},OGX.RouletteTree.NAME="RouletteTree",OGX.RouletteTree.CHANGE="RouletteTreeChange",OGX.Router=function(t){"use strict";var l=t,i=window.location.pathname.split("/").slice(-1)[0],c=!1,d=!1;function e(t){t.preventDefault(),t.stopImmediatePropagation(),c||navigator.app.backHistory()}function n(t){if(c)return t.preventDefault(),t.stopImmediatePropagation(),!1;null!==t.originalEvent.state?app.goto(t.originalEvent.state.url,!1):-1!==window.location.href.indexOf("#")&&app.goto(window.location.href.split("#").pop(),{history:!1})}this.start=function(){$(document).on("backbutton",e),$(window).on("popstate",n)},this.stop=function(){$(document).off("backbutton",e),$(window).off("popstate",n)},this.lock=function(){c=!0},this.unlock=function(){c=!1},this.isLocked=function(){return c},this.addToHist=function(t){var e={url:t};history.pushState(e,"title"+(new Date).getTime(),i+"#"+t)},this.goto=function(t,e){if(c)return!1;var i=function(t){var e;for(var i in l.routes)if((e=t.match("^"+i+"$"))&&e.length){e.shift();var n=null,o=JSON.parse(JSON.stringify(l.routes[i]));if(e.length&&o.hasOwnProperty("data:Route")){n={};for(var a=0;a<e.length;a++)n[o["data:Route"][a]]=e[a]}return{stage:t.split("/").shift(),route:o,data:n,pattern:i}}return!1}(t);if(i){if(i.route.hasOwnProperty("scope")||(i.route.scope=["public"]),!OGX.Scope.check(i.route.scope))return setTimeout(function(){app.goto(l.errors[403],{history:!1})},0),!1;delete i.route.scope;var n=app.find(OGX.Stage.NAME,i.stage);if(i.route.hasOwnProperty("origin:Route")){var o=!1,a=i.route["origin:Route"].split(",");a.push(n.url);for(var r=0;r<a.length;r++)if(0===n.url.indexOf(a[r])){o=!0;break}if(!o)return void app.goto(i.route["origin:Route"]);delete i.route["origin:Route"]}if(n.url===i.url)return;i.url=t,d=i.pattern;var s=app.getStage();if(i.stage!==s.id)s=app.find(OGX.Stage.NAME,i.stage);else{if(s.url===i.url)return;!function(a,t){var r,s,l,c,d,u=a.gather();!function t(e){var i=/(Fork|Controller|Data|Route)/gi;for(var n in e)if(-1!==n.indexOf(":"))if(r=n.split(":").shift(),s=n.split(":").pop(),i.test(s))"Fork"===s&&t(OGX.Scope.match(e[n]).node);else{if((l=$(r)).length){d=!1;for(var o=0;o<u.length;o++)if(-1===u[o]._NAME_.indexOf("Controller")&&(c=u[o].el.parent(),u[o].scroll&&(c=c.parent()),c[0]===l[0])){d=!0,a.find(u[o]._NAME_,u[o].id,"remove"),l.empty(),u.splice(o,1);break}}d||l.empty()}}(t)}(s,i.route)}app.showStage(i.stage,!1),(s=app.getStage()).pattern=d,s.url=i.url;return i.route,OGX.OML.render(s,i.route,e.data,i.data),e.history&&this.addToHist(t),!0}return setTimeout(function(){app.goto(l.errors[404],{history:!1})},0),!1}},OGX.Router.BACK="RouterBack",OGX.Router.EXIT="ReouterExit",OGX.Scope=function(t){this.scope=["public"],void 0!==t&&(this.scope=t),this.check=function(t){for(var e=0;e<this.scope.length;e++)if(-1!==t.indexOf(this.scope[e]))return!0;return!1},this.match=function(t){var e,i,n=new OGX.List;for(var o in t){i=0,e=o.split(",");for(var a=0;a<e.length;a++)for(var r=0;r<this.scope.length;r++)e[a]===this.scope[r]&&i++;i&&n.push({node:t[o],t:i})}return!!n.length&&(n.order("t",-1),n[0])}},OGX.Scope=new OGX.Scope,require("Scroller","Uxi","Touch"),OGX.Scroller=function(t){construct(this,"Scroller");var n,o,e,i,a,r,s,l,c,d,u,_=this,h=t,f={fade_speed:300,check_delay:100,css:!1,zindex:9999,observe:!0,auto_scroll:!1,scroll_callback:!1,trigger:!1},p=0,g="init",m=!1;function y(t){t?o.on(_.touch.down,v):o.off(_.touch.down,v)}function v(t){t=_.event(t),C(!1),w(!0),x(!0),y(!1),M("in"),T(!0)}function x(t){t?(d=setInterval(b,10),o.on(_.touch.move,O)):(clearInterval(d),o.off(_.touch.move,O))}function O(t){t=_.event(t)}function b(){E()}function w(t){t?$(document).on(_.touch.up,G):$(document).off(_.touch.up,G)}function G(){x(!1),w(!1),y(!0),M("out")}function X(t){t?(window.addEventListener("resize",S),o.on("scroll",function(t){t.stopImmediatePropagation(),E()}),void 0!==OGX.NestedList&&$(document).on(OGX.NestedList.OPENED+" "+OGX.NestedList.CLOSED,function(){_.update()})):(window.removeEventListener("resize",S),o.off("scroll"),void 0!==OGX.NestedList&&$(document).off(OGX.NestedList.OPENED+" "+OGX.NestedList.CLOSED))}function E(){var t,e=(t=o.scrollTop())/s,i=Math.round(a.position().top);a.css("top",e+"px"),h.trigger&&!m&&(_.el.trigger(OGX.Scroller.SCROLL,t),-1*t==o.outerHeight(!0)-n.outerHeight(!0)?i!==Math.round(e)&&_.el.trigger(OGX.Scroller.BOTTOM):0===t&&i!==Math.round(e)&&_.el.trigger(OGX.Scroller.TOP)),h.scroll_callback&&h.scroll_callback()}function T(t){t?(c&&T(!1),l=n.position().top,c=setInterval(D,h.check_delay-10)):c&&(clearInterval(c),c=null)}function D(){var t=n.position().top;M(t!==l?"in":"out"),l=t}function C(t){t?u=setInterval(E,h.check_delay):clearInterval(u)}function M(t){h.fade_speed;var e=a.css("opacity");a.removeClass("ogx_scroller_track_anim_fade_in"),a.removeClass("ogx_scroller_track_anim_fade_out"),a.hasClass("ogx_scroller_track_anim")||a.addClass("ogx_scroller_track_anim"),"in"===t?a.addClass("ogx_scroller_track_anim_fade_in"):a.addClass("ogx_scroller_track_anim_fade_out")}function L(t){t?_.observe(!0,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","src","width","height"]},N):_.observe(!1)}function N(){p!==n.height()&&(p=n.height(),S(),h.auto_scroll&&_.bottom())}function S(){if(i=o.innerHeight(),e=n.height(),s=e/i,i<e){var t=Math.round(i/s);a.css("height",t+"px"),r.css("display","block")}else r.css("display","none");"init"===g&&(g=OGX.Scroller.READY,_.el.trigger(OGX.Scroller.READY))}this._NAME_=OGX.Scroller.NAME,this.el=null,this.enable=function(){S(),X(!0),h.observe&&setTimeout(function(){L(!0)},0),y(!0)},this.disable=function(){X(!1),h.observe&&L(!1),w(!1),x(!1),y(!1),T(!1),C(!1)},this.resize=function(){S()},this.top=function(){i<e&&(o[0].scrollTop=0,S())},this.bottom=function(){i<e&&(o.scrollTop(e),S())},this.mute=function(){m=!0},this.vocal=function(){m=!1},this.container=function(){return n},this.inner=function(){return n[0]},this.outer=function(){return o[0]},this.state=function(){return g},this.destroy=function(){_.el.removeClass("ogx_scroller_outer"),n.remove(),r.remove()},OGX.Data.merge(h,f),function(){_.el=$(h.container),_.el.addClass("ogx_scroller_outer ogx_hw");var t=(o=_.el).html();o.html('<div class="ogx_scroller_inner ogx_hw"></div>'),(n=o.children(".ogx_scroller_inner:first")).html(t);var e="ogx_scroller_track ogx_hw";h.css&&(e+=" "+h.css);var i="<div class="+e+'" style="z-index:'+h.zindex+';"><div class="ogx_scroller_track_button"></div></div>';o.prepend(i),r=o.children(".ogx_scroller_track:first"),a=r.find(".ogx_scroller_track_button:first")}(),S()},OGX.Scroller.NAME="Scroller",OGX.Scroller.READY="ScrollerReady",OGX.Scroller.TOP="ScrollerTop",OGX.Scroller.BOTTOM="ScrollerBottom",OGX.Scroller.SCROLL="ScrollerScroll",require("StackedTree","Uxi","Touch"),OGX.StackedTree=function(t){construct(this,"StackedTree");var i,a,r,s,l=this,n={scope:["public"],speed:200,list:[],display:{html:"{{$label}}"},displays:!1,chromeos:!1},c=t,d=[],o=[0],u=0,_=!1,h="ogx_stacked_tree";function f(t){t?(i.on(l.touch.down,"."+h+"_level_prev",e),i.on(OGX.DynamicList.SELECT,p)):(i.off(l.touch.down,"."+h+"_level_prev",e),i.off(OGX.DynamicList.SELECT,p))}function e(t){t.preventDefault(),t.stopImmediatePropagation(),v(--u,!0),o.pop(),l.el.trigger(OGX.StackedTree.BACK)}function p(t,e){_=e;var i=d[u].getIndex("__id__",e.__id__);e.hasOwnProperty("items")&&e.items.length&&function(t){if(!t.hasOwnProperty("scope"))return!0;for(var e=0;e<c.scope.length;e++)if(-1!==t.scope.indexOf(c.scope[e]))return!0;return!1}(e)?(o.push(i),y(++u,e.items),l.el.trigger(OGX.StackedTree.ENTER,e),setTimeout(function(){v(u)},0)):l.el.trigger(OGX.StackedTree.SELECT,e)}function g(t){t?$(window).on("resize",m):$(window).off("resize",m)}function m(){a.removeClass(h+"_anim"),r=a.width(),a.css("transform","translateX("+u*Math.round(r/o.length)*-1+"px)")}function y(t,e){a.removeClass(h+"_anim").css("width",100*(t+1)+"%"),r=a.width();var i,n='<div class="'+h+'_level" data-level="'+t+'">';0<t&&(i=(i=s.css(_)).replace(h+"_door",""),n+='<div class="'+h+"_item ogx_stacked_tree_level_prev "+i+'">'+s.html(_)+"</div>"),n+='<div class="'+h+'_level_list"></div></div>',a.append(n);var o=a.children("."+h+'_level[data-level="'+t+'"]').children("."+h+"_level_list");a.children("."+h+"_level").css("flex-basis",Math.floor(100/(t+1)*100)/100+"%"),function(t,e,i){d[t]&&l.remove(d[t].id,OGX.DynamicList.NAME);var n=l.create("DynamicList",{container:e,mode:"hit",scroll:!0,display:c.display,displays:c.displays,list:i});d[t]=n}(t,o[0],e)}function v(t,e){a.addClass(h+"_anim"),void 0!==e&&e&&(f(!1),a.on("transitionend",function(){a.off("transitionend"),a.removeClass(h+"_anim").css("width",100*(t+1)+"%"),l.remove(d[t+1].id,OGX.DynamicList.NAME),d.splice(t+1,1),a.children("."+h+'_level[data-level="'+(t+1)+'"]').remove(),a.children("."+h+"_level").css("flex-basis",Math.floor(100/(t+1)*100)/100+"%"),r=a.width(),f(!(_=!1))})),r=a.width(),a.css("transform","translateX("+t*Math.round(r/o.length)*-1+"px)")}function x(){c=OGX.Data.merge(c,n,!1,!0);var t=(s=new OGX.Display(c)).val();if(t=function(t){if(t.display&&"object"==typeof t.display&&!t.display.hasOwnProperty("bind")&&(t.display=i(t.display)),t.displays)for(var e in t.displays)t.displays[e]=i(t.displays[e]);function i(t){var e=['{{typeof($items) !== "undefined" && $items.length > 0}}',{add:"ogx_stacked_tree_door"}];return t.hasOwnProperty("css")?"object"==typeof t.css?(t.css.hasOwnProperty("add")?t.css.add+=" ogx_stacked_tree_item":t.css.add="ogx_stacked_tree_item",t.css.hasOwnProperty("conditions")?t.css.conditions.push(e):t.css.conditions=[e]):t.css={add:t.css+" ogx_stacked_tree_item",conditions:[e]}:t.css={add:"ogx_stacked_tree_item",conditions:[e]},t}return t}(t),s.val(t),c.display=t.display,c.displays=t.displays,l.el=i=$(c.container),i.addClass(h),c.list.length){var e=c.list.slice();c.list={items:e}}}this._NAME_=OGX.StackedTree.NAME,this.el=null,this.enable=function(){this.touch.enable(),f(!0),g(!0)},this.disable=function(){this.touch.disable(),f(!1),g(!1)},this.resize=function(){m()},this.setTree=function(t){if(t.length){var e=t.slice();return c.list={items:e},!0}return!1},this.setScope=function(t){c.scope=t,_=!(o=[u=0])},this.destroy=function(){for(var t=0;t<d.length;t++)d[t]&&this.remove(d[t].id,OGX.DynamicList.NAME)},x(),i.html('<div class="'+h+'_container" style="width:100%"></div>'),a=i.children("."+h+"_container:first"),c.list.items.length&&y(o[0],c.list.items)},OGX.StackedTree.NAME="StackedTree",OGX.StackedTree.BACK="StackedTreeBack",OGX.StackedTree.ENTER="StackedTreeEnter",OGX.StackedTree.SELECT="StackedTreeSelect",require("Stage","Uxi","Touch"),OGX.Stage=function(t){construct(this,"Stage");var n=this,o=t;function a(t){t?n.el.on(n.touch.down,".ogx_stage_exit",function(){app.theater.show()}):n.el.off(n.touch.down,".ogx_stage_exit")}this.el=null,this.id=o.id,this.theater=!1,this.home=null,this.url=null,this.route=null,this._NAME_=OGX.Stage.NAME,this.__destroy=function(){o.closeable&&a(!1)},function(){o.hasOwnProperty("theater")&&(n.theater=o.theater),n.home=o.home;var t=new OGX.Display(o),e="block";o.hasOwnProperty("use")&&o.use||(e="none");var i="";o.closeable&&(i='<div class="ogx_stage_exit"></div>'),i+=t.html(),n.el=container=$(o.container),container.html(i),container.addClass("ogx_stage").css("display",e),o.closeable&&a(!0)}()},OGX.Stage.NAME="Stage",OGX.Stage.ANIM_SWAP="StageAnimSwap",OGX.Stage.ANIM_FLIP="StageAnimFlip",require("Switch","Uxi","Touch"),OGX.Switch=function(t){construct(this,"Switch");var n,e=this,o=t,i={container:"document",bind:!1,labels:["OFF","ON"],values:[!1,!0],value:1,name:"ogx_switch_check"};function a(){o.value==o.values[0]?o.value=o.values[1]:o.value=o.values[0],setTimeout(r,0)}function r(){n.find(".ogx_switch_selected").removeClass("ogx_switch_selected");var t=n.find(".ogx_switch_dot:first"),e=n.find(".ogx_switch_label:first"),i=n.find(".ogx_switch_label:last");o.value===o.values[0]?(t.removeClass("ogx_switch_dot_right"),e.removeClass("ogx_switch_label_off").addClass("ogx_switch_label_on").addClass("ogx_switch_selected"),i.removeClass("ogx_switch_label_on").addClass("ogx_switch_label_off").removeClass("ogx_switch_selected")):(t.addClass("ogx_switch_dot_right"),i.removeClass("ogx_switch_label_off").addClass("ogx_switch_label_on").addClass("ogx_switch_selected"),e.removeClass("ogx_switch_label_on").addClass("ogx_switch_label_off").removeClass("ogx_switch_selected")),n.find(".ogx_switch_val:first").attr("value",o.value)}function s(t){t?n.on(e.touch.down,function(t){t.preventDefault(),a(),n.trigger(OGX.Switch.CHANGE,o.value),n.children(".ogx_switch_val:first").trigger("change"),o.bind&&(o.bind.obj[o.bind.prop]=o.value)}):n.off(e.touch.down)}this._NAME_=OGX.Switch.NAME,this.el=null,this.enable=function(){s(!0),n.removeClass("ogx_switch_disabled")},this.disable=function(){s(!1),n.addClass("ogx_switch_disabled")},this.val=function(t){return void 0!==t&&o.value!==t&&a(),o.value},this.toggle=function(){a()},o=o||{},OGX.Data.merge(o,i),e.el=n=$(o.container),n.addClass("ogx_switch_disabled"),function(){var t="";o.labels&&o.labels.length&&(t+='<span class="ogx_switch_label_on ogx_switch_label ogx_switch_selected">'+o.labels[0]+"</span>");var e="";o.value===o.values[1]&&(e="ogx_switch_dot_right"),t+='<div class="ogx_switch_track"><div class="ogx_switch_track_bg"></div><div class="ogx_switch_dot '+e+'"></div></div>',o.labels&&o.labels.length&&(t+='<span class="ogx_switch_label_off ogx_switch_label">'+o.labels[1]+"</span>"),t+='<input class="ogx_switch_val" type="hidden" name="'+o.name+'" value="'+o.value+'"></div>',n.html(t),n.addClass("ogx_switch")}(),setTimeout(r,0)},OGX.Switch.NAME="Switch",OGX.Switch.CHANGE="SwitchChange",require("Tabs","Uxi","Touch"),OGX.Tabs=function(t){construct(this,"Tabs");var a,e=this,o=t,i={editable:!0,reorder:!0,icons:!1,list:new OGX.List,display:{html:"",css:""}},r=!1,s=0,n=!1,l=!1,c=!1,d=!1,u=!1;function _(){for(var t,e,i='<div class="ogx_tabs_container">',n=0;n<o.list.length;n++)e=o.display.css(o.list[n]),n===s&&(e+=" ogx_tabs_tab_active"),i+='<div class="ogx_tabs_tab '+e+'">',t=!1,"string"==typeof o.list[n]?t=o.list[n]:o.list[n].hasOwnProperty("label")&&(t=o.list[n].label),t&&(i+='<span class="ogx_tabs_tab_label">'+t+"</span>"),o.editable&&(i+='<span class="ogx_tabs_tab_close"><span></span></span>'),i+="</div>",e="";i+="</div>",o.editable&&(i+='<div class="ogx_tabs_tab_add"><span></span></div>',a.addClass("ogx_tabs_editable")),a.html(i),r=a.children(".ogx_tabs_container:first").children(".ogx_tabs_tab:eq("+s+")")}function h(t){if(!n){u=!1,l=$(t),c={from:l.index()},a.children(".ogx_tabs_container:first").children(".ogx_tabs_tab_active:first").removeClass("ogx_tabs_tab_active");var e=l.position().left;(n={el:$(t).clone(),y:l.position().top}).w=l.width(),n.el.width(n.w),l.addClass("ogx_tabs_tab_active").addClass("ogx_tabs_frozen"),r=l,n.el.addClass("ogx_tabs_tab_active").addClass("ogx_tabs_float").css("transform","translate3d("+e+"px, "+n.y+"px, 0px)"),a.children(".ogx_tabs_container:first").prepend(n.el),d=setInterval(p,5)}}function f(t){u=t,n&&n.el.css("transform","translate3d("+(t.x-n.w/2)+"px, "+n.y+"px, 0px)")}function p(){var i,n,o;u&&(idx=l.index(),a.children(".ogx_tabs_container:first").children(".ogx_tabs_tab").each(function(t,e){(i=$(e)).hasClass("ogx_tabs_tab_active")||(n=i.position(),o=i.width(),idx!==t&&(u.x>n.left+o/2&&u.x<n.left+o?(l.detach(),i.after(l)):u.x>n.left&&u.x<n.left+o/2&&(l.detach(),i.before(l))))}))}function g(){if(n){clearInterval(d),d=!1,n.el.remove(),n=!1,l.removeClass("ogx_tabs_frozen"),c.to=l.index();var t=o.list.splice(c.from,1);o.list.insert(t[0],s),s=c.to,e.el.trigger(OGX.Tabs.REORDER,c)}}function m(t){t?(a.on("click",".ogx_tabs_tab",function(){r&&r.removeClass("ogx_tabs_tab_active"),$(this).addClass("ogx_tabs_tab_active"),r=$(this),s!==r.index()&&(s=r.index(),a.trigger(OGX.Tabs.SELECT,o.list[r.index()]))}),o.editable&&a.on("click",".ogx_tabs_tab_close",function(t){return t.preventDefault(),t.stopImmediatePropagation(),a.trigger(OGX.Tabs.CLOSE,{index:s,tab:o.list[s]}),e.removeCurrentTab(),updateContainerWidth(),!1})):(a.off("click",".ogx_tabs_tab"),o.editable&&(a.off("click",".ogx_tabs_tab_add"),a.off("click",".ogx_tabs_tab_close")))}this._NAME_=OGX.Tabs.NAME,this.el=null,this.enable=function(){m(!0),o.reorder&&this.touch.hold.enable()},this.disable=function(){m(!1),o.reorder&&this.touch.hold.disable()},this.set=function(t){if(void 0===t){if(r){var e=r.index();return o.list[e]}return!1}t.hasOwnProperty("insert")||(t=new OGX.List(t)),o.list=t,setTimeout(_,0)},this.selectIndex=function(t){t!==s&&this.selectTabAt(t)},this.index=function(){return r?s:-1},this.addTab=function(t){o.icons&&(t.hasOwnProperty("icon")||(t.icon=o.icon_default)),o.list.push(t),s=o.list.length-1,setTimeout(function(){_(),function(){var t=a.width(),e=a.children(".ogx_tabs_container:first"),i=e.width();t<i&&e.css("transform","translateX("+-1*(i-t)+"px)")}()},0)},this.addTabAt=function(t,e){o.icons&&(t.hasOwnProperty("icon")||(t.icon=o.icon_default)),o.list.insert(t,e),s=e,setTimeout(_,0)},this.removeCurrentTab=function(){r&&this.removeTabAt(s)},this.removeTabAt=function(t){return!!o.list.delete(t)&&(a.children(".ogx_tabs_container:first").children(".ogx_tabs_tab:eq("+t+")").remove(),r=null,function(){0<s?s--:s=0;e.selectTabAt(s)}(),!0)},this.selectTabAt=function(t){return r&&(r.removeClass("ogx_tabs_tab_active"),r=null),(r=a.children(".ogx_tabs_container:first").children(".ogx_tabs_tab:eq("+t+")")).addClass("ogx_tabs_tab_active"),s=t,!0},this.selectTab=function(t){r&&r.removeClass("ogx_tabs_tab_active");var e=o.list.findIndex("label",t);this.selectTabAt(e.index)},o=o||{},OGX.Data.merge(o,i),o.list.hasOwnProperty("insert")||(o.list=new OGX.List(o.list)),o.display.hasOwnProperty("_NAME_")||(o.display=new OGX.Display(o.display)),e.el=a=$(o.container),a.addClass("ogx_tabs"),setTimeout(_,0),o.reorder&&e.touch.hold.set({target:".ogx_tabs_tab",cb_hold:h,cb_move:f,cb_up:g})},OGX.Tabs.NAME="Tabs",OGX.Tabs.SELECT="TabsSelect",OGX.Tabs.CLOSE="TabsClose",OGX.Tabs.REORDER="TabsReoroder",OGX.Tabs.ADD="TabsAdd",require("Tags","Uxi","Touch"),OGX.Tags=function(t){construct(this,"Tags");var a,e=this,r=t,i={editable:!1,insert:!0,tags:[],current_tags:[],tags_ascii:[],mode:OGX.Tags.MODE_STRING,keycode:13,placeholder:"keywords",restrict:!1};function n(t){var e=!1;switch(r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:-1===r.current_tags.indexOf(t)&&(r.current_tags.push(t),e=!0);break;case OGX.Tags.MODE_OBJECT:var i=r.current_tags.find("label",t,1);i||((i=r.tags.find("label",t,1))?r.current_tags.push(i):r.current_tags.push({label:t}),e=!0)}if(e){var n="";!0===r.editable&&(n='<span class="ogx_tags_remove"></span>');var o='<span class="ogx_tags_tag"><span>'+t+"</span>"+n+"</span>";a.find(".ogx_tags_tags:first").append(o),a.trigger(OGX.Tags.TAG_ADDED,t),a.trigger(OGX.Tags.CHANGE,t)}a.find(".ogx_tags_input:first").focus()}function o(i){var t=!1,n=!1;switch(r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:var e=r.current_tags.indexOf(i);-1<e&&(r.current_tags.splice(e,1),t=!0);break;case OGX.Tags.MODE_OBJECT:t=r.current_tags.findDelete("label",i)}return t&&a.find(".ogx_tags_tags:first").find(".ogx_tags_tag").each(function(t,e){if($(e).find("span:first").text()===i)return $(e).remove(),void(n=!0)}),n}function s(t,e){if(t){0<a.find(".ogx_tags_container:first").length&&(s(!1),u(!1));for(var i='<div class="ogx_tags_container">',n=0;n<e.length;n++)switch(r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:i+='<span class="ogx_tags_tag ogx_tags_container_tag">'+e[n]+"</span>";break;case OGX.Tags.MODE_OBJECT:i+='<span class="ogx_tags_tag ogx_tags_container_tag">'+e[n].label+"</span>"}i+="</div>",a.append(i),u(!0)}else a.find(".ogx_tags_container").remove(),u(!1)}function l(t){for(var e="",i="",n=0;n<t.length;n++)switch(i=!0===r.editable?'<span class="ogx_tags_remove"></span>':"",r.mode){case OGX.Tags.MODE_STRING:case OGX.Tags.MODE_ASCII:e+='<span class="ogx_tags_tag"><span>'+t[n]+"</span>"+i+"</span>";break;case OGX.Tags.MODE_OBJECT:e+='<span class="ogx_tags_tag"><span>'+t[n].label+"</span>"+i+"</span>"}return r.current_tags=t,a.find(".ogx_tags_tags:first").html(e),!0}function c(t){var e=function(t){for(var e="",i=0;i<t.length;i++)e+=t.toLowerCase().charCodeAt(i).toString();return e}(t.substr(0,3)),i=[];if(r.tags_ascii[e])for(var n=0;n<r.tags_ascii[e].length;n++)-1!==r.tags_ascii[e][n].toLowerCase().indexOf(t.toLowerCase())&&-1===r.current_tags.indexOf(r.tags[n])&&i.push(r.tags_ascii[e][n]);return i}function d(t){t?a.find(".ogx_tags_input:first").on("keyup",function(t){var e=$(this).val();if(3<=e.length)if(t.which===r.keycode&&r.insert)n(e),a.find(".ogx_tags_input:first").val(""),s(!1);else{var i;switch(r.mode){case OGX.Tags.MODE_STRING:i=function(t){var e=[];t=t.substr(0,3);for(var i=0;i<r.tags.length;i++)0===r.tags[i].toLowerCase().indexOf(t.toLowerCase())&&-1===r.current_tags.indexOf(r.tags[i])&&e.push(r.tags[i]);return e}(e);break;case OGX.Tags.MODE_OBJECT:i=function(t){for(var e=new RegExp(t,"gi"),i=r.tags.find("label",e),n=0;n<r.current_tags.length;n++)i.findDelete("label",r.current_tags[n].label);return i}(e);break;case OGX.Tags.MODE_ASCII:i=c(e)}0<i.length?s(!0,i):s(!1)}else s(!1)}):a.find(".ogx_tags_input:first").off("keyup")}function u(t){t?a.find(".ogx_tags_container:first").on(e.touch.down,".ogx_tags_container_tag",function(){n($(this).text()),a.find(".ogx_tags_input:first").val(""),s(!1)}):a.find(".ogx_tags_container:first").off(e.touch.down,".ogx_tags_container_tag")}function _(t){t?a.on(e.touch.down,".ogx_tags_remove",function(){var t=$(this).parent("span:first").find("span:first").text();o(t),a.trigger(OGX.Tags.TAG_REMOVED,t),a.trigger(OGX.Tags.CHANGE,t),a.find(".ogx_tags_input:first").focus()}):a.off(e.touch.down,".ogx_tags_remove")}this._NAME_=OGX.Tags.NAME,this.el=null,this.enable=function(){d(!0),u(!0),_(!0),a.find(".ogx_tags_input:first").prop("placeholder",r.placeholder),a.find(".ogx_tags_input:first").prop("disabled",!1)},this.disable=function(){d(!1),u(!1),_(!1),a.find(".ogx_tags_input:first").prop("placeholder",""),a.find(".ogx_tags_input:first").prop("disabled",!0)},this.tags=function(t){return void 0!==t?(t.hasOwnProperty("insert")||(t=new OGX.List(t)),r.tags=t,!0):r.tags},this.val=function(t){return void 0!==t?(t.hasOwnProperty("insert")||(t=new OGX.List(t)),r.current_tags=t,l(r.current_tags)):r.current_tags},this.renderTags=function(t){return l(t)},this.addTag=function(t){return n(t)},this.removeTag=function(t){return o(t)},this.destroy=function(){d(!1),u(!1),_(!1),r.restrict&&OGX.Form.unrestrictField(a.find(".ogx_tags_input:first")[0])},function(){for(var t in r=r||{},i)r.hasOwnProperty(t)||(r[t]=i[t]);r.tags.hasOwnProperty("insert")||(r.tags=new OGX.List(r.tags)),r.current_tags.hasOwnProperty("insert")||(r.current_tags=new OGX.List(r.current_tags)),e.el=a=$(r.container),a.addClass("ogx_tags")}(),function(){if(a.html('<span class="ogx_tags_tags"></span><input type="text" class="ogx_tags_input" placeholder="'+r.placeholder+'">'),r.restrict){var t={multiline:!1,max:30};"object"==typeof r.restrict&&(t=r.restrict),t.container=a.find(".ogx_tags_input:first")[0],OGX.Form.restrictField(t)}}(),0<r.current_tags.length&&l(r.current_tags)},OGX.Tags.prototype.tagDataset=function(t,e,i){"use strict";void 0===i&&(i=!1);for(var n,o=[],a=0;a<t.length;a++)for(var r=0;r<e.length;r++)if(t[a].hasOwnProperty(e[r])){n=t[a][e[r]].split(" ");for(var s=0;s<n.length;s++)i&&-1!==i.indexOf(n[s])||-1===o.indexOf(n[s])&&o.push(n[s])}return o},OGX.Tags.prototype.tagDatatree=function(t,e){"use strict";!function(t,o){var a=[];if(function t(e){if(e.hasOwnProperty("items"))for(var i=0;i<e.items.length;i++){for(var n in e.items[i])-1<o.indexOf(n)&&-1===a.indexOf(e.items[i][n])&&a.push(e.items[i][n]);return t(e.items[i]),!0}}(t));}(t,e)},OGX.Tags.NAME="Tags",OGX.Tags.CHANGE="TagsChange",OGX.Tags.TAG_ADDED="TagsTagAdded",OGX.Tags.TAG_REMOVED="TagsTagRemoved",OGX.Tags.MODE_STRING="TagsModeString",OGX.Tags.MODE_OBJECT="TagsModeObject",OGX.Tags.MODE_ASCII="TagsModeAscii",OGX.Templater={},OGX.Templater.templatize=function(__obj,__template,__debug){"use strict";var reg;void 0===__debug&&(__debug=!1);var tmp={};function extract(){reg=new RegExp("{{(((?!(}})).)*)}}","gi");var t=__template.match(reg);if(t)for(var e=0;e<t.length;e++)reg=new RegExp("^{{[ ]?([a-z]+) ","gi"),t[e].match(reg)?handleOp(t[e]):handleEcho(t[e])}function handleOp(t){var e=/{{[ ]?([a-z]+)/gi.exec(t);if(e&&e.length)switch(e[1]){case"loop":handleLoop(t);break;case"calc":handleCalc(t)}}function handleLoop(__op){var html="",reg=/{{[ ]?loop[ ]+((?:\$|@)[a-z0-9_\-\.]+)[ ]+(.*)([ ]+)?}}/gi,match=reg.exec(__op);if(match){var prop=eval("__obj."+match[1].substr(1));if(prop){if(prop.length){for(var i=0;i<prop.length;i++)html+=match[2].replace(/\.\$/g,"["+i+"]");html=replace(html)}__template=__template.replace(match[0],html)}else __debug||(__template=__template.replace(__op,""))}}function handleCalc(__op){var html="",s=__op.replace(/{{[ ]?calc/gi,"");s=s.replace(/}/gi,""),s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj."),s=replaceGlobalVar(s);var r=eval(s);void 0===r&&__debug||(__template=__template.replace(__op,""))}function handleEcho(__op){var s=__op.replace(/{|}/gi,"");s=s.replace(/\@/g,"tmp."),s=s.replace(/\$/g,"__obj."),s=replaceGlobalVar(s);var r=eval(s);void 0!==r?__template=__template.replace(__op,r):__debug||(__template=__template.replace(__op,""))}function replaceGlobalVar(t){if(-1!==t.indexOf("#")){var e=t.match(/#([a-z0-9_\\-]+)/gi);e&&(t=t.replace(/(#[a-zA-Z0-9_\\-]+)/g,e[0].substr(1)))}return t}function replace(__html){var reg=new RegExp("((\\$|@|#)[a-z0-9_\\-\\[\\]\\.]+)","gi"),match=__html.match(reg),s,r;if(match){for(var i=0;i<match.length;i++)s=match[i].replace(/\$/g,"__obj."),s=s.replace(/\@/g,"tmp."),s=replaceGlobalVar(s),r=eval(s),void 0!==r&&(__html=__html.replace(match[i],r));return __html}return!1}return extract(__template),__template},OGX.Templater.loadTemplates=function(t,e){"use strict";var o=this;this.templates={},void 0===e&&(e=!1),setTimeout(function(){!function e(i,n){i.length?$.get(i[0].file,function(t){o.templates[i[0].name]=t,$(document).trigger(OGX.Templater.TEMPLATE_LOADED,{name:i[0].name,html:t}),i.splice(0,1),i.length?setTimeout(function(){e(i,n)},0):n?n():$(document).trigger(OGX.Templater.TEMPLATES_LOADED)}):n()}(t,e)},0),this.getTemplate=function(t){return!!this.templates.hasOwnProperty(t)&&this.templates[t]}},OGX.Templater.TEMPLATE_LOADED="Templater_TEMPLATE_LOADED",OGX.Templater.TEMPLATES_LOADED="Templater_TEMPLATES_LOADED",require("Theater","Uxi","Touch"),OGX.Theater=function(t){construct(this,"Theater");var o,a,n,r=this,s=t,e={anim:!1,display:!0,icon_size:50,timeout:30},i={template:!1,html:'<span class="ogx_theater_stage_icon" style="background-image:url(\'{{$icon}}\')"></span><span class="ogx_theater_stage_label">{{$label}}</span>'},l='<div class="list"></div>',c=!0;function d(t){t?($(document).on("backbutton",u),$(window).on("popstate",u),list.el.on(OGX.DynamicList.SELECT,function(t,e){!function(t){r.el.trigger(OGX.Theater.HIDE);var e=app.find(OGX.Stage.NAME,t);e.wake(),e.resizeNodes();var i,n=list.el.find('.ogx_theater_stage[data-ogx-id="'+e.id+'"]').position();r.observe(!0,{childList:!0},function(){r.observe(!1),(i=a.children(".ogx_theater_trans:first")).on("transitionend",function(){i.off("transitionend"),r.hide(),i.remove(),e.url?(app.showStage(e.id,!1),app.router.addToHist(e.url)):app.goto(e.id+"/"+e.home)}),i.removeClass("ogx_theater_trans_hide"),setTimeout(function(){i.addClass("ogx_theater_trans_grow").css({opacity:1,width:"100%",height:"100%",transform:"translate3d(0px, 0px, 0px)"})},s.timeout)},a),a.append('<div class="ogx_theater_trans ogx_theater_trans_hide" style="width:'+s.icon_size+"px; height:"+s.icon_size+"px; transform:translate3d("+n.left+"px,"+n.top+'px, 0px);" data-ogx-id="'+e.id+'"><div class="icon" style="background-image:url(\'/img/'+e.theater.icon+"')\"></div></div>")}(e.id)})):($(document).off("backbutton",u),$(window).off("popstate",u),list.el.off(OGX.DynamicList.SELECT))}function u(){r.hide()}function _(){o.prepend(l);for(var t,e=[],i=0;i<n.length;i++)t={id:n[i].id,name:"",icon:""},"object"==typeof n[i].theater&&n[i].theater.hasOwnProperty("icon")&&(t.icon="./img/"+n[i].theater.icon,t.label=n[i].theater.label),e.push(t);$(".ogx_theater > .list").on(OGX.DynamicList.RENDER,function(t){$(".ogx_theater > .list").off(OGX.DynamicList.RENDER),setTimeout(function(){l=$(".ogx_theater:first").detach()},0)}),list=r.create("DynamicList",{container:".ogx_theater > .list",display:{html:s.display.html,css:"ogx_theater_stage"},key:"id",scroll:!0,mode:"hit",list:e,trigger:!0})}function h(){var t=app.gather(OGX.Stage.NAME);n=[];for(var e=0;e<t.length;e++)t[e].theater&&n.push(t[e])}this._NAME_=OGX.Theater.NAME,this.update=function(){h()},this.show=function(){c&&(a.prepend(l),function(){r.el.trigger(OGX.Theater.SHOW);var i,n=app.getStage();r.observe(!0,{childList:!0},function(t){r.observe(!1),n.sleep(),i=a.children(".ogx_theater_trans:first");var e=list.el.find('.ogx_theater_stage[data-ogx-id="'+n.id+'"]').position();i.removeClass("ogx_theater_trans_hide"),setTimeout(function(){i.on("transitionend",function(){i.off("transitionend"),setTimeout(function(){i.remove()},0)}),i.addClass("ogx_theater_trans_show").addClass("ogx_theater_trans_shrink").css({opacity:0,width:s.icon_size+"px",height:s.icon_size+"px",transform:"translate3d("+e.left+"px, "+e.top+"px, 0px)"})},s.timeout)},a),a.append('<div class="ogx_theater_trans ogx_theater_trans_hide" data-ogx-id="'+n.id+'"><div class="icon" style="background-image:url(\'/img/'+n.theater.icon+"')\"></div></div>"),o.css("visibility","visible")}(),this.focusNodes(),d(!0),c=!1)},this.hide=function(){c||(this.blurNodes(),l=o.detach(),d(!1),c=!0)},this.tile=function(t,e){void 0===e&&(e="x")},OGX.Data.merge(s,e),s.display&&("object"!=typeof s.display&&(s.display={}),OGX.Data.merge(s.display,i),s.display.template&&(s.display.html=OGX.Templater.getTemplate(s.display.template))),r.el=o=$(s.container),o.addClass("ogx_theater").css("visibility","hidden"),a=$("body"),h(),$(document).on(OGX.App.READY,_)},OGX.Theater.NAME="Theater",OGX.Theater.ZOOM="TheaterZoom",OGX.Theater.SHOW="TheaterShow",OGX.Theater.HIDE="TheaterHide",OGX.Touch=function(t){"use strict";var e=this;this.touch=!1,this.touch||this.initTouch(t.chromeos),this.touch.swipe=new OGX.Touches.Swipe(this),this.touch.hold=new OGX.Touches.Hold(this),this.touch.drag=new OGX.Touches.Drag(this),this.touch.enable=function(){e.touch.swipe.enable(),e.touch.hold.enable(),e.touch.drag.enable()},this.touch.disable=function(){e.touch.swipe.disable(),e.touch.hold.disable(),e.touch.drag.disable()}},OGX.Touch.prototype.initTouch=function(t){void 0===t&&(t=!1),this.touch={hold:{}},this.touch.down="mousedown",this.touch.up="mouseup",this.touch.move="mousemove",void 0===window.ontouchstart||t||(this.touch.down="touchstart",this.touch.up="touchend",this.touch.move="touchmove")},OGX.Touch.prototype.touchable=function(){return void 0!==window.ontouchstart},OGX.Touch.prototype.event=function(t){return t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches?t.originalEvent.changedTouches[0]:t},OGX.Touches={},OGX.Touches.Swipe=function(t){"use strict";var e,i=t,n={speed:10,x:!0,y:!1,min_x:100,min_y:100,cb_down:!1,cb_swipe:!1,cb_up:!1,target:!1},o=!1,a={x:0,y:0},r={x:0,y:0},s=0,l=0,c=0,d=0,u=0,_=!1,h=!1,f=!1;function p(t){f||(f=!0,t=i.event(t),a.x=t.pageX,a.y=t.pageY,c=d=0,s=l=u=0,g(!0),o.cb_down&&o.cb_down(a))}function g(t){t?(m(!0),_=setInterval(O,o.speed)):(m(!1),_&&(clearInterval(_),_=!1))}function m(t){t?e.on(i.touch.move,x):e.off(i.touch.move,x)}function y(t){t?($("body").on(i.touch.up,v),e.on(i.touch.down,p)):($("body").off(i.touch.up,v),e.off(i.touch.down,p))}function v(t,e){h&&(void 0===e&&(e=!1),g(!1),f&&o.cb_up&&o.cb_up({pt0:a,pt1:r,distX:c,distY:d,dist:u,dirX:s,dirY:l,swipe:e}),f=!1)}function x(t){t=i.event(t),r.x=t.pageX,r.y=t.pageY,s=r.x>a.x?1:-1,l=r.y>a.y?1:-1,c=Math.abs(r.x-a.x),d=Math.abs(r.y-a.y),u=Math.sqrt(Math.abs(Math.pow(r.x-a.x,2)-Math.pow(r.y-a.y,2)))}function O(){o.cb_swipe&&(o.x&&o.min_x&&c>=o.min_x||o.y&&o.min_y&&d>=o.min_y?v(0,!0):o.cb_swipe({pt0:a,pt1:r,dirX:s,dirY:l,distX:c,distY:d,dist:u}))}this.set=function(t){o=t,OGX.Data.merge(o,n),e=i.el,o.target&&(e=$(o.target))},this.enable=function(){!h&&o&&y(h=!0)},this.disable=function(){h&&o&&(y(h=!1),g(!1))}},OGX.Touches.Hold=function(t){"use strict";var e={cb_hold:!1,cb_up:!1,cb_move:!1,time:1e3,container:this.el,target:!1},i=!1,n=!1,o=!1,a=!1,r=!1,s=!1,l=t,c={x:0,y:0},d={x:0,y:0},u=!1;function _(t){t=l.event(t),u=t.target.offsetParent,a||(a=!0,n=(new Date).getTime(),c.x=l.el.offset().left+t.pageX,c.y=l.el.offset().top+t.pageY,$("body").on(l.touch.move,h),o=setInterval(f,1))}function h(t){t=l.event(t),d.x=l.el.offset().left+t.pageX,d.y=l.el.offset().top+t.pageY,!r&&5<Math.abs(c.x-d.x)||5<Math.abs(c.y-d.y)?(clearInterval(o),o=!1):i.cb_move&&i.cb_move(d)}function f(){a&&(new Date).getTime()-n>i.time&&(r||(r=!0,i.cb_hold?i.cb_hold(u):l.el.trigger(OGX.Touch.HOLD_START)))}function p(){a=r=!1,$("body").off(l.touch.move,h),clearInterval(o),o=!1,i.cb_up?i.cb_up():l.el.trigger(OGX.Touch.HOLD_END)}this.set=function(t){i=t,OGX.Data.merge(i,e)},this.enable=function(){!s&&i&&(s=!0,l.el.on(l.touch.down,i.target,_),$("body").on(l.touch.up,p))},this.disable=function(){s&&i&&(s=!1,(a||o)&&(a=r=!1,clearInterval(o),itnv=!1),l.el.off(l.touch.down,i.target,_),$("body").off(l.touch.up,p),$("body").off(l.touch.move,h))}},OGX.Touches.Drag=function(a){"use strict";var r,s,l,c,d,u,_=!1,e={x:!0,y:!0,min:10,limit_x:null,limit_y:null,target:!1,cb_down:!1,cb_drag:!1,cb_up:!1,border:10},h=a,i=!1,t=!1;function n(t){var e=[];e=_.target?[h.touch.down,_.target,o]:[h.touch.down,o],t?h.el.on.apply(h.el,e):h.el.off.apply(h.el,e)}function o(t){t=a.event(t),l=t.pageX,c=t.pageY;var e=h.el.position();r=e.left,s=e.top;var i=h.el.offset(),n=l-i.left,o=c-i.top;if(_.border){if(n<_.border||n>h.el.width()-_.border)return;if(o<_.border||o>h.el.height()-_.border)return}f(!(u=d=0)),p(!0),_.cb_down&&_.cb_down()}function f(t){t?i=i||setInterval(y,10):i&&(clearInterval(i),i=null)}function p(t){t?($("body").on(h.touch.move,m),$("body").on(h.touch.up,g)):($("body").off(h.touch.move,m),$("body").off(h.touch.up,g))}function g(t){f(!1),p(!1),t=a.event(t),_.x&&(d=t.pageX-l),_.y&&(u=t.pageY-c),_.cb_up&&_.cb_up({distX:d,distY:u})}function m(t){t=a.event(t);var e,i=!1;_.x&&(e=t.pageX-l,null!==_.limit_x?e>=_.limit_x.min&&e<=_.limit_x.max&&(_.min?Math.abs(e)>_.min&&(d=e,i=!0):(d=e,i=!0)):_.min?Math.abs(e)>_.min&&(d=e,i=!0):d=e),_.y&&(e=t.pageY-c,null!==_.limit_y?e>=_.limit_y.min&&e<=_.limit_y.max&&(_.min?Math.abs(e)>_.min&&(u=e,i=!0):(u=e,i=!0)):u=e),i&&_.cb_drag&&_.cb_drag({distX:d,distY:u})}function y(){h.el.css({transform:"translate3d("+(r+d)+"px, "+(s+u)+"px, 0px)"})}this.dragable=!0,this.set=function(t){_=t,OGX.Data.merge(_,e)},this.enable=function(){!t&&_&&n(t=!0)},this.disable=function(){t&&_&&(n(t=!1),p(!1),f(!1))}},OGX.Touch.HOLD_START="TouchHoldStart",OGX.Touch.HOLD_END="TouchHoldEnd",require("Tree","Uxi","Touch"),OGX.Tree=function(t){construct(this,"Tree");var n,o,a,r,e,i,s,l,c=this,d=t,u={show_root:!0,root_label:"root",editable:!1,sort:{enabled:!0,property:"label",way:1},toggle:!0,drag_after:1e3,icon_size:30,scope:["public"],chromeos:!1,types:{root:{mode:"folder",icons:{open:"folder_open",close:"folder_closed",empty:null}},file:{mode:"file",icon:"file"},folder:{mode:"folder",icons:{open:"folder_open",close:"folder_closed",empty:null}}},data:{id:0,type:"root",label:d.root_label,state:"closed",items:[]},template:'<div class="ogx_tree_item" data-id="{{$_id_}}"><span class="ogx_tree_item_arrow {{$arrow_style}} {{$arrow_display}}"><span style="width:{{$arrow_size}}; height:{{$arrow_size}}"></span></span><span class="ogx_tree_item_icon {{$icon}}" style="width:{{$size}}px; height:{{$size}}px;"></span><div class="ogx_tree_item_label">{{$label}}</div><div class="ogx_tree_item_container {{$container_display}}"></div></div>'};function _(){var t={icon:T({type:"root",state:"open"}),size:d.icon_size,_id_:d.data._id_,label:d.root_label,container_display:"",arrow_display:"",arrow_style:"ogx_tree_item_arrow_open",arrow_size:Math.round(d.icon_size/2)+"px"};n.html(OGX.Templater.templatize(t,d.template)),d.data.element=n.children(".ogx_tree_item:first")}function h(){_(),f(d.data,d.data.element)}function f(t,e){if(t.hasOwnProperty("items")){var i,n;i=d.sort.enabled?function(t,e,i){return t.sort(function(i,n){return function(t,e){return t[i]<e[i]?-1*n:t[i]>e[i]?n:0}}(e,i)),t}(t.items,d.sort.property,d.sort.way):t.items;for(var o=0;o<i.length;o++)n={icon:null,size:d.icon_size,_id_:t.items[o]._id_,label:t.items[o].label,container_display:"",arrow_display:"",arrow_style:"",arrow_size:Math.round(d.icon_size/2)+"px"},t.items[o].hasOwnProperty("state")||(t.items[o].state="close"),"folder"===D(t.items[o])?(t.items[o].items.length||(t.items[o].state="close",n.arrow_style="ogx_tree_item_arrow_disabled"),"open"===t.items[o].state?n.arrow_style="ogx_tree_item_arrow_open":(n.arrow_style+=" ogx_tree_item_arrow_close",n.container_display="ogx_tree_item_container_hidden")):n.arrow_display="ogx_tree_item_arrow_hidden",n.icon=T(t.items[o]),e.children(".ogx_tree_item_container:last").append(OGX.Templater.templatize(n,d.template)),t.items[o].element=e.children(".ogx_tree_item_container:last").children(".ogx_tree_item:last"),f(t.items[o],t.items[o].element)}}function p(t){var e=JSON.parse(JSON.stringify(t));return delete e._id_,delete e.element,e}function g(t){"folder"===D(t)&&(t.items.length||(t.state="close",t.element.children(".ogx_tree_item_arrow:first").addClass("ogx_tree_item_arrow_disabled")),"open"===t.state?(t.element.children(".ogx_tree_item_arrow:first").removeClass("ogx_tree_item_arrow_close").removeClass("ogx_tree_item_arrow_disabled").addClass("ogx_tree_item_arrow_open"),t.element.children(".ogx_tree_item_container:first").css("display","block")):(t.element.children(".ogx_tree_item_arrow:first").removeClass("ogx_tree_item_arrow_open").addClass("ogx_tree_item_arrow_close"),t.element.children(".ogx_tree_item_container:first").css("display","none")),t.element.children(".ogx_tree_item_icon:first").attr("class","ogx_tree_item_icon "+T(t)))}function m(){if(s){var t=b(s);t&&(t.children(".ogx_tree_item_icon:first").removeClass("ogx_tree_selected_item"),s=null)}}function y(i,n){var o,a;return E(function(t,e){return o=t.element.offset(),a=t.element.children(".ogx_tree_item_icon:first"),i>=o.left&&i<=o.left+a.width()&&n>=o.top&&n<=o.top+a.height()&&t})}function v(o){return E(function(t,e,i,n){return t._id_===o&&(i.items.splice(n,1),i.items.length||(i.state="close"),g(i),!0)})}function x(e,i){return E(function(t){return t._id_===i&&(t.items.push(e),t.state="open",g(t),!0)})}function O(i){return E(function(t,e){return t._id_===i&&t})}function b(t){var e=O(t);return!!e&&e.element}function w(i){return E(function(t,e){return i===e+"/"+t.label&&t})}function G(t){var e=w(t);return!!e&&e.element}function X(){l=1,E(function(t){return t._id_=l++,t.hasOwnProperty("type")||(t.hasOwnProperty("items")?t.type="folder":t.type="file"),!1})}function E(r,t){var s;if(void 0===t&&(t=d.data),s=function t(e,i,n,o){if(s=r(e,i,n,o))return s;if(e.hasOwnProperty("items")&&e.items.length)for(var a=0;a<e.items.length;a++)if(s=t(e.items[a],i+"/"+e.label,e,a))return s;return!1}(t,""))return s}function T(t){return!!d.types.hasOwnProperty(t.type)&&(d.types[t.type].hasOwnProperty("icons")?"close"===t.state&&!t.items.length&&d.types[t.type].icons.hasOwnProperty("empty")?d.types[t.type].icons.empty:d.types[t.type].icons[t.state]:d.types[t.type].icon)}function D(t){return!!d.types.hasOwnProperty(t.type)&&d.types[t.type].mode}function C(t){var e,i;i=p(O(e=t.data("id"))),d.toggle?t.children(".ogx_tree_item_icon:first").hasClass("ogx_tree_selected_item")?(m(),n.trigger(OGX.Tree.UNSELECT,i)):(m(),t.children(".ogx_tree_item_icon:first").addClass("ogx_tree_selected_item"),s=e,n.trigger(OGX.Tree.SELECT,i)):(m(),t.children(".ogx_tree_item_icon:first").addClass("ogx_tree_selected_item"),n.trigger(OGX.Tree.SELECT,i))}function M(t){t?(d.editable?(n.on(c.touch.down,".ogx_tree_item > .ogx_tree_item_icon",function(t){t.preventDefault(),C($(this).parent(0)),1!==$(this).parent(0).data("id")&&function(){e&&clearInterval(e);i=(new Date).getTime(),e=setInterval(L,50)}()}),$(document).on(c.touch.up,function(){S(),a&&(N(!1),function(){var t=a.offset().left,e=a.offset().top,i=y(t,e);o=!i||i&&(i._id_===o._id_||"folder"!==D(i))?(r.css("opacity",1),a.remove(),a=null):(function(t,e){v(t._id_),x(t,e._id_),e.element.children(".ogx_tree_item_container:first").empty(),e.state="open",f(e,e.element),g(e)}(o,i),r.remove(),a.remove(),a=null,n.trigger(OGX.Tree.DROP,o),null)}())})):n.on("click",".ogx_tree_item > .ogx_tree_item_icon",function(t){t.preventDefault(),C($(this).parent(0))}),n.on(c.touch.down,".ogx_tree_item_arrow",function(t){if(t.preventDefault(),S(),0<$(this).parent(0).children(".ogx_tree_item_container:first").children().length){var e=O($(this).parent(0).data("id"));"open"===e.state?(e.state="close",n.trigger(OGX.Tree.CLOSE,e)):(e.state="open",n.trigger(OGX.Tree.OPEN,e)),g(e)}})):(d.editable?n.off(c.touch.down,".ogx_tree_item > .ogx_tree_item_icon"):n.off("click",".ogx_tree_item > .ogx_tree_item_icon"),n.off(c.touch.down,".ogx_tree_item_arrow"))}function L(){(new Date).getTime()-i>=d.drag_after&&(s&&(o=O(s))&&function(t){(a=(r=t).clone()).children(".ogx_tree_item_arrow:first").css("display","none"),t.css("opacity",.3),a.addClass("ogx_tree_item_drag"),a.css({top:t.offset().top,left:t.offset().left}),n.prepend(a),N(!0),n.trigger(OGX.Tree.DRAG,o)}(o.element),S())}function N(t){t?$(document).on(c.touch.move,function(t){t=function(t){if(t.hasOwnProperty("originalEvent")&&void 0!==t.originalEvent.changedTouches)return t.originalEvent.changedTouches[0];return t}(t),a.css({top:t.pageY+"px",left:t.pageX+"px"})}):$(document).off(c.touch.move)}function S(){e&&(clearInterval(e),e=null)}this._NAME_=OGX.Tree.NAME,this.el=null,this.setIconSize=function(i){d.icon_size=i,n.find(".ogx_tree_item_icon").each(function(t,e){$(e).attr("width",i+"px").attr("height",i+"px")}),$(".ogx_tree_item_arrow span").css({width:Math.round(d.icon_size/2)+"px",height:Math.round(d.icon_size/2)+"px"})},this.addItem=function(t){if(s){var e=O(s);return"folder"===D(e)&&(t._id_=++l,x(t,s),e.element.children(".ogx_tree_item_container:first").empty(),e.state="open",f(e,e.element),e.element.children(".ogx_tree_item_container:first").css("display","block")),!0}return!1},this.selectItemByPropVal=function(t,e){var i=function(i,n){return E(function(t,e){return!(!t.data.hasOwnProperty(i)||t.data[i]!==n)&&e+"/"+t.label})}(t,e);return!!i&&(m(),function(t){var e=b(t);e&&(s=t,e.children(".ogx_tree_item_icon:first").addClass("ogx_tree_selected_item"))}(i._id_),!0)},this.selectItemByPath=function(t){var e=G(t);return!!e&&(m(),e.addClass("ogx_tree_selected_item"),s=e.data("id"),!0)},this.updateSelectedItemDataProperty=function(t,e){return!!s&&(O(s).data[t]=e,!0)},this.updateSelectedItemData=function(t){return!!s&&(O(s).data=t,!0)},this.updateSelectedItemLabel=function(t){if(s){var e=O(s);return e.label=t,b(e._id_).children(".ogx_tree_item_label:first").html(t),!0}return!1},this.deleteItemByPath=function(t){var e=G(t);return!!e&&v(e.data("id"))},this.deleteSelectedItem=function(){return function(){if(s)return E(function(t,e,i,n){if(t._id_===s)return t.element.remove(),i.items.splice(n,1),g(i),!0});return!1}()},this.getSelectedItem=function(){return function(){if(s)return O(s);return!1}()},this.getTree=function(){var t=E(p,JSON.parse(JSON.stringify(d.data)));if(t)return t},this.setData=function(t){t.hasOwnProperty("types")&&this.setTypes(t.types),t.hasOwnProperty("tree")&&this.setTree(t.tree)},this.setTypes=function(t){d.types=t},this.setTree=function(t){d.data=t,d.data.hasOwnProperty("state")||(d.data.state="open"),X(),h()},this.newTree=function(){l=1,d.data={_id_:l,type:"root",state:"open",label:d.root_label,element:null,items:[]},_()},this.filterTree=function(t){!function(o){var a=[];(function t(e,i){if(-1!==(i+e.label).indexOf(o)&&a.push(i+"/"+e.label),e.hasOwnProperty("items")&&e.items.length)for(var n=0;n<e.items.length;n++)t(e.items[n],i+"/"+e.label,e,n)})(d.data,"")}(t)},this.destroy=function(){M(!1)},function(){if(OGX.Data.merge(d,u),c.el=n=$(d.container),n.addClass("ogx_tree"),n.attr("data-ogx-id",c.id),Array.isArray(d.data)){var t=JSON.stringify(d.data);d.data={type:"root",label:d.root_label,items:JSON.parse(t)}}}(),X(),M(!0),d.data&&h()},OGX.Tree.NAME="Tree",OGX.Tree.SELECT="TreeSelect",OGX.Tree.UNSELECT="TreeUnselect",OGX.Tree.OPEN="TreeOpen",OGX.Tree.CLOSE="TreeClose",OGX.Tree.DRAG="TreeDrag",OGX.Tree.DROP="TreeDrop",require("TreedList","Uxi"),OGX.TreedList=function(t){construct(this,"TreedList");var i=this,e={renderer:"Tree",list:new OGX.List,types:null,display:null,displays:null,group_by:null,group_mode:null,group_param:null},l=t,o=null,n=null;function a(){switch(r(l.list),l.renderer){case OGX.Tree.NAME:e={container:l.container,data:void 0},l.types&&(e.types=l.types),e.tree=function(){var t={type:"root",label:"root",state:"open",items:[]};return function t(e,i){if(Array.isArray(e)){for(var n=0;n<e.length;n++)e[n].type="file";i.items=e}else for(var o in e)i.items.push({type:"folder",label:o,state:"open",items:[]}),t(e[o],i.items[i.items.length-1])}(o,t),t}(),n=i.create(l.renderer,e);break;case OGX.StackedTree.NAME:(e=function(){var t={display:!1,displays:!1};l.display&&l.display.hasOwnProperty("bind")?(t.display=OGX.Data.clone(l.display),t.displays=OGX.Data.clone(l.displays)):(t.display={bind:"__type"},t.displays={__default:OGX.Data.clone(l.display)},"object"==typeof t.displays.__default.css?t.displays.__default.css.hasOwnProperty("add")?t.displays.__default.css.add+=" ogx_stacked_tree_item":t.displays.__default.css.add="ogx_stacked_tree_item":t.displays.__default.css={add:t.displays.__default.css+" ogx_stacked_tree_item"});for(var e=0;e<l.group_by.length;e++)grp=l.group_by[e],t.displays[grp]={html:"{{$label}}",css:"ogx_stacked_tree_item"};return t}()).container=l.container;var t=function(){var t={data:[]};return function t(e,i,n,o){var a;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r].hasOwnProperty("scope")||(e[r].scope=["public"]);i.items=e}else for(var s in e)a={label:s,__type:l.group_by[o],scope:["public"],items:[]},n?(i.data.push(a),t(e[s],i.data[i.data.length-1],!1,o+1)):(i.items.push(a),t(e[s],i.items[i.items.length-1],!1,o+1))}(o,t,!0,0),t}();e.list=t.data,l.hasOwnProperty("id")&&(e.id=l.id+"_stacked"),n=i.create(l.renderer,e);break;case OGX.RouletteTree.NAME:var e;(e=OGX.Data.clone(l)).hasOwnProperty("id")&&(e.id=e.id+"_roultree"),e.data=o,e.groups=l.group_by,n=i.create(l.renderer,e)}}function r(t,e,i,n){l.list=t,void 0!==e&&(l.group_by=e),void 0!==i&&(l.group_mode=i),void 0!==n&&(l.group_param=n),o=l.list.group(l.group_by,l.group_mode,l.group_param)}this._NAME_=OGX.TreedList.NAME,this.el=null,this.val=function(t,e,i,n){return void 0!==t&&r(t),o},this.getRenderer=function(){return n},this.getTree=function(){return o},l&&void 0!==l||(l={}),OGX.Data.merge(l,e),l.list.hasOwnProperty("insert")||(l.list=new OGX.List(l.list)),$(l.container).addClass("ogx_treedlist"),a()},OGX.TreedList.NAME="TreedList",require("Uxi","Overlay","Loading"),OGX.Uxi=function(t){construct(this,"Uxi"),this.sleeping=!1,this.blured=!0,this.floating=!1,this.scroll=!1,this.enabled=!1,this.always_on=!1,this.nodes=new OGX.List,this.points={},this.observer=!1,this.parent=null;var e=!(config_default={id:(new Date).getTime()+""+Math.round(1e3*Math.random()),enabled:!0,always_on:!1,scroll:!1,container:!1});void 0===t&&(t={}),OGX.Data.merge(t,config_default),this.id=t.id,this.enabled=t.enabled,this.always_on=t.always_on,this.scroll=t.scroll;var i="#"===this.id.substr(0,1);if(t.container){var n=$(t.container),o="ogx_uxi";this.enabled||(o+=" ogx_uxi_disabled");var a='<div class="'+o+'" data-ogx-id="'+this.id+'"';i&&(a+=' id="'+this.id.substr(1)+'"'),a+="></div>",t.scroll?(e=this.create("Scroller",{id:this.id+"_scroller",container:t.container}),t.container=e.inner(),(n=$(t.container)).addClass(o).attr("data-ogx-id",this.id),i&&n.attr("id",this.id.substr(1)),setTimeout(function(){e.resize()},0)):(n.append(a),t.container='.ogx_uxi[data-ogx-id="'+this.id+'"]')}},OGX.Uxi.prototype.enable=function(){},OGX.Uxi.prototype.disable=function(){},OGX.Uxi.prototype.ux=function(){},OGX.Uxi.prototype.construct=function(){},OGX.Uxi.prototype.destroy=function(){},OGX.Uxi.prototype.resize=function(){},OGX.Uxi.prototype.show=function(){this.el&&this.el.removeClass("ogx_uxi_hide")},OGX.Uxi.prototype.hide=function(){this.el&&this.el.addClass("ogx_uxi_hide")},OGX.Uxi.prototype.observe=function(t,e,i,n){var o=this,a=this.el;if(void 0!==n&&(a=n),t){if(!this.observer)return void 0===e&&(e={childList:!0,subtree:!0}),this.observer=new MutationObserver(function(t,e){t.forEach(function(t){void 0!==i?i(t):o.el.trigger(OGX.View.CHANGED,t)})}),this.observer.observe(a[0],e),!0}else if(this.observer)return this.observer.disconnect(),!(this.observer=null);return!1},OGX.Uxi.prototype.sleep=function(){this.sleeping||(this.blur(),this.sleeping=!0,this.scroll?(this.__parent=this.el.parent(".ogx_scroller_outer:first").parent(0),this.el=this.__parent.children(".ogx_scroller_outer:first").detach()):(this.__parent=this.el.parent(0),this.el=this.el.detach()))},OGX.Uxi.prototype.wake=function(t){t=void 0===t?this.__parent:$(t),this.sleeping&&(this.sleeping=!1,t.prepend(this.el),this.el=t.find('.ogx_uxi[data-ogx-id="'+this.id+'"]'),this.focus(),delete this.__parent)},OGX.Uxi.prototype.resizeNodes=function(){var t=this.gather();if(t.length)for(var e in t)t[e].resize()},OGX.Uxi.prototype.kill=function(){this.blur(),"function"==typeof this.destroy&&this.destroy(),"function"==typeof this.__destroy&&this.__destroy(),this.clear(),this.floating&&this.el.remove()},OGX.Uxi.prototype.reveal=function(t,e){var i=this.path(t,e);if(i){for(var n=0;n<i.length;n++)i[n].show();var o=i.pop();return o.floating?o.show():o.show(t,e),!0}},OGX.Uxi.prototype.blur=function(t){void 0===t&&(t=!0),this.always_on||this.blured||(this.blured=!0,this.ux(!1),this.disable(),t&&this.blurNodes())},OGX.Uxi.prototype.blurNodes=function(){var t=this.gather();if(t.length)for(var e in t)"function"==typeof t[e].blur&&t[e].blur(!1)},OGX.Uxi.prototype.focus=function(t){void 0===t&&(t=!0),this.blured&&(this.blured=!1,this.enabled&&(this.ux(!0),this.enable()),t&&this.focusNodes())},OGX.Uxi.prototype.focusNodes=function(){var t=this.gather();if(t.length)for(var e in t)"function"==typeof t[e].focus&&t[e].focus(!1)},OGX.Uxi.prototype.path=function(r,s){var l=[],c=0;var t=function t(e,i){if(i&&(l.hasOwnProperty(i)||(l[i]=[]),l[i].push(e)),void 0!==e.nodes&&e.nodes.length){var n={id:{eq:s}};r&&(n._NAME_={eq:r});var o=e.nodes.get(n,null,1);if(o.length)return i;for(var a=0;a<e.nodes.length;a++)if(i||c++,o=t(e.nodes[a],c))return o}return!1}(this,0);return!!t&&(l[t].unshift(this),l[t])},OGX.Uxi.prototype.gather=function(t){var o=[],a={_NAME_:{eq:""}};return void 0!==t&&(a=Array.isArray(t)?{_NAME_:{regex:new RegExp(t.join("|"))}}:{_NAME_:{regex:new RegExp(t)}}),function t(e){if(void 0!==e&&void 0!==e.nodes&&e.nodes.length){var i=e.nodes.get(a);i.length&&(o=o.concat(i));for(var n=0;n<e.nodes.length;n++)void 0!==e.nodes[n]&&void 0!==e.nodes[n].nodes&&e.nodes[n].nodes.length&&(i=t(e.nodes[n]))&&i.length&&(o=o.concat(i[0]))}}(this),o},OGX.Uxi.prototype.find=function(a,r,s){return void 0===s&&(s=!1),function t(e){if(void 0!==e.nodes&&e.nodes.length){var i={id:{eq:r}};a&&(i._NAME_={eq:a});var n=e.nodes.get(i,null,1);if(n.length){if(s)switch(s){case"remove":return n[0].kill(),e.nodes.findDelete("id",r,1)}return n[0]}for(var o=0;o<e.nodes.length;o++)if(n=t(e.nodes[o]))return n}return!1}(this)},OGX.Uxi.prototype.clear=function(){var n=[];!function t(e){if(e.nodes.length)for(var i=0;i<e.nodes.length;i++)e.nodes[i]&&(void 0!==e.nodes[i].nodes&&e.nodes[i].length?t(e.nodes[i]):n.unshift(e.nodes[i]))}(this);for(var t=0;t<n.length;t++)n[t].kill();return n=[],this.nodes=new OGX.List,!0},OGX.Uxi.prototype.add=function(t){(t.parent=this).nodes.insert(t)},OGX.Uxi.prototype.remove=function(t,e){return this.find(t,e,"remove")},OGX.Uxi.prototype.create=function(t,e){"undefined"==typeof __construct&&(__construct=!0);var i=Array.prototype.slice.call(arguments),n=[];e.hasOwnProperty("data")&&n.push(e.data),n=n.concat(i.splice(0,3)),void 0!==OGX[t]&&OGX[t].hasOwnProperty("FLOAT")&&OGX[t].FLOAT&&(e.parent=this,e.container=this.el[0]);var o=OGX.Object.create(t,e);return this.add(o),"function"==typeof o.construct&&o.construct.apply(o,n),this.blured||o.focus(),o},OGX.Uxi.prototype.parse=function(t){t=OGX.OML.parse(t),OGX.OML.render(this,t)},OGX.Uxi.prototype.topIndex=function(){var i,n=0;return this.el.children().each(function(t,e){i=Number($(e).css("z-index")),n<i&&(n=i)}),n+1},require("View","Uxi","Touch"),OGX.View=function(e){construct(this,"View");var i=this,n=!1,o=e;this.el=null,this._NAME_=OGX.View.NAME,this.enable=function(){o.observe&&this.observe(!0)},this.disable=function(){o.observe&&this.observe(!1)},this.container=function(){return n},this.render=function(t){void 0===t?o.hasOwnProperty("html")&&o.html&&n.html(o.html):n.html(t),n.trigger(OGX.View.RENDER)},function(){i.el=n=$(o.container);var t=new OGX.Display(e);o.html=t.html(e.data),n.addClass("ogx_view ogx_hw"),o.css&&n.addClass(o.css),i.render()}()},OGX.View.NAME="View",OGX.View.CHANGED="ViewChanged",OGX.View.RENDER="ViewRender",require("Window","Uxi","Placeholder","Touch","Resize"),OGX.Window=function(__config){construct(this,"Window");var that=this,container=!1,config_default={anim:!1,resize:!1,drag:!0,show:!1,width:"100%",height:"100%",min_width:100,min_height:100,max_width:0,max_height:0,head:OGX.Window.HEAD_BACK,icons:[],title:"",win_html:'<div class="ogx_window_head ogx_window_head_{{$head}} ogx_window_head_{{$side}}">$INNER</div><div class="ogx_window_body">{{$html}}</div>',win_inner:['<span class="ogx_window_main_{{$head}} ogx_window_main_icon"></span>','<span class="ogx_window_title">{{$title}}</span>','<span class="ogx_window_icons">{{loop $icons <span class="ogx_window_icon" style="background-image:url($icons.$)"></span>}}</span>'],zindex:!1,close_on_click_out:!1,close_dist:100,parent:null},config=__config,pt={x:null,y:null},dir={x:0,y:0},zd;function listenBackIcon(t){t?that.el.on("mousedown",".ogx_window_main_icon_back",onBack):that.el.off("mousedown",".ogx_window_main_icon_back",onBack)}function onBack(t){t.preventDefault(),t.stopImmediatePropagation(),that.hide()}function onDrag(t){(t.distX*dir.x>config.close_dist||t.distY*dir.y>config.close_dist)&&that.hide()}function onRelease(t){t.distX*dir.x>config.close_dist||t.distY*dir.y>config.close_dist?that.hide():(t.distX||t.distY)&&(config.anim&&(that.el.addClass("ogx_window_anim_in"),that.el.on("transitionend",function(){that.el.off("transitionend"),that.el.removeClass("ogx_window_anim_in")})),that.el.css("transform","translate3d("+pt.x+"px, "+pt.y+"px, 0px)"))}function render(){var t=prepWindow();container.html(t),zd=config.zindex?config.zindex:config.parent.topIndex();var e=getLimitedSize();container.css({width:e.width,height:e.height,"z-index":zd})}function getLimitedSize(){var t,e,i,n={width:config.width,height:config.height};return(config.min_width||config.max_width)&&(-1!==config.width.indexOf("%")?(t=config.parent.el.width(),i=Number(config.width.split("%")[0])*t/100):-1!==(i=config.width).indexOf("px")&&(i=Number(i.split("px")[0])),config.min_width&&i<config.min_width?n.width=config.min_width+"px":config.max_width&&i>config.max_width&&(n.width=config.max_width+"px")),(config.min_height||config.max_height)&&(-1!==config.height.indexOf("%")?(e=config.parent.el.height(),i=Number(config.height.split("%")[0])*e/100):-1!==(i=config.height).indexOf("px")&&(i=Number(i.split("px")[0])),config.min_height&&i<config.min_height?n.height=config.min_height+"px":config.max_height&&i>config.max_height&&(n.height=config.max_height+"px")),n}function listenBody(t){t?container.on(that.touch.down,".ogx_overlay",onBody):container.off(that.touch.down,".ogx_overlay",onBody)}function onBody(t){that.status===OGX.Window.OPEN&&(that.hide(),that.parent.removeOverlay(OGX.Overlay.Fade))}function animWindow(t,e,i,n){void 0===e&&(e=config.anim);var o={opac:1,tX:0,tY:0},a=container.parent().width(),r=container.parent().height(),s=that.el.outerWidth(),l=that.el.outerHeight(),c=that.el.find(".ogx_window_main_icon:first");switch(t&&(placeWindow(!0),c.removeClass("ogx_window_main_icon_left ogx_window_main_icon_right ogx_window_main_icon_top")),e){case OGX.Window.ANIM_NONE:break;case OGX.Window.ANIM_TOP:t?(o.tY=0,c.addClass("ogx_window_main_icon_top")):o.tY=-l-10;break;case OGX.Window.ANIM_BOTTOM:t?(o.tY=0,c.addClass("ogx_window_main_icon_bottom")):o.tY=r+10;break;case OGX.Window.ANIM_RIGHT:t?(o.tX=a-s,c.addClass("ogx_window_main_icon_right")):o.tX=a+10;break;case OGX.Window.ANIM_LEFT:t?(o.tX=0,c.addClass("ogx_window_main_icon_left")):o.tX=-s-10}var d=100;t?(pt.x=o.tX,pt.y=o.tY):d=0,setTimeout(function(){dir.x,that.el.on("transitionend",function(){that.el.off("transitionend"),t?that.el.removeClass("ogx_window_anim_in").addClass("ogx_window_open"):that.el.removeClass("ogx_window_anim_out ogx_window_open"),void 0!==i&&i(n),t?(that.status=OGX.Window.OPEN,that.el.trigger(OGX.Window.OPEN,config.id)):(that.status=OGX.Window.CLOSED,that.el.trigger(OGX.Window.CLOSED,config.id),__config.remove&&that.remove(that.id,OGX.Window.NAME))}),t?(that.status=OGX.Window.OPENING,that.el.trigger(OGX.Window.OPENING,config.id)):(that.status=OGX.Window.CLOSING,that.el.trigger(OGX.Window.CLOSING,config.id)),config.anim!==OGX.Window.ANIM_NONE&&(t?that.el.addClass("ogx_window_anim_in"):that.el.addClass("ogx_window_anim_out")),that.el.css({transform:"translate3d("+o.tX+"px, "+o.tY+"px, 0px)",opacity:o.opac,visibility:"visible"})},d)}function placeWindow(t){var e=container.parent().width(),i=container.parent().height(),n=that.el.outerHeight(),o=that.el.outerWidth();that.el.removeClass("ogx_window_anim_in").removeClass("ogx_window_anim_out");var a={x:0,y:0};switch(config.anim){case OGX.Window.ANIM_TOP:a.y=t?-n:n,dir.y=-1;break;case OGX.Window.ANIM_BOTTOM:a.y=t?i:i-n,dir.y=1;break;case OGX.Window.ANIM_RIGHT:a.x=t?e:e-o,dir.x=1;break;case OGX.Window.ANIM_LEFT:t&&(a.x=-o),dir.x=-1}that.el.css({transform:"translate3d("+a.x+"px, "+a.y+"px, 0px)"})}function prepWindow(){var t=new OGX.Display(config),e={};e.head=config.head,e.title=config.title,e.icons=config.icons,e.html=t.html();var i=config.win_html,n="";switch(config.anim){case OGX.Window.ANIM_RIGHT:case OGX.Window.ANIM_TOP:case OGX.Window.ANIM_BOTTOM:n=config.win_inner,e.side="right";break;case OGX.Window.ANIM_LEFT:n=config.win_inner.reverse(),e.side="left"}return n=n.toString().replace(/>,</g,"><"),i=i.replace("$INNER",n),OGX.Templater.templatize(e,i)}function onResize(){that.resizeNodes()}function initPlaceholders(){that.placeholders(config,['.ogx_window[data-ogx-id="'+that.id+'"] > .ogx_window_body'])}function initDefaults(){OGX.Data.merge(config,config_default,!1),-1!==config.head.indexOf(".")&&(config.head=eval(config.head)),-1!==config.anim.indexOf(".")&&(config.anim=eval(config.anim)),that.el=container=$(config.container),container.addClass("ogx_window"),that.dragable=config.drag,that.resizable=config.resize}function init(){if(initDefaults(),render(),placeWindow(!0),config.drag){var t={},e={top:!1,bottom:!1,left:!1,right:!1,cb_resize:onResize};switch(e.min_width=config.min_width,e.min_height=config.min_width,e.max_width=config.max_width,e.max_height=config.max_height,t.cb_drag=onDrag,t.cb_up=onRelease,config.anim){case OGX.Window.ANIM_LEFT:t.x=!0,t.y=!1,t.limit_x={min:-300,max:0},e.right=!0;break;case OGX.Window.ANIM_RIGHT:t.x=!0,t.y=!1,t.limit_x={min:0,max:300},e.left=!0;break;case OGX.Window.ANIM_TOP:t.x=!1,t.y=!0,t.limit_y={min:-300,max:0},e.bottom=!0;break;case OGX.Window.ANIM_BOTTOM:t.x=!1,t.y=!0,t.limit_y={min:0,max:300},e.top=!0}that.touch.drag.set(t)}config.resize&&that.setResize(e),initPlaceholders(),config.show&&that.show()}this.el=null,this._NAME_=OGX.Window.NAME,this.id=config.id,this.dragable=null,this.resizeable=null,this.floating=!0,this.status=OGX.Window.CLOSED,this.enable=function(){config.close_on_click_out&&listenBody(!0),config.head&&listenBackIcon(!0),config.drag&&this.touch.enable(),config.resize&&this.enableResize()},this.disable=function(){config.close_on_click_out&&listenBody(!1),config.head&&listenBackIcon(!1),config.drag&&this.touch.disable(),config.resize&&this.disableResize()},this.show=function(t,e,i){this.focus(!0),this.front(),null==t&&(t=config.anim),animWindow(!0,t,e,i)},this.hide=function(t,e,i){this.blur(!0),null==t&&(t=config.anim),animWindow(!1,t,e,i)},this.resize=function(){var t=getLimitedSize();container.css({width:t.width,height:t.height}),this.place()},this.front=function(){zd=config.parent.topIndex(),this.el.css("z-index",zd)},this.place=function(){placeWindow(this.status===OGX.Window.CLOSED)},this.destroy=function(){config.drag&&this.touch.disable(),config.head&&listenBackIcon(!1),config.close_on_click_out&&listenBody(!1)},init()},OGX.Window.NAME="Window",OGX.Window.READY="WindowReady",OGX.Window.ANIM_LEFT="WindowAnimLeft",OGX.Window.ANIM_RIGHT="WindowAnimRight",OGX.Window.ANIM_TOP="WindowAnimTop",OGX.Window.ANIM_BOTTOM="WindowAnimBottom",OGX.Window.ANIM_NONE="WindowAnimNone",OGX.Window.HEAD_BACK="icon_back",OGX.Window.HEAD_CLOSE="icon_close",OGX.Window.HEAD_NONE="none",OGX.Window.CLOSING="WindowClosing",OGX.Window.CLOSED="WindowClosed",OGX.Window.OPENING="WindowOpening",OGX.Window.OPEN="WindowOpen",OGX.Window.HIT_ICON="WindowHitIcon",OGX.Window.FLOAT=!0;